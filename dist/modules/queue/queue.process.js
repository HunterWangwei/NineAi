'use strict';var _0x4cec28=_0x3c74;(function(_0x3928c1,_0xaf1946){var _0x559d88=_0x3c74,_0x31dac2=_0x3928c1();while(!![]){try{var _0x440b57=-parseInt(_0x559d88(0x10e))/0x1*(parseInt(_0x559d88(0x118))/0x2)+-parseInt(_0x559d88(0x110))/0x3*(parseInt(_0x559d88(0x10c))/0x4)+parseInt(_0x559d88(0x10f))/0x5*(-parseInt(_0x559d88(0xed))/0x6)+parseInt(_0x559d88(0x116))/0x7*(-parseInt(_0x559d88(0xeb))/0x8)+-parseInt(_0x559d88(0xe8))/0x9*(-parseInt(_0x559d88(0x11b))/0xa)+-parseInt(_0x559d88(0xea))/0xb*(parseInt(_0x559d88(0x101))/0xc)+parseInt(_0x559d88(0x104))/0xd;if(_0x440b57===_0xaf1946)break;else _0x31dac2['push'](_0x31dac2['shift']());}catch(_0x2d99c2){_0x31dac2['push'](_0x31dac2['shift']());}}}(_0x3fc7,0x1f1cb));var __decorate=this&&this[_0x4cec28(0x10d)]||function(_0x105284,_0x36f216,_0x379d97,_0x3fd9a){var _0x3032e2=_0x4cec28,_0x26cd1f=arguments[_0x3032e2(0x124)],_0x352d67=_0x26cd1f<0x3?_0x36f216:_0x3fd9a===null?_0x3fd9a=Object[_0x3032e2(0x107)](_0x36f216,_0x379d97):_0x3fd9a,_0x40f014;if(typeof Reflect===_0x3032e2(0xf5)&&typeof Reflect[_0x3032e2(0xf8)]===_0x3032e2(0x11f))_0x352d67=Reflect['decorate'](_0x105284,_0x36f216,_0x379d97,_0x3fd9a);else{for(var _0x145c97=_0x105284[_0x3032e2(0x124)]-0x1;_0x145c97>=0x0;_0x145c97--)if(_0x40f014=_0x105284[_0x145c97])_0x352d67=(_0x26cd1f<0x3?_0x40f014(_0x352d67):_0x26cd1f>0x3?_0x40f014(_0x36f216,_0x379d97,_0x352d67):_0x40f014(_0x36f216,_0x379d97))||_0x352d67;}return _0x26cd1f>0x3&&_0x352d67&&Object[_0x3032e2(0x127)](_0x36f216,_0x379d97,_0x352d67),_0x352d67;},__metadata=this&&this[_0x4cec28(0xe6)]||function(_0x429072,_0x11266c){var _0x1626f8=_0x4cec28;if(typeof Reflect===_0x1626f8(0xf5)&&typeof Reflect[_0x1626f8(0xfa)]==='function')return Reflect[_0x1626f8(0xfa)](_0x429072,_0x11266c);},QueueProcessor_1;Object[_0x4cec28(0x127)](exports,_0x4cec28(0xf7),{'value':!![]}),exports['QueueProcessor']=void 0x0;const bull_1=require(_0x4cec28(0x126)),common_1=require(_0x4cec28(0x11c)),midjourney_service_1=require(_0x4cec28(0x121));function _0x3fc7(){var _0x5d527a=['onQueueResumed','midjourneyService','object','onQueueActive','__esModule','decorate','mjDraw','metadata','drawFailed','OnQueueFailed','\x20jobs\x20of\x20type\x20','OnQueueProgress',':\x20绘画失败\x20','\x20were\x20cleaned.','3408eUIBLh','design:returntype','Queue\x20cleaned:\x20','8928153foqNcC','onQueueCleaned','队列发生错误','getOwnPropertyDescriptor','OnQueueActive','log','design:type','OnQueueResumed','3188EmmSWM','__decorate','178228NPDGuY','869690JLPsWV','387lOooFA','prototype','Process','message','handleJob','队列恢复的时候调用','832972bqeoww','onQueueCompleted','2mdyjVR','onQueuePaused','onQueueError','15010PMcBIA','@nestjs/common','draw','MJDRAW','function','onQueueProgress','../midjourney/midjourney.service','env','design:paramtypes','length','队列任务的一个回调用于通知当前进度','@nestjs/bull','defineProperty','__metadata','OnQueueCompleted','1089Kedzgc','OnQueueDrained','6468krHgpy','8GaEzSx','data','6WlmOhh','OnQueuePaused','onQueueFailed','onQueueDrained','logger','Logger'];_0x3fc7=function(){return _0x5d527a;};return _0x3fc7();}function _0x3c74(_0x1f7bb7,_0x54b59d){var _0x3fc7da=_0x3fc7();return _0x3c74=function(_0x3c741f,_0x351768){_0x3c741f=_0x3c741f-0xe6;var _0x1a3e46=_0x3fc7da[_0x3c741f];return _0x1a3e46;},_0x3c74(_0x1f7bb7,_0x54b59d);}let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x1860d4){var _0x179f20=_0x4cec28;this['midjourneyService']=_0x1860d4,this[_0x179f20(0xf1)]=new common_1[(_0x179f20(0xf2))](QueueProcessor_1['name']);}async[_0x4cec28(0x114)](_0x18c393){var _0x4a4374=_0x4cec28;const _0x7db14e=await this[_0x4a4374(0xf4)][_0x4a4374(0x11d)](_0x18c393[_0x4a4374(0xec)],_0x18c393['id']);return _0x7db14e;}['onQueueActive'](_0x3191f6){}[_0x4cec28(0x11a)](_0x1bbb21){var _0x11d2c9=_0x4cec28;console[_0x11d2c9(0x109)](_0x11d2c9(0x106),_0x1bbb21);}[_0x4cec28(0x120)](_0x46e454,_0x3199e5){var _0x56a978=_0x4cec28;console[_0x56a978(0x109)](_0x56a978(0x125),_0x46e454['id'],_0x3199e5);}[_0x4cec28(0x117)](_0x7eaa7d,_0x3dee2c){}[_0x4cec28(0xef)](_0x476492,_0x4967e6){var _0x4b0c2d=_0x4cec28;common_1[_0x4b0c2d(0xf2)]['error']('Queue\x20failed:\x20'+_0x4967e6[_0x4b0c2d(0x113)]+_0x4b0c2d(0xff)+_0x476492['id'],'QueueProcessor'),this[_0x4b0c2d(0xf4)][_0x4b0c2d(0xfb)](_0x476492['data']);}[_0x4cec28(0x119)](){var _0x33299a=_0x4cec28;console[_0x33299a(0x109)]('队列暂停的时候调用');}[_0x4cec28(0xf3)](){var _0x3debb3=_0x4cec28;console['log'](_0x3debb3(0x115));}[_0x4cec28(0x105)](_0x40295c,_0x4369fb){var _0x7c6d98=_0x4cec28;common_1['Logger'][_0x7c6d98(0x109)](_0x7c6d98(0x103)+_0x40295c['length']+_0x7c6d98(0xfd)+_0x4369fb+_0x7c6d98(0x100),'QueueProcessor');}[_0x4cec28(0xf0)](){}};__decorate([(0x0,bull_1[_0x4cec28(0x112)])({'name':_0x4cec28(0xf9),'concurrency':process[_0x4cec28(0x122)]['CONCURRENCY']?+process[_0x4cec28(0x122)]['CONCURRENCY']:0x3}),__metadata(_0x4cec28(0x10a),Function),__metadata(_0x4cec28(0x123),[Object]),__metadata(_0x4cec28(0x102),Promise)],QueueProcessor[_0x4cec28(0x111)],_0x4cec28(0x114),null),__decorate([(0x0,bull_1[_0x4cec28(0x108)])(),__metadata('design:type',Function),__metadata(_0x4cec28(0x123),[Object]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor[_0x4cec28(0x111)],_0x4cec28(0xf6),null),__decorate([(0x0,bull_1['OnQueueError'])(),__metadata(_0x4cec28(0x10a),Function),__metadata(_0x4cec28(0x123),[Error]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor[_0x4cec28(0x111)],'onQueueError',null),__decorate([(0x0,bull_1[_0x4cec28(0xfe)])(),__metadata(_0x4cec28(0x10a),Function),__metadata(_0x4cec28(0x123),[Object,Number]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor[_0x4cec28(0x111)],'onQueueProgress',null),__decorate([(0x0,bull_1[_0x4cec28(0xe7)])(),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor['prototype'],_0x4cec28(0x117),null),__decorate([(0x0,bull_1[_0x4cec28(0xfc)])(),__metadata(_0x4cec28(0x10a),Function),__metadata('design:paramtypes',[Object,Error]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x4cec28(0x111)],_0x4cec28(0xef),null),__decorate([(0x0,bull_1[_0x4cec28(0xee)])(),__metadata(_0x4cec28(0x10a),Function),__metadata(_0x4cec28(0x123),[]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor[_0x4cec28(0x111)],_0x4cec28(0x119),null),__decorate([(0x0,bull_1[_0x4cec28(0x10b)])(),__metadata(_0x4cec28(0x10a),Function),__metadata(_0x4cec28(0x123),[]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor[_0x4cec28(0x111)],_0x4cec28(0xf3),null),__decorate([(0x0,bull_1['OnQueueCleaned'])(),__metadata('design:type',Function),__metadata(_0x4cec28(0x123),[Array,String]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor['prototype'],_0x4cec28(0x105),null),__decorate([(0x0,bull_1[_0x4cec28(0xe9)])(),__metadata(_0x4cec28(0x10a),Function),__metadata('design:paramtypes',[]),__metadata(_0x4cec28(0x102),void 0x0)],QueueProcessor[_0x4cec28(0x111)],_0x4cec28(0xf0),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1['Processor'])(_0x4cec28(0x11e)),__metadata('design:paramtypes',[midjourney_service_1['MidjourneyService']])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;