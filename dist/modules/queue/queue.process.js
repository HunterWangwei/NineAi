'use strict';function _0x44cc(_0x24f20a,_0x5d52e9){var _0x27a2d1=_0x27a2();return _0x44cc=function(_0x44cc03,_0x567202){_0x44cc03=_0x44cc03-0x186;var _0x227d3f=_0x27a2d1[_0x44cc03];return _0x227d3f;},_0x44cc(_0x24f20a,_0x5d52e9);}var _0x3f2544=_0x44cc;function _0x27a2(){var _0x136d32=['onQueueCleaned','log','metadata','onQueueProgress','mjDraw','handleJob','13993onNTaj','OnQueueActive','defineProperty',':\x20绘画失败\x20','OnQueueCleaned','onQueueCompleted','267586mEPepd','MidjourneyService','length','design:paramtypes','OnQueueDrained','\x20were\x20cleaned.','@nestjs/common','Queue\x20failed:\x20','Process','OnQueueResumed','88280TgMFyy','\x20jobs\x20of\x20type\x20','6BGRgYl','208389LLxHVT','object','OnQueuePaused','name','env','队列发生错误','midjourneyService','prototype','300100WXJgkE','Processor','design:type','CONCURRENCY','onQueueError','message','QueueProcessor','function','design:returntype','OnQueueProgress','drawFailed','decorate','队列恢复的时候调用','Queue\x20cleaned:\x20','onQueuePaused','MJDRAW','__decorate','__esModule','Logger','队列暂停的时候调用','onQueueDrained','9XsJIPx','onQueueResumed','onQueueFailed','14702GkGXTE','140gnyknK','onQueueActive','getOwnPropertyDescriptor','draw','OnQueueFailed','data','246nfLiTc','队列任务的一个回调用于通知当前进度','145592ckAFXm'];_0x27a2=function(){return _0x136d32;};return _0x27a2();}(function(_0x423d5a,_0x3bc10b){var _0x4b7233=_0x44cc,_0x1ca7eb=_0x423d5a();while(!![]){try{var _0x3fc95d=-parseInt(_0x4b7233(0x18d))/0x1+-parseInt(_0x4b7233(0x1af))/0x2*(parseInt(_0x4b7233(0x1b0))/0x3)+-parseInt(_0x4b7233(0x196))/0x4+-parseInt(_0x4b7233(0x1b8))/0x5+parseInt(_0x4b7233(0x194))/0x6*(parseInt(_0x4b7233(0x19d))/0x7)+-parseInt(_0x4b7233(0x1ad))/0x8*(-parseInt(_0x4b7233(0x18a))/0x9)+parseInt(_0x4b7233(0x18e))/0xa*(parseInt(_0x4b7233(0x1a3))/0xb);if(_0x3fc95d===_0x3bc10b)break;else _0x1ca7eb['push'](_0x1ca7eb['shift']());}catch(_0x53e065){_0x1ca7eb['push'](_0x1ca7eb['shift']());}}}(_0x27a2,0x1bd81));var __decorate=this&&this[_0x3f2544(0x1c8)]||function(_0x2da220,_0x48e952,_0x1d33aa,_0x401371){var _0x1af788=_0x3f2544,_0x125b71=arguments[_0x1af788(0x1a5)],_0x48e2a7=_0x125b71<0x3?_0x48e952:_0x401371===null?_0x401371=Object[_0x1af788(0x190)](_0x48e952,_0x1d33aa):_0x401371,_0x488e8f;if(typeof Reflect==='object'&&typeof Reflect[_0x1af788(0x1c3)]===_0x1af788(0x1bf))_0x48e2a7=Reflect[_0x1af788(0x1c3)](_0x2da220,_0x48e952,_0x1d33aa,_0x401371);else{for(var _0x4a8deb=_0x2da220[_0x1af788(0x1a5)]-0x1;_0x4a8deb>=0x0;_0x4a8deb--)if(_0x488e8f=_0x2da220[_0x4a8deb])_0x48e2a7=(_0x125b71<0x3?_0x488e8f(_0x48e2a7):_0x125b71>0x3?_0x488e8f(_0x48e952,_0x1d33aa,_0x48e2a7):_0x488e8f(_0x48e952,_0x1d33aa))||_0x48e2a7;}return _0x125b71>0x3&&_0x48e2a7&&Object[_0x1af788(0x19f)](_0x48e952,_0x1d33aa,_0x48e2a7),_0x48e2a7;},__metadata=this&&this['__metadata']||function(_0xf7c894,_0x525603){var _0x113ad1=_0x3f2544;if(typeof Reflect===_0x113ad1(0x1b1)&&typeof Reflect[_0x113ad1(0x199)]===_0x113ad1(0x1bf))return Reflect['metadata'](_0xf7c894,_0x525603);},QueueProcessor_1;Object['defineProperty'](exports,_0x3f2544(0x186),{'value':!![]}),exports[_0x3f2544(0x1be)]=void 0x0;const bull_1=require('@nestjs/bull'),common_1=require(_0x3f2544(0x1a9)),midjourney_service_1=require('../midjourney/midjourney.service');let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x39c59c){var _0x28a98a=_0x3f2544;this[_0x28a98a(0x1b6)]=_0x39c59c,this['logger']=new common_1[(_0x28a98a(0x187))](QueueProcessor_1[_0x28a98a(0x1b3)]);}async[_0x3f2544(0x19c)](_0x48b76d){var _0x1c3c34=_0x3f2544;const _0x4ddb7a=await this[_0x1c3c34(0x1b6)][_0x1c3c34(0x191)](_0x48b76d['data'],_0x48b76d['id']);return _0x4ddb7a;}[_0x3f2544(0x18f)](_0x1cd94d){}[_0x3f2544(0x1bc)](_0x361298){var _0x18c270=_0x3f2544;console[_0x18c270(0x198)](_0x18c270(0x1b5),_0x361298);}['onQueueProgress'](_0x35859e,_0x43d817){var _0x2ef5fe=_0x3f2544;console[_0x2ef5fe(0x198)](_0x2ef5fe(0x195),_0x35859e['id'],_0x43d817);}[_0x3f2544(0x1a2)](_0x1555d9,_0x3cf70a){}['onQueueFailed'](_0x3dd822,_0x233240){var _0x309a88=_0x3f2544;common_1[_0x309a88(0x187)]['error'](_0x309a88(0x1aa)+_0x233240[_0x309a88(0x1bd)]+_0x309a88(0x1a0)+_0x3dd822['id'],_0x309a88(0x1be)),this[_0x309a88(0x1b6)][_0x309a88(0x1c2)](_0x3dd822[_0x309a88(0x193)]);}[_0x3f2544(0x1c6)](){var _0x443e58=_0x3f2544;console[_0x443e58(0x198)](_0x443e58(0x188));}[_0x3f2544(0x18b)](){var _0x3193b6=_0x3f2544;console[_0x3193b6(0x198)](_0x3193b6(0x1c4));}[_0x3f2544(0x197)](_0x2cbd90,_0x34a818){var _0x2bde01=_0x3f2544;common_1[_0x2bde01(0x187)][_0x2bde01(0x198)](_0x2bde01(0x1c5)+_0x2cbd90[_0x2bde01(0x1a5)]+_0x2bde01(0x1ae)+_0x34a818+_0x2bde01(0x1a8),_0x2bde01(0x1be));}[_0x3f2544(0x189)](){}};__decorate([(0x0,bull_1[_0x3f2544(0x1ab)])({'name':_0x3f2544(0x19b),'concurrency':process[_0x3f2544(0x1b4)][_0x3f2544(0x1bb)]?+process[_0x3f2544(0x1b4)][_0x3f2544(0x1bb)]:0x3}),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[Object]),__metadata(_0x3f2544(0x1c0),Promise)],QueueProcessor[_0x3f2544(0x1b7)],'handleJob',null),__decorate([(0x0,bull_1[_0x3f2544(0x19e)])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[Object]),__metadata(_0x3f2544(0x1c0),void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x18f),null),__decorate([(0x0,bull_1['OnQueueError'])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[Error]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x1bc),null),__decorate([(0x0,bull_1[_0x3f2544(0x1c1)])(),__metadata('design:type',Function),__metadata(_0x3f2544(0x1a6),[Object,Number]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x19a),null),__decorate([(0x0,bull_1['OnQueueCompleted'])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[Object,Object]),__metadata('design:returntype',void 0x0)],QueueProcessor['prototype'],_0x3f2544(0x1a2),null),__decorate([(0x0,bull_1[_0x3f2544(0x192)])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[Object,Error]),__metadata(_0x3f2544(0x1c0),void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x18c),null),__decorate([(0x0,bull_1[_0x3f2544(0x1b2)])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x1c6),null),__decorate([(0x0,bull_1[_0x3f2544(0x1ac)])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[]),__metadata(_0x3f2544(0x1c0),void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],'onQueueResumed',null),__decorate([(0x0,bull_1[_0x3f2544(0x1a1)])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[Array,String]),__metadata(_0x3f2544(0x1c0),void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x197),null),__decorate([(0x0,bull_1[_0x3f2544(0x1a7)])(),__metadata(_0x3f2544(0x1ba),Function),__metadata(_0x3f2544(0x1a6),[]),__metadata(_0x3f2544(0x1c0),void 0x0)],QueueProcessor[_0x3f2544(0x1b7)],_0x3f2544(0x189),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x3f2544(0x1b9)])(_0x3f2544(0x1c7)),__metadata('design:paramtypes',[midjourney_service_1[_0x3f2544(0x1a4)]])],QueueProcessor),exports['QueueProcessor']=QueueProcessor;