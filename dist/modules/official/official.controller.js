'use strict';const _0x2d5a4a=_0x4929;(function(_0x4066bf,_0x41408e){const _0x38ea48=_0x4929,_0x4f8fd5=_0x4066bf();while(!![]){try{const _0x354f89=parseInt(_0x38ea48(0x78))/0x1*(parseInt(_0x38ea48(0x73))/0x2)+-parseInt(_0x38ea48(0x70))/0x3+parseInt(_0x38ea48(0xc8))/0x4*(parseInt(_0x38ea48(0x6d))/0x5)+-parseInt(_0x38ea48(0xaf))/0x6*(parseInt(_0x38ea48(0xa6))/0x7)+parseInt(_0x38ea48(0xb5))/0x8*(parseInt(_0x38ea48(0xa9))/0x9)+-parseInt(_0x38ea48(0xc5))/0xa+parseInt(_0x38ea48(0x95))/0xb*(parseInt(_0x38ea48(0xa4))/0xc);if(_0x354f89===_0x41408e)break;else _0x4f8fd5['push'](_0x4f8fd5['shift']());}catch(_0xd142ef){_0x4f8fd5['push'](_0x4f8fd5['shift']());}}}(_0x20dc,0x5ae47));var __decorate=this&&this[_0x2d5a4a(0x7c)]||function(_0x102fa3,_0x56a0d7,_0x3d9d6d,_0x46c0fc){const _0x97ec7f=_0x2d5a4a;var _0x3dd89c=arguments[_0x97ec7f(0x77)],_0x101c98=_0x3dd89c<0x3?_0x56a0d7:_0x46c0fc===null?_0x46c0fc=Object['getOwnPropertyDescriptor'](_0x56a0d7,_0x3d9d6d):_0x46c0fc,_0xbcafa0;if(typeof Reflect===_0x97ec7f(0x87)&&typeof Reflect['decorate']===_0x97ec7f(0xc7))_0x101c98=Reflect[_0x97ec7f(0xbc)](_0x102fa3,_0x56a0d7,_0x3d9d6d,_0x46c0fc);else{for(var _0x27e95e=_0x102fa3['length']-0x1;_0x27e95e>=0x0;_0x27e95e--)if(_0xbcafa0=_0x102fa3[_0x27e95e])_0x101c98=(_0x3dd89c<0x3?_0xbcafa0(_0x101c98):_0x3dd89c>0x3?_0xbcafa0(_0x56a0d7,_0x3d9d6d,_0x101c98):_0xbcafa0(_0x56a0d7,_0x3d9d6d))||_0x101c98;}return _0x3dd89c>0x3&&_0x101c98&&Object['defineProperty'](_0x56a0d7,_0x3d9d6d,_0x101c98),_0x101c98;},__metadata=this&&this[_0x2d5a4a(0x7a)]||function(_0x9ce2e1,_0xc7fc66){const _0x50fbe7=_0x2d5a4a;if(typeof Reflect===_0x50fbe7(0x87)&&typeof Reflect[_0x50fbe7(0xc1)]===_0x50fbe7(0xc7))return Reflect[_0x50fbe7(0xc1)](_0x9ce2e1,_0xc7fc66);},__param=this&&this[_0x2d5a4a(0xa0)]||function(_0x2382da,_0x5aa2d8){return function(_0x28c817,_0x30e690){_0x5aa2d8(_0x28c817,_0x30e690,_0x2382da);};};Object[_0x2d5a4a(0x8b)](exports,'__esModule',{'value':!![]}),exports[_0x2d5a4a(0xcc)]=void 0x0;function _0x4929(_0x16afc2,_0x2c4855){const _0x20dc96=_0x20dc();return _0x4929=function(_0x4929a6,_0x43450c){_0x4929a6=_0x4929a6-0x6c;let _0x4ed5dd=_0x20dc96[_0x4929a6];return _0x4ed5dd;},_0x4929(_0x16afc2,_0x2c4855);}function _0x20dc(){const _0x41360a=['split','function','15652ltvAnP','fromusername','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','official','OfficialController','OfficialService','echostr','send','design:returntype','getQRSceneStrByBind','835uGhSNf','./official.service','status','1494774piAoZc','bindWxBySceneStr','Req','96wZcsMp','获取登录二维码sceneStr','getRedirectUrl','getQRCode','length','15072OqhBrf','公众号通知接口POST','__metadata','design:paramtypes','__decorate','sceneStr','ApiOperation','SCAN','design:type','aotoPlay','./dto/getQrSceneStr.dto','env','getQRSceneStr','获取注册配置','./dto/getQrCode.dto','object','Body','officialSubscribeText','includes','defineProperty','qrscene_','verify','JwtAuthGuard','genXmlMsg','prototype','获取绑定二维码的sceneStr','getQRCodeTicket','subscribe','扫码登录轮询查询','83270CGODYA','VIEW','msgtype','url','getJsapiTicket','../../common/auth/jwtAuth.guard','ISDEV','genXmlMsgByConfig','CLICK','eventkey','sceneStr:\x20','__param','@nestjs/common','event','Get','372OvaWiv','officialScanLoginText','1351QEHuyv','GetQrSceneStrDto','unsubscribe','9sVoKaM','log','timestamp','officialBindAccountText','notifyPost','code','19176rkJFlA','officialService','Res','获取登录跳转地址','content','notify','4138808bGzvHF','text','get\x20通知>>>','扫码绑定轮询查询','Controller','scanBindWx','GetQrCodeDto','decorate','公众号静默登录','scan','loginByCode','Query','metadata','Post','TRUE','loginBySceneStr','6415670obQUbW'];_0x20dc=function(){return _0x41360a;};return _0x20dc();}const common_1=require(_0x2d5a4a(0xa1)),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x2d5a4a(0x9a)),official_service_1=require(_0x2d5a4a(0x6e)),getQrCode_dto_1=require(_0x2d5a4a(0x86)),getQrSceneStr_dto_1=require(_0x2d5a4a(0x82));let OfficialController=class OfficialController{constructor(_0x26907c){const _0x5866b3=_0x2d5a4a;this[_0x5866b3(0xb0)]=_0x26907c;}async[_0x2d5a4a(0xb4)](_0x5adcee,_0x300ee3,_0xb3260f){const _0x10cb80=_0x2d5a4a;console[_0x10cb80(0xaa)](_0x10cb80(0xb7),_0x300ee3,_0xb3260f);const _0x5503bc=await this[_0x10cb80(0xb0)][_0x10cb80(0x8d)](_0x300ee3['signature'],_0x300ee3['nonce'],_0x300ee3[_0x10cb80(0xab)]);return _0x5503bc?_0x300ee3[_0x10cb80(0xce)]:'';}async[_0x2d5a4a(0xad)](_0x4a06b0,_0x3d9f2d,_0x35d16c,_0x1d50bb){const _0x19e94a=_0x2d5a4a,{xml:_0x50326e}=_0x35d16c;console[_0x19e94a(0xaa)]('xml:\x20',_0x50326e);if(_0x50326e[_0x19e94a(0x97)][0x0]=='event'){if(_0x50326e[_0x19e94a(0xa2)][0x0]==_0x19e94a(0x96)||_0x50326e['event'][0x0]==_0x19e94a(0x9d))return _0x1d50bb['status'](0xc8)['send']('');if(_0x50326e['event'][0x0]==_0x19e94a(0x7f)){console['log']('扫码');const _0x3f0c07=_0x50326e[_0x19e94a(0x9e)][0x0];if(_0x3f0c07[_0x19e94a(0x8a)]('/')){this[_0x19e94a(0xb0)][_0x19e94a(0xba)](_0x50326e[_0x19e94a(0xc9)][0x0],_0x3f0c07);const _0x553c5f=await this[_0x19e94a(0xb0)][_0x19e94a(0x9c)](_0x50326e,_0x19e94a(0xac));return _0x1d50bb['status'](0xc8)['send'](_0x553c5f);}this[_0x19e94a(0xb0)][_0x19e94a(0xbe)](_0x50326e['fromusername'][0x0],_0x3f0c07);const _0x13e6d4=await this[_0x19e94a(0xb0)][_0x19e94a(0x9c)](_0x50326e,_0x19e94a(0xa5));return _0x1d50bb[_0x19e94a(0x6f)](0xc8)[_0x19e94a(0xcf)](_0x13e6d4);}if(_0x50326e[_0x19e94a(0xa2)][0x0]==_0x19e94a(0x93)){console[_0x19e94a(0xaa)]('订阅',_0x50326e[_0x19e94a(0x9e)][0x0]);const _0xc976ee=_0x50326e['eventkey'][0x0][_0x19e94a(0xc6)](_0x19e94a(0x8c))[0x1];console['log'](_0x19e94a(0x9f),_0xc976ee);if(!_0xc976ee){const _0x57d1c5=await this[_0x19e94a(0xb0)][_0x19e94a(0x9c)](_0x50326e,_0x19e94a(0x89));return _0x1d50bb[_0x19e94a(0x6f)](0xc8)[_0x19e94a(0xcf)](_0x57d1c5);}if(_0xc976ee[_0x19e94a(0x8a)]('/')){this['officialService'][_0x19e94a(0xba)](_0x50326e[_0x19e94a(0xc9)][0x0],_0xc976ee);const _0x236d40=await this[_0x19e94a(0xb0)][_0x19e94a(0x9c)](_0x50326e,'officialBindAccountText');return _0x1d50bb[_0x19e94a(0x6f)](0xc8)['send'](_0x236d40);}this[_0x19e94a(0xb0)][_0x19e94a(0xbe)](_0x50326e[_0x19e94a(0xc9)][0x0],_0xc976ee);const _0x1bc5c9=await this[_0x19e94a(0xb0)][_0x19e94a(0x9c)](_0x50326e,_0x19e94a(0x89));return _0x1d50bb[_0x19e94a(0x6f)](0xc8)[_0x19e94a(0xcf)](_0x1bc5c9);}if(_0x50326e[_0x19e94a(0xa2)][0x0]==_0x19e94a(0xa8))return _0x1d50bb[_0x19e94a(0x6f)](0xc8)[_0x19e94a(0xcf)]('');}if(_0x50326e[_0x19e94a(0x97)][0x0]==_0x19e94a(0xb6)){const _0x1a0e7f=await this['officialService'][_0x19e94a(0x81)](_0x50326e[_0x19e94a(0xb3)][0x0]),_0x3187f3=await this[_0x19e94a(0xb0)][_0x19e94a(0x8f)](_0x50326e,_0x1a0e7f);return _0x1d50bb[_0x19e94a(0x6f)](0xc8)[_0x19e94a(0xcf)](_0x3187f3);}return'success';}async['getQRSceneStr'](_0x425d02){const _0x299d13=_0x2d5a4a;return this[_0x299d13(0xb0)][_0x299d13(0x84)](_0x425d02);}async[_0x2d5a4a(0x6c)](_0x3f86f1){const _0x334b88=_0x2d5a4a;return this[_0x334b88(0xb0)][_0x334b88(0x6c)](_0x3f86f1);}async[_0x2d5a4a(0x76)](_0x305a34){const _0x3224a1=_0x2d5a4a;if(process[_0x3224a1(0x83)][_0x3224a1(0x9b)]===_0x3224a1(0xc3))return'';const _0x4e9422=await this[_0x3224a1(0xb0)][_0x3224a1(0x92)](_0x305a34[_0x3224a1(0x7d)]);return _0x3224a1(0xca)+encodeURIComponent(_0x4e9422);}async[_0x2d5a4a(0xc4)](_0x9ae943,_0x56ac0c){const _0xde1eac=_0x2d5a4a;return this[_0xde1eac(0xb0)][_0xde1eac(0xc4)](_0x9ae943,_0x56ac0c['sceneStr']);}async[_0x2d5a4a(0x71)](_0x3b78b4,_0x11c543){const _0x154d40=_0x2d5a4a;return this[_0x154d40(0xb0)][_0x154d40(0x71)](_0x3b78b4,_0x11c543[_0x154d40(0x7d)]);}async[_0x2d5a4a(0x75)](_0x2a568d){const _0x49584f=_0x2d5a4a;return this[_0x49584f(0xb0)][_0x49584f(0x75)](_0x2a568d[_0x49584f(0x98)]);}async[_0x2d5a4a(0x99)](_0x56386e){const _0x3d367c=_0x2d5a4a;return this[_0x3d367c(0xb0)][_0x3d367c(0x99)](_0x56386e[_0x3d367c(0x98)]);}async[_0x2d5a4a(0xbf)](_0x5464ae,_0x15290c){const _0x402614=_0x2d5a4a;return this[_0x402614(0xb0)]['loginByCode'](_0x5464ae,_0x15290c[_0x402614(0xae)]);}};__decorate([(0x0,common_1[_0x2d5a4a(0xa3)])(_0x2d5a4a(0xb4)),(0x0,swagger_1['ApiOperation'])({'summary':'公众号通知接口GET'}),__param(0x0,(0x0,common_1[_0x2d5a4a(0x72)])()),__param(0x1,(0x0,common_1[_0x2d5a4a(0xc0)])()),__param(0x2,(0x0,common_1[_0x2d5a4a(0x88)])()),__metadata(_0x2d5a4a(0x80),Function),__metadata(_0x2d5a4a(0x7b),[Object,Object,Object]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController[_0x2d5a4a(0x90)],'notify',null),__decorate([(0x0,common_1[_0x2d5a4a(0xc2)])(_0x2d5a4a(0xb4)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0x79)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x2d5a4a(0xc0)])()),__param(0x2,(0x0,common_1[_0x2d5a4a(0x88)])()),__param(0x3,(0x0,common_1[_0x2d5a4a(0xb1)])()),__metadata(_0x2d5a4a(0x80),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController['prototype'],'notifyPost',null),__decorate([(0x0,common_1[_0x2d5a4a(0xc2)])(_0x2d5a4a(0x84)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0x74)}),__param(0x0,(0x0,common_1[_0x2d5a4a(0x88)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1[_0x2d5a4a(0xa7)]]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController['prototype'],_0x2d5a4a(0x84),null),__decorate([(0x0,common_1['Post'])(_0x2d5a4a(0x6c)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0x91)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2d5a4a(0x8e)]),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x2d5a4a(0x80),Function),__metadata(_0x2d5a4a(0x7b),[Object]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController['prototype'],_0x2d5a4a(0x6c),null),__decorate([(0x0,common_1[_0x2d5a4a(0xa3)])(_0x2d5a4a(0x76)),(0x0,swagger_1['ApiOperation'])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1['Query'])()),__metadata('design:type',Function),__metadata(_0x2d5a4a(0x7b),[getQrCode_dto_1[_0x2d5a4a(0xbb)]]),__metadata('design:returntype',Promise)],OfficialController[_0x2d5a4a(0x90)],_0x2d5a4a(0x76),null),__decorate([(0x0,common_1[_0x2d5a4a(0xc2)])('loginBySceneStr'),(0x0,swagger_1['ApiOperation'])({'summary':_0x2d5a4a(0x94)}),__param(0x0,(0x0,common_1[_0x2d5a4a(0x72)])()),__param(0x1,(0x0,common_1[_0x2d5a4a(0x88)])()),__metadata(_0x2d5a4a(0x80),Function),__metadata(_0x2d5a4a(0x7b),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController[_0x2d5a4a(0x90)],_0x2d5a4a(0xc4),null),__decorate([(0x0,common_1[_0x2d5a4a(0xc2)])(_0x2d5a4a(0x71)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0xb8)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2d5a4a(0x8e)]),__param(0x0,(0x0,common_1[_0x2d5a4a(0x72)])()),__param(0x1,(0x0,common_1[_0x2d5a4a(0x88)])()),__metadata(_0x2d5a4a(0x80),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x2d5a4a(0xbb)]]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController['prototype'],'bindWxBySceneStr',null),__decorate([(0x0,common_1['Post'])(_0x2d5a4a(0x75)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0xb2)}),__param(0x0,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController[_0x2d5a4a(0x90)],_0x2d5a4a(0x75),null),__decorate([(0x0,common_1[_0x2d5a4a(0xc2)])(_0x2d5a4a(0x99)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0x85)}),__param(0x0,(0x0,common_1[_0x2d5a4a(0x88)])()),__metadata(_0x2d5a4a(0x80),Function),__metadata(_0x2d5a4a(0x7b),[Object]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController[_0x2d5a4a(0x90)],_0x2d5a4a(0x99),null),__decorate([(0x0,common_1['Post'])(_0x2d5a4a(0xbf)),(0x0,swagger_1[_0x2d5a4a(0x7e)])({'summary':_0x2d5a4a(0xbd)}),__param(0x0,(0x0,common_1[_0x2d5a4a(0x72)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x2d5a4a(0x80),Function),__metadata(_0x2d5a4a(0x7b),[Object,Object]),__metadata(_0x2d5a4a(0xd0),Promise)],OfficialController[_0x2d5a4a(0x90)],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1['ApiTags'])(_0x2d5a4a(0xcb)),(0x0,common_1[_0x2d5a4a(0xb9)])(_0x2d5a4a(0xcb)),__metadata(_0x2d5a4a(0x7b),[official_service_1[_0x2d5a4a(0xcd)]])],OfficialController),exports[_0x2d5a4a(0xcc)]=OfficialController;