'use strict';const _0x4649d5=_0x3004;function _0x3376(){const _0x5bd7fb=['qrscene_','official','officialScanLoginText','eventkey','scanBindWx','getQRSceneStr','design:type','subscribe','status','officialSubscribeText','@nestjs/common','prototype','decorate','sceneStr:\x20','__param','274729fHjmBk','design:returntype','success','获取注册配置','object','公众号静默登录','fromusername','Query','Body','getRedirectUrl','GetQrCodeDto','1tTMWqa','unsubscribe','5ftHsHc','3AfwTLk','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','ISDEV','xml:\x20','verify','notifyPost','TRUE','log','event','Post','./dto/getQrSceneStr.dto','JwtAuthGuard','2817832wLRVCL','VIEW','@nestjs/swagger','Get','UseGuards','Controller','getQRCodeTicket','text','获取登录跳转地址','获取登录二维码sceneStr','Res','officialBindAccountText','length','100706wZSfVe','bindWxBySceneStr','genXmlMsg','signature','7293536uJyUlL','defineProperty','env','notify','getJsapiTicket','aotoPlay','metadata','扫码登录轮询查询','3833124wxIXWv','sceneStr','echostr','CLICK','nonce','9770571rNITiL','officialService','ApiTags','timestamp','./official.service','14117980ZOBOxp','loginByCode','genXmlMsgByConfig','../../common/auth/jwtAuth.guard','获取二维码','getQRCode','ApiOperation','design:paramtypes','OfficialController','scan','Req','getQRSceneStrByBind','send','get\x20通知>>>','获取绑定二维码的sceneStr','loginBySceneStr','url'];_0x3376=function(){return _0x5bd7fb;};return _0x3376();}(function(_0x4c583f,_0x984ef5){const _0x20a70b=_0x3004,_0x492d57=_0x4c583f();while(!![]){try{const _0x4c9035=-parseInt(_0x20a70b(0x11d))/0x1*(-parseInt(_0x20a70b(0xdc))/0x2)+-parseInt(_0x20a70b(0x120))/0x3*(parseInt(_0x20a70b(0xcf))/0x4)+parseInt(_0x20a70b(0x11f))/0x5*(parseInt(_0x20a70b(0xe8))/0x6)+parseInt(_0x20a70b(0x112))/0x7+parseInt(_0x20a70b(0xe0))/0x8+parseInt(_0x20a70b(0xed))/0x9+-parseInt(_0x20a70b(0xf2))/0xa;if(_0x4c9035===_0x984ef5)break;else _0x492d57['push'](_0x492d57['shift']());}catch(_0x1820fa){_0x492d57['push'](_0x492d57['shift']());}}}(_0x3376,0x94ce5));function _0x3004(_0x3b75cf,_0x317335){const _0x337664=_0x3376();return _0x3004=function(_0x300494,_0x33fc07){_0x300494=_0x300494-0xcd;let _0x4863e8=_0x337664[_0x300494];return _0x4863e8;},_0x3004(_0x3b75cf,_0x317335);}var __decorate=this&&this['__decorate']||function(_0x55ddc5,_0x2040f3,_0x478692,_0x382d77){const _0x2ef9dc=_0x3004;var _0x5eeb0e=arguments[_0x2ef9dc(0xdb)],_0x376c4a=_0x5eeb0e<0x3?_0x2040f3:_0x382d77===null?_0x382d77=Object['getOwnPropertyDescriptor'](_0x2040f3,_0x478692):_0x382d77,_0x377718;if(typeof Reflect===_0x2ef9dc(0x116)&&typeof Reflect[_0x2ef9dc(0x10f)]==='function')_0x376c4a=Reflect['decorate'](_0x55ddc5,_0x2040f3,_0x478692,_0x382d77);else{for(var _0x312ac6=_0x55ddc5['length']-0x1;_0x312ac6>=0x0;_0x312ac6--)if(_0x377718=_0x55ddc5[_0x312ac6])_0x376c4a=(_0x5eeb0e<0x3?_0x377718(_0x376c4a):_0x5eeb0e>0x3?_0x377718(_0x2040f3,_0x478692,_0x376c4a):_0x377718(_0x2040f3,_0x478692))||_0x376c4a;}return _0x5eeb0e>0x3&&_0x376c4a&&Object[_0x2ef9dc(0xe1)](_0x2040f3,_0x478692,_0x376c4a),_0x376c4a;},__metadata=this&&this['__metadata']||function(_0x58d9f3,_0xaf1bd5){const _0x1934c4=_0x3004;if(typeof Reflect===_0x1934c4(0x116)&&typeof Reflect[_0x1934c4(0xe6)]==='function')return Reflect['metadata'](_0x58d9f3,_0xaf1bd5);},__param=this&&this[_0x4649d5(0x111)]||function(_0xe1dcb9,_0x336ef5){return function(_0x5172a9,_0x5e6350){_0x336ef5(_0x5172a9,_0x5e6350,_0xe1dcb9);};};Object[_0x4649d5(0xe1)](exports,'__esModule',{'value':!![]}),exports[_0x4649d5(0xfa)]=void 0x0;const common_1=require(_0x4649d5(0x10d)),swagger_1=require(_0x4649d5(0xd1)),jwtAuth_guard_1=require(_0x4649d5(0xf5)),official_service_1=require(_0x4649d5(0xf1)),getQrCode_dto_1=require('./dto/getQrCode.dto'),getQrSceneStr_dto_1=require(_0x4649d5(0xcd));let OfficialController=class OfficialController{constructor(_0x189126){const _0x23b347=_0x4649d5;this[_0x23b347(0xee)]=_0x189126;}async['notify'](_0x18a180,_0x254cca,_0x2fd8b1){const _0x374fd3=_0x4649d5;console[_0x374fd3(0x127)](_0x374fd3(0xff),_0x254cca,_0x2fd8b1);const _0x24b688=await this['officialService'][_0x374fd3(0x124)](_0x254cca[_0x374fd3(0xdf)],_0x254cca[_0x374fd3(0xec)],_0x254cca[_0x374fd3(0xf0)]);return _0x24b688?_0x254cca[_0x374fd3(0xea)]:'';}async[_0x4649d5(0x125)](_0x5e311f,_0x1c9ea0,_0x9e56e4,_0x46f8fe){const _0x2a4388=_0x4649d5,{xml:_0x3c0088}=_0x9e56e4;console[_0x2a4388(0x127)](_0x2a4388(0x123),_0x3c0088);if(_0x3c0088['msgtype'][0x0]==_0x2a4388(0x128)){if(_0x3c0088[_0x2a4388(0x128)][0x0]==_0x2a4388(0xd0)||_0x3c0088['event'][0x0]==_0x2a4388(0xeb))return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)]('');if(_0x3c0088[_0x2a4388(0x128)][0x0]=='SCAN'){console[_0x2a4388(0x127)]('扫码');const _0x5f75ae=_0x3c0088[_0x2a4388(0x106)][0x0];if(_0x5f75ae['includes']('/')){this[_0x2a4388(0xee)][_0x2a4388(0x107)](_0x3c0088['fromusername'][0x0],_0x5f75ae);const _0x28defe=await this[_0x2a4388(0xee)][_0x2a4388(0xf4)](_0x3c0088,'officialBindAccountText');return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)](_0x28defe);}this['officialService'][_0x2a4388(0xfb)](_0x3c0088['fromusername'][0x0],_0x5f75ae);const _0x590ddf=await this[_0x2a4388(0xee)][_0x2a4388(0xf4)](_0x3c0088,_0x2a4388(0x105));return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)](_0x590ddf);}if(_0x3c0088[_0x2a4388(0x128)][0x0]==_0x2a4388(0x10a)){console['log']('订阅',_0x3c0088[_0x2a4388(0x106)][0x0]);const _0x530194=_0x3c0088['eventkey'][0x0]['split'](_0x2a4388(0x103))[0x1];console['log'](_0x2a4388(0x110),_0x530194);if(!_0x530194){const _0x282a80=await this[_0x2a4388(0xee)][_0x2a4388(0xf4)](_0x3c0088,_0x2a4388(0x10c));return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)](_0x282a80);}if(_0x530194['includes']('/')){this[_0x2a4388(0xee)][_0x2a4388(0x107)](_0x3c0088[_0x2a4388(0x118)][0x0],_0x530194);const _0x23c451=await this[_0x2a4388(0xee)]['genXmlMsgByConfig'](_0x3c0088,_0x2a4388(0xda));return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)](_0x23c451);}this[_0x2a4388(0xee)]['scan'](_0x3c0088['fromusername'][0x0],_0x530194);const _0x244462=await this[_0x2a4388(0xee)][_0x2a4388(0xf4)](_0x3c0088,'officialSubscribeText');return _0x46f8fe['status'](0xc8)[_0x2a4388(0xfe)](_0x244462);}if(_0x3c0088['event'][0x0]==_0x2a4388(0x11e))return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)]('');}if(_0x3c0088['msgtype'][0x0]==_0x2a4388(0xd6)){const _0x629f20=await this[_0x2a4388(0xee)][_0x2a4388(0xe5)](_0x3c0088['content'][0x0]),_0x443121=await this[_0x2a4388(0xee)][_0x2a4388(0xde)](_0x3c0088,_0x629f20);return _0x46f8fe[_0x2a4388(0x10b)](0xc8)[_0x2a4388(0xfe)](_0x443121);}return _0x2a4388(0x114);}async[_0x4649d5(0x108)](_0x9d7c18){const _0x39191b=_0x4649d5;return this[_0x39191b(0xee)][_0x39191b(0x108)](_0x9d7c18);}async[_0x4649d5(0xfd)](_0x1c0d35){const _0x26970c=_0x4649d5;return this[_0x26970c(0xee)][_0x26970c(0xfd)](_0x1c0d35);}async['getQRCode'](_0x500e44){const _0x14ed8c=_0x4649d5;if(process[_0x14ed8c(0xe2)][_0x14ed8c(0x122)]===_0x14ed8c(0x126))return'';const _0x3ac118=await this[_0x14ed8c(0xee)][_0x14ed8c(0xd5)](_0x500e44['sceneStr']);return _0x14ed8c(0x121)+encodeURIComponent(_0x3ac118);}async[_0x4649d5(0x101)](_0x40fc14,_0x40a545){const _0x59878a=_0x4649d5;return this[_0x59878a(0xee)][_0x59878a(0x101)](_0x40fc14,_0x40a545['sceneStr']);}async[_0x4649d5(0xdd)](_0x345b77,_0x51929a){const _0x14a0e6=_0x4649d5;return this['officialService'][_0x14a0e6(0xdd)](_0x345b77,_0x51929a[_0x14a0e6(0xe9)]);}async[_0x4649d5(0x11b)](_0x38357c){const _0x4a187f=_0x4649d5;return this[_0x4a187f(0xee)][_0x4a187f(0x11b)](_0x38357c[_0x4a187f(0x102)]);}async[_0x4649d5(0xe4)](_0x12866b){const _0x5382a0=_0x4649d5;return this[_0x5382a0(0xee)][_0x5382a0(0xe4)](_0x12866b[_0x5382a0(0x102)]);}async[_0x4649d5(0xf3)](_0x26fc2d,_0x48aaa6){const _0x18640b=_0x4649d5;return this[_0x18640b(0xee)]['loginByCode'](_0x26fc2d,_0x48aaa6['code']);}};__decorate([(0x0,common_1[_0x4649d5(0xd2)])(_0x4649d5(0xe3)),(0x0,swagger_1[_0x4649d5(0xf8)])({'summary':'公众号通知接口GET'}),__param(0x0,(0x0,common_1[_0x4649d5(0xfc)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x4649d5(0x11a)])()),__metadata('design:type',Function),__metadata(_0x4649d5(0xf9),[Object,Object,Object]),__metadata(_0x4649d5(0x113),Promise)],OfficialController[_0x4649d5(0x10e)],_0x4649d5(0xe3),null),__decorate([(0x0,common_1[_0x4649d5(0x129)])('notify'),(0x0,swagger_1['ApiOperation'])({'summary':'公众号通知接口POST'}),__param(0x0,(0x0,common_1[_0x4649d5(0xfc)])()),__param(0x1,(0x0,common_1[_0x4649d5(0x119)])()),__param(0x2,(0x0,common_1[_0x4649d5(0x11a)])()),__param(0x3,(0x0,common_1[_0x4649d5(0xd9)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x4649d5(0x10e)],_0x4649d5(0x125),null),__decorate([(0x0,common_1['Post'])(_0x4649d5(0x108)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4649d5(0xd8)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[getQrSceneStr_dto_1['GetQrSceneStrDto']]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x4649d5(0x108),null),__decorate([(0x0,common_1[_0x4649d5(0x129)])(_0x4649d5(0xfd)),(0x0,swagger_1[_0x4649d5(0xf8)])({'summary':_0x4649d5(0x100)}),(0x0,common_1[_0x4649d5(0xd3)])(jwtAuth_guard_1[_0x4649d5(0xce)]),__param(0x0,(0x0,common_1[_0x4649d5(0xfc)])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[Object]),__metadata(_0x4649d5(0x113),Promise)],OfficialController[_0x4649d5(0x10e)],_0x4649d5(0xfd),null),__decorate([(0x0,common_1[_0x4649d5(0xd2)])(_0x4649d5(0xf7)),(0x0,swagger_1[_0x4649d5(0xf8)])({'summary':_0x4649d5(0xf6)}),__param(0x0,(0x0,common_1[_0x4649d5(0x119)])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[getQrCode_dto_1[_0x4649d5(0x11c)]]),__metadata(_0x4649d5(0x113),Promise)],OfficialController[_0x4649d5(0x10e)],_0x4649d5(0xf7),null),__decorate([(0x0,common_1[_0x4649d5(0x129)])(_0x4649d5(0x101)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4649d5(0xe7)}),__param(0x0,(0x0,common_1[_0x4649d5(0xfc)])()),__param(0x1,(0x0,common_1[_0x4649d5(0x11a)])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[Object,getQrCode_dto_1[_0x4649d5(0x11c)]]),__metadata(_0x4649d5(0x113),Promise)],OfficialController[_0x4649d5(0x10e)],_0x4649d5(0x101),null),__decorate([(0x0,common_1[_0x4649d5(0x129)])(_0x4649d5(0xdd)),(0x0,swagger_1[_0x4649d5(0xf8)])({'summary':'扫码绑定轮询查询'}),(0x0,common_1[_0x4649d5(0xd3)])(jwtAuth_guard_1[_0x4649d5(0xce)]),__param(0x0,(0x0,common_1[_0x4649d5(0xfc)])()),__param(0x1,(0x0,common_1[_0x4649d5(0x11a)])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[Object,getQrCode_dto_1[_0x4649d5(0x11c)]]),__metadata(_0x4649d5(0x113),Promise)],OfficialController[_0x4649d5(0x10e)],_0x4649d5(0xdd),null),__decorate([(0x0,common_1[_0x4649d5(0x129)])('getRedirectUrl'),(0x0,swagger_1['ApiOperation'])({'summary':_0x4649d5(0xd7)}),__param(0x0,(0x0,common_1[_0x4649d5(0x11a)])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[Object]),__metadata(_0x4649d5(0x113),Promise)],OfficialController['prototype'],_0x4649d5(0x11b),null),__decorate([(0x0,common_1[_0x4649d5(0x129)])('getJsapiTicket'),(0x0,swagger_1[_0x4649d5(0xf8)])({'summary':_0x4649d5(0x115)}),__param(0x0,(0x0,common_1[_0x4649d5(0x11a)])()),__metadata('design:type',Function),__metadata(_0x4649d5(0xf9),[Object]),__metadata(_0x4649d5(0x113),Promise)],OfficialController[_0x4649d5(0x10e)],'getJsapiTicket',null),__decorate([(0x0,common_1[_0x4649d5(0x129)])(_0x4649d5(0xf3)),(0x0,swagger_1[_0x4649d5(0xf8)])({'summary':_0x4649d5(0x117)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x4649d5(0x11a)])()),__metadata(_0x4649d5(0x109),Function),__metadata(_0x4649d5(0xf9),[Object,Object]),__metadata(_0x4649d5(0x113),Promise)],OfficialController['prototype'],_0x4649d5(0xf3),null),OfficialController=__decorate([(0x0,swagger_1[_0x4649d5(0xef)])(_0x4649d5(0x104)),(0x0,common_1[_0x4649d5(0xd4)])(_0x4649d5(0x104)),__metadata(_0x4649d5(0xf9),[official_service_1['OfficialService']])],OfficialController),exports[_0x4649d5(0xfa)]=OfficialController;