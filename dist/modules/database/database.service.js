'use strict';function _0x3b76(_0x59a7f7,_0x44e28b){const _0x2e6139=_0x2e61();return _0x3b76=function(_0x3b7669,_0x2314f3){_0x3b7669=_0x3b7669-0x117;let _0x16c02a=_0x2e6139[_0x3b7669];return _0x16c02a;},_0x3b76(_0x59a7f7,_0x44e28b);}const _0x35e5fd=_0x3b76;(function(_0x4119de,_0x481de1){const _0x4c1967=_0x3b76,_0x3b7832=_0x4119de();while(!![]){try{const _0x443a48=parseInt(_0x4c1967(0x145))/0x1+parseInt(_0x4c1967(0x14b))/0x2*(-parseInt(_0x4c1967(0x16b))/0x3)+-parseInt(_0x4c1967(0x173))/0x4+-parseInt(_0x4c1967(0x16f))/0x5+parseInt(_0x4c1967(0x141))/0x6*(-parseInt(_0x4c1967(0x147))/0x7)+-parseInt(_0x4c1967(0x175))/0x8*(parseInt(_0x4c1967(0x13a))/0x9)+parseInt(_0x4c1967(0x130))/0xa*(parseInt(_0x4c1967(0x132))/0xb);if(_0x443a48===_0x481de1)break;else _0x3b7832['push'](_0x3b7832['shift']());}catch(_0x4ad710){_0x3b7832['push'](_0x3b7832['shift']());}}}(_0x2e61,0xa73cd));var __decorate=this&&this['__decorate']||function(_0x2f633d,_0x16e05d,_0x598b7f,_0x222f3f){const _0x4fd0a2=_0x3b76;var _0x354040=arguments[_0x4fd0a2(0x11a)],_0xfa52ed=_0x354040<0x3?_0x16e05d:_0x222f3f===null?_0x222f3f=Object[_0x4fd0a2(0x156)](_0x16e05d,_0x598b7f):_0x222f3f,_0x24f0c6;if(typeof Reflect===_0x4fd0a2(0x157)&&typeof Reflect[_0x4fd0a2(0x119)]==='function')_0xfa52ed=Reflect[_0x4fd0a2(0x119)](_0x2f633d,_0x16e05d,_0x598b7f,_0x222f3f);else{for(var _0x19a9a2=_0x2f633d[_0x4fd0a2(0x11a)]-0x1;_0x19a9a2>=0x0;_0x19a9a2--)if(_0x24f0c6=_0x2f633d[_0x19a9a2])_0xfa52ed=(_0x354040<0x3?_0x24f0c6(_0xfa52ed):_0x354040>0x3?_0x24f0c6(_0x16e05d,_0x598b7f,_0xfa52ed):_0x24f0c6(_0x16e05d,_0x598b7f))||_0xfa52ed;}return _0x354040>0x3&&_0xfa52ed&&Object[_0x4fd0a2(0x135)](_0x16e05d,_0x598b7f,_0xfa52ed),_0xfa52ed;},__metadata=this&&this[_0x35e5fd(0x129)]||function(_0x30a4e5,_0x4c83e9){const _0xd02cdd=_0x35e5fd;if(typeof Reflect===_0xd02cdd(0x157)&&typeof Reflect[_0xd02cdd(0x155)]==='function')return Reflect[_0xd02cdd(0x155)](_0x30a4e5,_0x4c83e9);};Object[_0x35e5fd(0x135)](exports,_0x35e5fd(0x11c),{'value':!![]}),exports[_0x35e5fd(0x160)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require('typeorm'),bcrypt=require(_0x35e5fd(0x127));let DatabaseService=class DatabaseService{constructor(_0x1e491c){const _0x1f0e41=_0x35e5fd;this[_0x1f0e41(0x117)]=_0x1e491c;}async['onModuleInit'](){const _0x137ba6=_0x35e5fd;await this[_0x137ba6(0x120)](),await this[_0x137ba6(0x16a)]();}async[_0x35e5fd(0x120)](){const _0x510017=_0x35e5fd,_0x563780=await this[_0x510017(0x117)]['query'](_0x510017(0x140));if(!_0x563780||_0x563780[_0x510017(0x11a)]===0x0){const _0x25853b=bcrypt[_0x510017(0x177)](_0x510017(0x11d),0xa),_0x522cb1=bcrypt['hashSync'](_0x510017(0x12c),0xa),_0x2253dc='default@cooper.com',_0x26a766=_0x510017(0x123),_0x454e49={'username':_0x510017(0x122),'password':_0x25853b,'status':0x1,'email':_0x2253dc,'sex':0x1,'role':_0x510017(0x122)},_0x4c0e7={'username':_0x510017(0x166),'password':_0x522cb1,'status':0x1,'email':_0x26a766,'sex':0x1,'role':_0x510017(0x166)};await this[_0x510017(0x128)](_0x454e49),await this[_0x510017(0x128)](_0x4c0e7);}}async[_0x35e5fd(0x128)](_0x555771){const _0xdbac03=_0x35e5fd;try{const {username:_0x48b603,password:_0xc203a4,status:_0x271ff6,email:_0x6be9ef,role:_0x2bd130}=_0x555771,_0x1551be=await this[_0xdbac03(0x117)][_0xdbac03(0x126)](_0xdbac03(0x139)+_0x48b603+_0xdbac03(0x167)+_0xc203a4+_0xdbac03(0x167)+_0x271ff6+_0xdbac03(0x167)+_0x6be9ef+'\x27,\x20\x27'+_0x2bd130+'\x27)'),_0x42990f=_0x1551be[_0xdbac03(0x14e)],_0x4a8c53=await this[_0xdbac03(0x117)]['query'](_0xdbac03(0x15c)+_0x42990f+_0xdbac03(0x12a));common_1[_0xdbac03(0x14d)][_0xdbac03(0x13e)](_0xdbac03(0x150)+_0x2bd130+'用户成功、用户名为['+_0x48b603+_0xdbac03(0x159)+(_0x48b603==='super'?_0xdbac03(0x11d):'123456')+']\x20==============>\x20请注意查阅','DatabaseService');}catch(_0x2b8d6d){console['log']('error:\x20',_0x2b8d6d);throw new common_1[(_0xdbac03(0x174))](_0xdbac03(0x13d),common_1[_0xdbac03(0x16e)][_0xdbac03(0x142)]);}}async[_0x35e5fd(0x16a)](){const _0x55755f=_0x35e5fd,_0x2e962d=[_0x55755f(0x12b),_0x55755f(0x121),_0x55755f(0x13b),'robotAvatar',_0x55755f(0x124)],_0x373238=await this[_0x55755f(0x117)]['query'](_0x55755f(0x15f)+_0x2e962d[_0x55755f(0x138)](_0x22a0e1=>'\x27'+_0x22a0e1+'\x27')[_0x55755f(0x144)](',')+')\x0a'),_0x4950e2=parseInt(_0x373238[0x0][_0x55755f(0x12d)]);_0x4950e2===0x0&&await this['createBaseSiteConfig']();}async['createBaseSiteConfig'](){const _0x38182e=_0x35e5fd;try{const _0xfc2458=_0x38182e(0x146),_0x2ad743=_0x38182e(0x16d),_0x1cf4ed=[{'configKey':_0x38182e(0x12b),'configVal':_0x38182e(0x118),'public':0x1,'encry':0x0},{'configKey':_0x38182e(0x121),'configVal':_0x38182e(0x162),'public':0x1,'encry':0x0},{'configKey':_0x38182e(0x13b),'configVal':'999999','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x168),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x124),'configVal':'https://s11.ax1x.com/2024/03/04/pFDemB4.png','public':0x0,'encry':0x0},{'configKey':_0x38182e(0x13f),'configVal':_0xfc2458,'public':0x1,'encry':0x0},{'configKey':'baiduSiteId','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x38182e(0x172),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x38182e(0x171),'configVal':'','public':0x1,'encry':0x0},{'configKey':'openaiBaseUrl','configVal':'https://api.openai.com','public':0x0,'encry':0x0},{'configKey':_0x38182e(0x164),'configVal':_0x2ad743,'public':0x1,'encry':0x0},{'configKey':_0x38182e(0x154),'configVal':_0x38182e(0x165),'public':0x0,'encry':0x0},{'configKey':_0x38182e(0x149),'configVal':_0x38182e(0x158),'public':0x0,'encry':0x0},{'configKey':_0x38182e(0x136),'configVal':_0x38182e(0x170),'public':0x0,'encry':0x0},{'configKey':_0x38182e(0x16c),'configVal':_0x38182e(0x153),'public':0x0,'encry':0x0},{'configKey':_0x38182e(0x148),'configVal':'NineTeam团队账号激活成功','public':0x0,'encry':0x0},{'configKey':_0x38182e(0x15d),'configVal':_0x38182e(0x170),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':',请妥善保管您的账号，我们将为您赠送50次对话额度和5次绘画额度、祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0x38182e(0x14a),'configVal':_0x38182e(0x152),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0x38182e(0x170),'public':0x0,'encry':0x0},{'configKey':'registerSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x11f),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x15a),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x15b),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x176),'configVal':_0x38182e(0x125),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'20','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x143),'configVal':'2','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x151),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel4Count','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x12f),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x13c),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x134),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x14f),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x163),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x38182e(0x133),'configVal':'1','public':0x1,'encry':0x0}],_0x13781d=await this[_0x38182e(0x117)][_0x38182e(0x126)](_0x38182e(0x12e)+_0x1cf4ed[_0x38182e(0x138)](_0x1c2af0=>'(\x27'+_0x1c2af0[_0x38182e(0x11b)]+'\x27,\x20\x27'+_0x1c2af0[_0x38182e(0x161)][_0x38182e(0x137)](/'/g,'\x5c\x27')+_0x38182e(0x167)+_0x1c2af0['public']+_0x38182e(0x167)+_0x1c2af0[_0x38182e(0x131)]+'\x27)')[_0x38182e(0x144)](',\x20'));common_1['Logger'][_0x38182e(0x13e)]('初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅',_0x38182e(0x160));}catch(_0x47e8b7){console[_0x38182e(0x13e)](_0x38182e(0x15e),_0x47e8b7);throw new common_1[(_0x38182e(0x174))](_0x38182e(0x14c),common_1['HttpStatus'][_0x38182e(0x142)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x35e5fd(0x169)])(),__metadata(_0x35e5fd(0x11e),[typeorm_1['Connection']])],DatabaseService),exports[_0x35e5fd(0x160)]=DatabaseService;function _0x2e61(){const _0x3a0779=['encry','110099zEscrR','MjdrawCount','invitedGuestSendModel4Count','defineProperty','registerVerifyEmailFrom','replace','map','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','6009867XCklEi','vxNumber','invitedGuestSendModel3Count','创建默认超级管理员失败！','log','baiduCode','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','19722rWNqVc','INTERNAL_SERVER_ERROR','firstRregisterSendModel4Count','join','657412eZDdkr','\x0a\x20\x20<script>\x0a\x20\x20var\x20_hmt\x20=\x20_hmt\x20||\x20[];\x0a\x20\x20(function()\x20{\x0a\x20\x20\x20\x20var\x20hm\x20=\x20document.createElement(\x22script\x22);\x0a\x20\x20\x20\x20hm.src\x20=\x20\x22https://hm.baidu.com/hm.js?cb8c9a3bcadbc200e950b05f9c61a385\x22;\x0a\x20\x20\x20\x20var\x20s\x20=\x20document.getElementsByTagName(\x22script\x22)[0];\x0a\x20\x20\x20\x20s.parentNode.insertBefore(hm,\x20s);\x0a\x20\x20})();\x0a\x20\x20</script>\x0a','1981JvbxSu','registerSuccessEmailTitle','registerVerifyEmailDesc','registerFailEmailTitle','2NfoUVz','创建默认网站配置失败！','Logger','insertId','invitedGuestSendDrawMjCount','初始化创建','inviteSendStatus','NineTeam账号激活失败','1800','registerVerifyEmailTitle','metadata','getOwnPropertyDescriptor','object','欢迎使用Nine\x20Team团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，',']、初始密码为[','registerSendModel4Count','registerSendDrawMjCount','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','registerSuccessEmailTeamName','error:\x20','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','DatabaseService','configVal','999999','isVerifyEmail','noticeInfo','NineTeam团队账号验证','admin','\x27,\x20\x27','robotAvatar','Injectable','checkSiteBaseConfig','1759899aIEaNF','registerVerifyExpir','\x0a####\x20NineAi\x20欢迎您\x0a\x20-\x20NineAi唯一官方网站\x20https://ai.jiangly.com\x0a\x20-\x20NineAi\x20作者VX：\x20J_longyan\x0a\x20-\x20NineAi\x20作者QQ：\x20927898639\x0a\x20-\x20欢迎使用Nine\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20nine-super\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a\x0a####\x20NineAi\x20产品中心\x0a-\x20项目更新日志记录、文档、导航中心请访问\x20[NineAi导航中心](https://nav.nineai.chat)\x0a-\x20NineAi唯一官方网站地址\x20\x20[Nine官方网站](https://nineai.chat)\x0a','HttpStatus','4479915pkzAcX','NineTeam团队','buyCramiAddress','baiduToken','1070720FjgtgP','HttpException','16hXOkjF','firstRegisterSendRank','hashSync','connection','Nine\x20Ai','decorate','length','configKey','__esModule','nine-super','design:paramtypes','registerSendModel3Count','checkSuperAdmin','qqNumber','super','defaultAdmin@cooper.com','userDefautlAvatar','500','query','bcryptjs','createDefaultUser','__metadata','\x27,\x200,\x201000,\x20100)','siteName','123456','count','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','inviteGiveSendDrawMjCount','4040PysANE'];_0x2e61=function(){return _0x3a0779;};return _0x2e61();}