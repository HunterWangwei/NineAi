'use strict';const _0x2a0f8f=_0x558b;(function(_0x2ed358,_0xf5eee2){const _0x4961dd=_0x558b,_0x5a5755=_0x2ed358();while(!![]){try{const _0x3fa0b4=-parseInt(_0x4961dd(0x120))/0x1+parseInt(_0x4961dd(0x132))/0x2*(-parseInt(_0x4961dd(0x161))/0x3)+parseInt(_0x4961dd(0x13f))/0x4*(-parseInt(_0x4961dd(0x16f))/0x5)+parseInt(_0x4961dd(0x166))/0x6+-parseInt(_0x4961dd(0x14f))/0x7*(parseInt(_0x4961dd(0x150))/0x8)+-parseInt(_0x4961dd(0x175))/0x9*(parseInt(_0x4961dd(0x178))/0xa)+parseInt(_0x4961dd(0x126))/0xb*(parseInt(_0x4961dd(0x188))/0xc);if(_0x3fa0b4===_0xf5eee2)break;else _0x5a5755['push'](_0x5a5755['shift']());}catch(_0x4e80fa){_0x5a5755['push'](_0x5a5755['shift']());}}}(_0x5b48,0x63402));function _0x558b(_0x29ce80,_0x1fe3c6){const _0x5b488a=_0x5b48();return _0x558b=function(_0x558bb5,_0x242c52){_0x558bb5=_0x558bb5-0x11f;let _0x1ac427=_0x5b488a[_0x558bb5];return _0x1ac427;},_0x558b(_0x29ce80,_0x1fe3c6);}var __decorate=this&&this[_0x2a0f8f(0x131)]||function(_0x1b7a39,_0x26a97c,_0x36447f,_0x19d7d0){const _0x4efe11=_0x2a0f8f;var _0x381b69=arguments[_0x4efe11(0x176)],_0x39354b=_0x381b69<0x3?_0x26a97c:_0x19d7d0===null?_0x19d7d0=Object[_0x4efe11(0x189)](_0x26a97c,_0x36447f):_0x19d7d0,_0x35dc6d;if(typeof Reflect===_0x4efe11(0x167)&&typeof Reflect[_0x4efe11(0x17e)]===_0x4efe11(0x155))_0x39354b=Reflect[_0x4efe11(0x17e)](_0x1b7a39,_0x26a97c,_0x36447f,_0x19d7d0);else{for(var _0x511d29=_0x1b7a39['length']-0x1;_0x511d29>=0x0;_0x511d29--)if(_0x35dc6d=_0x1b7a39[_0x511d29])_0x39354b=(_0x381b69<0x3?_0x35dc6d(_0x39354b):_0x381b69>0x3?_0x35dc6d(_0x26a97c,_0x36447f,_0x39354b):_0x35dc6d(_0x26a97c,_0x36447f))||_0x39354b;}return _0x381b69>0x3&&_0x39354b&&Object[_0x4efe11(0x15a)](_0x26a97c,_0x36447f,_0x39354b),_0x39354b;},__metadata=this&&this['__metadata']||function(_0x185dc0,_0x5b3ad0){const _0x3d1e78=_0x2a0f8f;if(typeof Reflect===_0x3d1e78(0x167)&&typeof Reflect[_0x3d1e78(0x17c)]===_0x3d1e78(0x155))return Reflect[_0x3d1e78(0x17c)](_0x185dc0,_0x5b3ad0);};Object[_0x2a0f8f(0x15a)](exports,_0x2a0f8f(0x14b),{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x2a0f8f(0x15b)),bcrypt=require(_0x2a0f8f(0x17a));let DatabaseService=class DatabaseService{constructor(_0x3e0cd5){const _0x3ea7cd=_0x2a0f8f;this[_0x3ea7cd(0x127)]=_0x3e0cd5;}async[_0x2a0f8f(0x187)](){const _0x3f44b9=_0x2a0f8f;await this[_0x3f44b9(0x14e)](),await this[_0x3f44b9(0x124)]();}async[_0x2a0f8f(0x14e)](){const _0x48d855=_0x2a0f8f,_0x588065=await this[_0x48d855(0x127)][_0x48d855(0x179)](_0x48d855(0x185));if(!_0x588065||_0x588065[_0x48d855(0x176)]===0x0){const _0x4e0fa1=bcrypt[_0x48d855(0x146)](_0x48d855(0x183),0xa),_0x5df6f1=bcrypt[_0x48d855(0x146)](_0x48d855(0x162),0xa),_0x4b05fc=_0x48d855(0x147),_0x8c2a0e=_0x48d855(0x143),_0x75ab22={'username':_0x48d855(0x149),'password':_0x4e0fa1,'status':0x1,'email':_0x4b05fc,'sex':0x1,'role':'super'},_0x3e9503={'username':_0x48d855(0x125),'password':_0x5df6f1,'status':0x1,'email':_0x8c2a0e,'sex':0x1,'role':_0x48d855(0x125)};await this[_0x48d855(0x157)](_0x75ab22),await this['createDefaultUser'](_0x3e9503);}}async[_0x2a0f8f(0x157)](_0x9db33e){const _0x494f1d=_0x2a0f8f;try{const {username:_0x47ffc0,password:_0x28c333,status:_0x29d1db,email:_0x3b702e,role:_0x3970ce}=_0x9db33e,_0x222623=await this[_0x494f1d(0x127)][_0x494f1d(0x179)](_0x494f1d(0x172)+_0x47ffc0+_0x494f1d(0x13c)+_0x28c333+_0x494f1d(0x13c)+_0x29d1db+_0x494f1d(0x13c)+_0x3b702e+_0x494f1d(0x13c)+_0x3970ce+'\x27)'),_0x2b2ccb=_0x222623[_0x494f1d(0x163)],_0x57581b=await this['connection'][_0x494f1d(0x179)](_0x494f1d(0x181)+_0x2b2ccb+'\x27,\x200,\x201000,\x20100)');common_1[_0x494f1d(0x17d)][_0x494f1d(0x130)](_0x494f1d(0x152)+_0x3970ce+_0x494f1d(0x12e)+_0x47ffc0+_0x494f1d(0x129)+(_0x47ffc0===_0x494f1d(0x149)?_0x494f1d(0x183):'123456')+_0x494f1d(0x158),_0x494f1d(0x169));}catch(_0x907d5e){console['log'](_0x494f1d(0x156),_0x907d5e);throw new common_1[(_0x494f1d(0x18d))](_0x494f1d(0x137),common_1[_0x494f1d(0x145)][_0x494f1d(0x13a)]);}}async[_0x2a0f8f(0x124)](){const _0x273472=_0x2a0f8f,_0x57bf9a=[_0x273472(0x144),_0x273472(0x135),'vxNumber','robotAvatar','userDefautlAvatar'],_0xac965b=await this[_0x273472(0x127)][_0x273472(0x179)](_0x273472(0x148)+_0x57bf9a[_0x273472(0x168)](_0x2768fe=>'\x27'+_0x2768fe+'\x27')[_0x273472(0x15c)](',')+')\x0a'),_0x57397a=parseInt(_0xac965b[0x0]['count']);_0x57397a===0x0&&await this[_0x273472(0x184)]();}async[_0x2a0f8f(0x184)](){const _0x153ab8=_0x2a0f8f;try{const _0x290c68=_0x153ab8(0x13d),_0x12b720='\x0a####\x20NineAi\x20欢迎您\x0a\x20-\x20NineAi唯一官方网站\x20https://ai.jiangly.com\x0a\x20-\x20NineAi\x20作者VX：\x20J_longyan\x0a\x20-\x20NineAi\x20作者QQ：\x20927898639\x0a\x20-\x20欢迎使用Nine\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20nine-super\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a\x0a####\x20NineAi\x20产品中心\x0a-\x20项目更新日志记录、文档、导航中心请访问\x20[NineAi导航中心](https://nav.nineai.chat)\x0a-\x20NineAi唯一官方网站地址\x20\x20[Nine官方网站](https://nineai.chat)\x0a',_0x2ed221=[{'configKey':'siteName','configVal':_0x153ab8(0x173),'public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x135),'configVal':'999999','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x16d),'configVal':_0x153ab8(0x17b),'public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x159),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x140),'configVal':_0x153ab8(0x142),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x18c),'configVal':_0x290c68,'public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x165),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x164),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x18e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x153),'configVal':_0x153ab8(0x18b),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x13b),'configVal':_0x12b720,'public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x182),'configVal':_0x153ab8(0x177),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailDesc','configVal':_0x153ab8(0x12d),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x11f),'configVal':_0x153ab8(0x123),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x136),'configVal':_0x153ab8(0x15f),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x16a),'configVal':_0x153ab8(0x174),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x15e),'configVal':_0x153ab8(0x123),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':_0x153ab8(0x16e),'public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x134),'configVal':'NineTeam账号激活失败','public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x12a),'configVal':'NineTeam团队','public':0x0,'encry':0x0},{'configKey':_0x153ab8(0x160),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x14a),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x133),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x12b),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x139),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x138),'configVal':_0x153ab8(0x17f),'public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x12c),'configVal':'20','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x122),'configVal':'2','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x128),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x121),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x13e),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x171),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x16b),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel4Count','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x14c),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x18a),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x153ab8(0x186),'configVal':'1','public':0x1,'encry':0x0}],_0x481d44=await this[_0x153ab8(0x127)][_0x153ab8(0x179)](_0x153ab8(0x141)+_0x2ed221[_0x153ab8(0x168)](_0x16ec50=>'(\x27'+_0x16ec50[_0x153ab8(0x154)]+'\x27,\x20\x27'+_0x16ec50[_0x153ab8(0x180)][_0x153ab8(0x12f)](/'/g,'\x5c\x27')+_0x153ab8(0x13c)+_0x16ec50[_0x153ab8(0x15d)]+_0x153ab8(0x13c)+_0x16ec50[_0x153ab8(0x151)]+'\x27)')[_0x153ab8(0x15c)](',\x20'));common_1[_0x153ab8(0x17d)]['log']('初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅',_0x153ab8(0x169));}catch(_0x3d994e){console[_0x153ab8(0x130)](_0x153ab8(0x156),_0x3d994e);throw new common_1['HttpException'](_0x153ab8(0x16c),common_1[_0x153ab8(0x145)][_0x153ab8(0x13a)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x2a0f8f(0x14d)])(),__metadata('design:paramtypes',[typeorm_1[_0x2a0f8f(0x170)]])],DatabaseService),exports[_0x2a0f8f(0x169)]=DatabaseService;function _0x5b48(){const _0x4d7df8=['registerVerifyEmailFrom','12108ULZrHr','inviteSendStatus','firstRregisterSendModel4Count','NineTeam团队','checkSiteBaseConfig','admin','476443UtrfXf','connection','firstRregisterSendDrawMjCount',']、初始密码为[','registerFailEmailTeamName','registerSendDrawMjCount','firstRregisterSendModel3Count','欢迎使用Nine\x20Team团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','用户成功、用户名为[','replace','log','__decorate','292HHWQnX','registerSendModel4Count','registerFailEmailTitle','qqNumber','registerVerifyExpir','创建默认超级管理员失败！','firstRegisterSendRank','firstRegisterSendStatus','INTERNAL_SERVER_ERROR','noticeInfo','\x27,\x20\x27','\x0a\x20\x20<script>\x0a\x20\x20var\x20_hmt\x20=\x20_hmt\x20||\x20[];\x0a\x20\x20(function()\x20{\x0a\x20\x20\x20\x20var\x20hm\x20=\x20document.createElement(\x22script\x22);\x0a\x20\x20\x20\x20hm.src\x20=\x20\x22https://hm.baidu.com/hm.js?cb8c9a3bcadbc200e950b05f9c61a385\x22;\x0a\x20\x20\x20\x20var\x20s\x20=\x20document.getElementsByTagName(\x22script\x22)[0];\x0a\x20\x20\x20\x20s.parentNode.insertBefore(hm,\x20s);\x0a\x20\x20})();\x0a\x20\x20</script>\x0a','inviteGiveSendModel4Count','1179284VQXKFU','userDefautlAvatar','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','https://s11.ax1x.com/2024/03/04/pFDemB4.png','defaultAdmin@cooper.com','siteName','HttpStatus','hashSync','default@cooper.com','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','super','registerSendModel3Count','__esModule','invitedGuestSendDrawMjCount','Injectable','checkSuperAdmin','13265olbQGa','2368dpiQyI','encry','初始化创建','openaiBaseUrl','configKey','function','error:\x20','createDefaultUser',']\x20==============>\x20请注意查阅','robotAvatar','defineProperty','typeorm','join','public','registerSuccessEmailTeamName','1800','registerSendStatus','13989TfVjxO','123456','insertId','baiduToken','baiduSiteId','4378422PIujzp','object','map','DatabaseService','registerSuccessEmailTitle','invitedGuestSendModel3Count','创建默认网站配置失败！','vxNumber',',请妥善保管您的账号，我们将为您赠送50次对话额度和5次绘画额度、祝您使用愉快','5hFKJul','Connection','inviteGiveSendDrawMjCount','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','Nine\x20Ai','NineTeam团队账号激活成功','62703Aersbu','length','NineTeam团队账号验证','790LlPqUn','query','bcryptjs','999999','metadata','Logger','decorate','500','configVal','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','registerVerifyEmailTitle','nine-super','createBaseSiteConfig','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','MjdrawCount','onModuleInit','492bnmTnQ','getOwnPropertyDescriptor','isVerifyEmail','https://api.openai.com','baiduCode','HttpException','buyCramiAddress'];_0x5b48=function(){return _0x4d7df8;};return _0x5b48();}