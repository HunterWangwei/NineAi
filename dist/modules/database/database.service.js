'use strict';const _0x20fe00=_0x3550;(function(_0x46bff6,_0x307d3e){const _0x22cf2d=_0x3550,_0x53e32c=_0x46bff6();while(!![]){try{const _0x3e0880=parseInt(_0x22cf2d(0x13d))/0x1*(-parseInt(_0x22cf2d(0x131))/0x2)+parseInt(_0x22cf2d(0x134))/0x3*(-parseInt(_0x22cf2d(0x120))/0x4)+parseInt(_0x22cf2d(0x148))/0x5*(-parseInt(_0x22cf2d(0x137))/0x6)+parseInt(_0x22cf2d(0x128))/0x7+parseInt(_0x22cf2d(0x15a))/0x8*(-parseInt(_0x22cf2d(0x130))/0x9)+parseInt(_0x22cf2d(0x103))/0xa+parseInt(_0x22cf2d(0x113))/0xb*(parseInt(_0x22cf2d(0x135))/0xc);if(_0x3e0880===_0x307d3e)break;else _0x53e32c['push'](_0x53e32c['shift']());}catch(_0xef8864){_0x53e32c['push'](_0x53e32c['shift']());}}}(_0xfb1d,0xa1adc));var __decorate=this&&this[_0x20fe00(0x121)]||function(_0x32c63f,_0x369b2d,_0xe97dd,_0x1424d5){const _0x25867f=_0x20fe00;var _0x446547=arguments[_0x25867f(0xfa)],_0x4e3722=_0x446547<0x3?_0x369b2d:_0x1424d5===null?_0x1424d5=Object[_0x25867f(0x10b)](_0x369b2d,_0xe97dd):_0x1424d5,_0xd2e630;if(typeof Reflect===_0x25867f(0x115)&&typeof Reflect[_0x25867f(0xff)]==='function')_0x4e3722=Reflect[_0x25867f(0xff)](_0x32c63f,_0x369b2d,_0xe97dd,_0x1424d5);else{for(var _0x241954=_0x32c63f[_0x25867f(0xfa)]-0x1;_0x241954>=0x0;_0x241954--)if(_0xd2e630=_0x32c63f[_0x241954])_0x4e3722=(_0x446547<0x3?_0xd2e630(_0x4e3722):_0x446547>0x3?_0xd2e630(_0x369b2d,_0xe97dd,_0x4e3722):_0xd2e630(_0x369b2d,_0xe97dd))||_0x4e3722;}return _0x446547>0x3&&_0x4e3722&&Object[_0x25867f(0x145)](_0x369b2d,_0xe97dd,_0x4e3722),_0x4e3722;},__metadata=this&&this[_0x20fe00(0x111)]||function(_0x15012e,_0x297688){const _0x5dc10e=_0x20fe00;if(typeof Reflect==='object'&&typeof Reflect[_0x5dc10e(0x159)]===_0x5dc10e(0x158))return Reflect[_0x5dc10e(0x159)](_0x15012e,_0x297688);};Object[_0x20fe00(0x145)](exports,_0x20fe00(0x11a),{'value':!![]}),exports[_0x20fe00(0x125)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require('typeorm'),bcrypt=require('bcryptjs');function _0x3550(_0x250399,_0x4d8c18){const _0xfb1d0a=_0xfb1d();return _0x3550=function(_0x35505d,_0x1a35f7){_0x35505d=_0x35505d-0xf6;let _0x1eaae7=_0xfb1d0a[_0x35505d];return _0x1eaae7;},_0x3550(_0x250399,_0x4d8c18);}function _0xfb1d(){const _0x2fc68a=['replace','5409HBxIJa','2EsIQQE','https://api.openai.com','121.a1600b9b60910feea2ef627ea9776a6f.YGP_CWCOA2lNcIGJ27BwXGxa6nZhBQyLUS4XVaD.TWt9TA','14631dilCID','29717340gcsFOu','registerSendDrawMjCount','12RJRlSc','NineTeam团队账号激活成功','super','19024441','userDefautlAvatar','inviteGiveSendDrawMjCount','663262seQmTu','创建默认网站配置失败！','registerFailEmailTitle','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','123456','admin','invitedGuestSendDrawMjCount','invitedGuestSendModel3Count','defineProperty','createBaseSiteConfig','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','480580yvkzxd','HttpStatus','defaultAdmin@cooper.com','query','error:\x20','qqNumber',']\x20==============>\x20请注意查阅','创建默认超级管理员失败！','registerSendModel4Count','robotAvatar','NineTeam团队账号验证','\x0a\x20\x20<script>\x0a\x20\x20var\x20_hmt\x20=\x20_hmt\x20||\x20[];\x0a\x20\x20(function()\x20{\x0a\x20\x20\x20\x20var\x20hm\x20=\x20document.createElement(\x22script\x22);\x0a\x20\x20\x20\x20hm.src\x20=\x20\x22https://hm.baidu.com/hm.js?cb8c9a3bcadbc200e950b05f9c61a385\x22;\x0a\x20\x20\x20\x20var\x20s\x20=\x20document.getElementsByTagName(\x22script\x22)[0];\x0a\x20\x20\x20\x20s.parentNode.insertBefore(hm,\x20s);\x0a\x20\x20})();\x0a\x20\x20</script>\x0a','isVerifyEmail','createDefaultUser','HttpException','Logger','function','metadata','13856WVaTSY','hashSync','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','baiduSiteId','firstRegisterSendRank','https://public-1300678944.cos.ap-shanghai.myqcloud.com/blog/1682571295452image.png','欢迎使用Nine\x20Team团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','length','Connection','Injectable','J_longyan','registerVerifyEmailTitle','decorate','\x27,\x200,\x201000,\x20100)','nine-super','registerSuccessEmailTitle','2552490AXzzuD','checkSuperAdmin','registerVerifyEmailDesc','baiduToken','join','NineTeam账号激活失败','NineTeam团队','500','getOwnPropertyDescriptor','927898639','checkSiteBaseConfig','registerSendModel3Count','Nine\x20Ai','用户成功、用户名为[','__metadata','firstRregisterSendModel4Count','11YmvErV','onModuleInit','object','insertId','log','vxNumber','firstRregisterSendDrawMjCount','__esModule','baiduCode','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','default@cooper.com','registerSendStatus','INTERNAL_SERVER_ERROR','524dVeUQS','__decorate','configKey','siteName','registerVerifyExpir','DatabaseService','\x27,\x20\x27','buyCramiAddress','3260985jetyvE','count','map','firstRegisterSendStatus','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','connection','configVal'];_0xfb1d=function(){return _0x2fc68a;};return _0xfb1d();}let DatabaseService=class DatabaseService{constructor(_0x3299c6){this['connection']=_0x3299c6;}async[_0x20fe00(0x114)](){const _0x2a14d5=_0x20fe00;await this[_0x2a14d5(0x104)](),await this[_0x2a14d5(0x10d)]();}async['checkSuperAdmin'](){const _0x2383b8=_0x20fe00,_0xfa4610=await this['connection']['query'](_0x2383b8(0x12c));if(!_0xfa4610||_0xfa4610[_0x2383b8(0xfa)]===0x0){const _0x2c4047=bcrypt[_0x2383b8(0x15b)](_0x2383b8(0x101),0xa),_0xf17ddf=bcrypt[_0x2383b8(0x15b)](_0x2383b8(0x141),0xa),_0x32097f=_0x2383b8(0x11d),_0x2ff1ba=_0x2383b8(0x14a),_0x4d22e4={'username':_0x2383b8(0x139),'password':_0x2c4047,'status':0x1,'email':_0x32097f,'sex':0x1,'role':'super'},_0x291a0a={'username':_0x2383b8(0x142),'password':_0xf17ddf,'status':0x1,'email':_0x2ff1ba,'sex':0x1,'role':_0x2383b8(0x142)};await this['createDefaultUser'](_0x4d22e4),await this[_0x2383b8(0x155)](_0x291a0a);}}async[_0x20fe00(0x155)](_0x357efe){const _0x2a83e9=_0x20fe00;try{const {username:_0x558c7b,password:_0xc92a72,status:_0x13a142,email:_0x5d73f3,role:_0x50aced}=_0x357efe,_0x24c2e5=await this[_0x2a83e9(0x12d)][_0x2a83e9(0x14b)](_0x2a83e9(0x147)+_0x558c7b+_0x2a83e9(0x126)+_0xc92a72+'\x27,\x20\x27'+_0x13a142+'\x27,\x20\x27'+_0x5d73f3+_0x2a83e9(0x126)+_0x50aced+'\x27)'),_0x35755c=_0x24c2e5[_0x2a83e9(0x116)],_0x3ca2df=await this[_0x2a83e9(0x12d)][_0x2a83e9(0x14b)](_0x2a83e9(0x15c)+_0x35755c+_0x2a83e9(0x100));common_1[_0x2a83e9(0x157)][_0x2a83e9(0x117)]('初始化创建'+_0x50aced+_0x2a83e9(0x110)+_0x558c7b+']、初始密码为['+(_0x558c7b===_0x2a83e9(0x139)?_0x2a83e9(0x101):'123456')+_0x2a83e9(0x14e),'DatabaseService');}catch(_0x2da50e){console[_0x2a83e9(0x117)](_0x2a83e9(0x14c),_0x2da50e);throw new common_1[(_0x2a83e9(0x156))](_0x2a83e9(0x14f),common_1[_0x2a83e9(0x149)][_0x2a83e9(0x11f)]);}}async[_0x20fe00(0x10d)](){const _0x17c25a=_0x20fe00,_0x50f8e6=['siteName',_0x17c25a(0x14d),_0x17c25a(0x118),'robotAvatar','userDefautlAvatar'],_0x353ec9=await this[_0x17c25a(0x12d)][_0x17c25a(0x14b)]('\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20('+_0x50f8e6[_0x17c25a(0x12a)](_0x2b22b1=>'\x27'+_0x2b22b1+'\x27')[_0x17c25a(0x107)](',')+')\x0a'),_0x13a2ca=parseInt(_0x353ec9[0x0][_0x17c25a(0x129)]);_0x13a2ca===0x0&&await this['createBaseSiteConfig']();}async[_0x20fe00(0x146)](){const _0x1d094d=_0x20fe00;try{const _0x13e4ef=_0x1d094d(0x153),_0xff6244='\x0a####\x20NineAi\x20欢迎您\x0a\x20-\x20NineAi唯一官方网站\x20https://ai.jiangly.com\x0a\x20-\x20NineAi\x20作者VX：\x20J_longyan\x0a\x20-\x20NineAi\x20作者QQ：\x20927898639\x0a\x20-\x20欢迎使用Nine\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20nine-super\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a',_0x5c12f2=[{'configKey':_0x1d094d(0x123),'configVal':_0x1d094d(0x10f),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x1d094d(0x10c),'public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x118),'configVal':_0x1d094d(0xfd),'public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x151),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x13b),'configVal':_0x1d094d(0xf8),'public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x11b),'configVal':_0x13e4ef,'public':0x1,'encry':0x0},{'configKey':_0x1d094d(0xf6),'configVal':_0x1d094d(0x13a),'public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x106),'configVal':_0x1d094d(0x133),'public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x127),'configVal':'','public':0x1,'encry':0x0},{'configKey':'openaiBaseUrl','configVal':_0x1d094d(0x132),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0xff6244,'public':0x1,'encry':0x0},{'configKey':_0x1d094d(0xfe),'configVal':_0x1d094d(0x152),'public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x105),'configVal':_0x1d094d(0xf9),'public':0x0,'encry':0x0},{'configKey':'registerVerifyEmailFrom','configVal':_0x1d094d(0x109),'public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x124),'configVal':'1800','public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x102),'configVal':_0x1d094d(0x138),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTeamName','configVal':_0x1d094d(0x109),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':',请妥善保管您的账号，我们将为您赠送50次对话额度和5次绘画额度、祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x13f),'configVal':_0x1d094d(0x108),'public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':'NineTeam团队','public':0x0,'encry':0x0},{'configKey':_0x1d094d(0x11e),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x10e),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x150),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x136),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x12b),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0xf7),'configVal':_0x1d094d(0x10a),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'20','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x112),'configVal':'2','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x119),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'inviteSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel4Count','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x13c),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x144),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel4Count','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x143),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x1d094d(0x154),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'MjdrawCount','configVal':'1','public':0x1,'encry':0x0}],_0x2ad914=await this['connection'][_0x1d094d(0x14b)](_0x1d094d(0x140)+_0x5c12f2[_0x1d094d(0x12a)](_0x4ab251=>'(\x27'+_0x4ab251[_0x1d094d(0x122)]+'\x27,\x20\x27'+_0x4ab251[_0x1d094d(0x12e)][_0x1d094d(0x12f)](/'/g,'\x5c\x27')+_0x1d094d(0x126)+_0x4ab251['public']+_0x1d094d(0x126)+_0x4ab251['encry']+'\x27)')['join'](',\x20'));common_1[_0x1d094d(0x157)]['log'](_0x1d094d(0x11c),'DatabaseService');}catch(_0x227d44){console[_0x1d094d(0x117)](_0x1d094d(0x14c),_0x227d44);throw new common_1[(_0x1d094d(0x156))](_0x1d094d(0x13e),common_1[_0x1d094d(0x149)][_0x1d094d(0x11f)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x20fe00(0xfc)])(),__metadata('design:paramtypes',[typeorm_1[_0x20fe00(0xfb)]])],DatabaseService),exports['DatabaseService']=DatabaseService;