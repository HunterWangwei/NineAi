'use strict';const _0x52eeff=_0x17aa;(function(_0x5bd60f,_0x331070){const _0x4c5687=_0x17aa,_0x3b2170=_0x5bd60f();while(!![]){try{const _0x534dba=-parseInt(_0x4c5687(0x1a3))/0x1*(-parseInt(_0x4c5687(0x1b0))/0x2)+parseInt(_0x4c5687(0x255))/0x3*(parseInt(_0x4c5687(0x1e2))/0x4)+parseInt(_0x4c5687(0x187))/0x5*(parseInt(_0x4c5687(0x24e))/0x6)+-parseInt(_0x4c5687(0x19a))/0x7*(parseInt(_0x4c5687(0x196))/0x8)+parseInt(_0x4c5687(0x238))/0x9+parseInt(_0x4c5687(0x23f))/0xa*(-parseInt(_0x4c5687(0x221))/0xb)+-parseInt(_0x4c5687(0x239))/0xc;if(_0x534dba===_0x331070)break;else _0x3b2170['push'](_0x3b2170['shift']());}catch(_0x89d0bd){_0x3b2170['push'](_0x3b2170['shift']());}}}(_0x4940,0x25649));function _0x17aa(_0x299471,_0x4d9989){const _0x4940aa=_0x4940();return _0x17aa=function(_0x17aa16,_0x1212a4){_0x17aa16=_0x17aa16-0x183;let _0x4edd13=_0x4940aa[_0x17aa16];return _0x4edd13;},_0x17aa(_0x299471,_0x4d9989);}var __decorate=this&&this[_0x52eeff(0x245)]||function(_0x5efaa7,_0x2c2bc4,_0x2a0398,_0x378185){const _0x5b64a1=_0x52eeff;var _0x59ff01=arguments[_0x5b64a1(0x199)],_0x342814=_0x59ff01<0x3?_0x2c2bc4:_0x378185===null?_0x378185=Object[_0x5b64a1(0x192)](_0x2c2bc4,_0x2a0398):_0x378185,_0x278297;if(typeof Reflect===_0x5b64a1(0x1e4)&&typeof Reflect[_0x5b64a1(0x249)]===_0x5b64a1(0x1fe))_0x342814=Reflect[_0x5b64a1(0x249)](_0x5efaa7,_0x2c2bc4,_0x2a0398,_0x378185);else{for(var _0x440652=_0x5efaa7[_0x5b64a1(0x199)]-0x1;_0x440652>=0x0;_0x440652--)if(_0x278297=_0x5efaa7[_0x440652])_0x342814=(_0x59ff01<0x3?_0x278297(_0x342814):_0x59ff01>0x3?_0x278297(_0x2c2bc4,_0x2a0398,_0x342814):_0x278297(_0x2c2bc4,_0x2a0398))||_0x342814;}return _0x59ff01>0x3&&_0x342814&&Object[_0x5b64a1(0x1cb)](_0x2c2bc4,_0x2a0398,_0x342814),_0x342814;},__metadata=this&&this['__metadata']||function(_0x20e017,_0x2bc133){const _0x41cb53=_0x52eeff;if(typeof Reflect==='object'&&typeof Reflect[_0x41cb53(0x218)]===_0x41cb53(0x1fe))return Reflect[_0x41cb53(0x218)](_0x20e017,_0x2bc133);},__param=this&&this['__param']||function(_0x15fd12,_0x48cb4e){return function(_0x5bff97,_0x19f341){_0x48cb4e(_0x5bff97,_0x19f341,_0x15fd12);};};function _0x4940(){const _0xbf713a=['endsWith','originalImgUrl','mjDraw','mjVariationMoney','findAndCount','100%','customInstruct','post','function','mjUserLimit','image-size','@nestjs/typeorm','includes','keys','removeParameters','./../chatgpt/chatgpt.service','NineErrMsg','formatMjDrawPrompt','axios','/mj/task/','split','join','typeorm','Bearer\x20','data','findOne','userEntity','UploadService','InjectRepository','prompt','\x20--s\x20','notify\x20-------->','SUBMITTED','map','metadata','deductFromBalance','getDrawDecutConfig','@nestjs/common','get','DESC','save','throwError','/mj/submit/imagine','561jOjbPq','fast','url','mjDescribeMoney','当前进行中任务数量:\x20','email','description','drawFailRefund','../models/models.service','quota_not_enough','convertUrlsToBase64','forEach','/mj/submit/modal','dalleModel3Meney','/mj/submit/action','count','drawAction\x20error:\x20','.png','getImageDimensionsFromUrl','无权操作他人作品！','reverse','Executing\x20AI\x20face\x20swap...','./utils','1360701eRruSa','3637452RMFFHg','mjImageMoney','提交Dall-E绘画任务失败、已退还你的余额、请检查系统日志','avatar','notice','delDrawItem','590neuiYA','无权删除他人作品','mj\x20notify\x20err:\x20','id不能为空','textToImage','log','__decorate','chatgptService','GlobalConfigService','mjFreeUse','decorate','stringify','drawBlend:\x20','default','混图任务至少需要两张图片!','6YqyAzn','b64_json','ChatgptService','../../common/utils','result','\x20--seed\x20','getList','2463JcNEIy','describe','mjPlusNotify','dalleModel2Meney','drawAction\x20code\x20!=\x201:\x20\x20441','dalle','getDectDetail','message','../globalConfig/config.entity','UserEntity','IN_PROGRESS','uploadBase64ToMj','drawValidateBalance','moadl\x20confirm\x20res.data:\x20','sysRec','user','\x20--ar\x20','design:paramtypes','ModelsService','Inpaint','variation','notifyDalleDraw','管理员配置模型余额不足\x20请联系管理员！','Injectable','取消推荐成功','\x20--q\x20','/api/draw/mjPlusNotify','当前DallE绘画模型暂未上架、请联系管理员上架此模型！','error:\x20','zoomPrompt','mineList','userBalanceService','HttpStatus','BAD_REQUEST','1288845XhmQWy','promptEn','\x20--niji\x20','niji','执行换脸任务失败、请检查系统日志','detail','replace','slice','提交图生文任务失败、请检查系统日志','\x20--style\x20','mjPanMoney','getOwnPropertyDescriptor','\x20--c\x20','delete','uploadService','1304jldFch','res?.data:\x20','find','length','11354GeEUpz','HttpException','mjSecretKey','formatCreateOrUpdateDate','请将下面这句话翻译为英文、并且只回复我英文、不要回复任何别的内容、翻译这句话\x20','onModuleInit','proxyUrl','assign','第一张上传图:\x20','1497qWXgvV','DrawEntity','getNotifyUrl','__esModule','/mj/submit/describe','binary','drawEntity','CustomZoom','checkUserDrawLimit','getMjImageProxyUrl','当前管理员限制同时最大任务数量为','NOT_START','globalConfigService','234WIYaCb','modelsService','getAxiosInstance','现在请你担任Ai绘画的prompt\x20creator，主要任务是我会给您一个主题，然后请你根据主题\x20来书写提示词，提示词的格式如下：\x0a\x20\x20\x20\x20\x20\x20\x20\x20Style\x20+\x20Subject\x20+\x20Setting\x20+\x20Composition\x20+\x20Lighting\x20+\x20Additional\x20Info\x0a\x20\x20\x20\x20\x20\x20\x20\x20Style:\x20Photo\x20of\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:An\x20astronaut\x20in\x20a\x20white\x20space\x20suit,\x20helmet\x20visor\x20reflecting\x20stars,\x0a\x20\x20\x20\x20\x20\x20\x20\x20Setting:\x20Standing\x20on\x20a\x20moon\x20with\x20Earth\x20visible\x20in\x20the\x20starry\x20sky,\x0a\x20\x20\x20\x20\x20\x20\x20\x20Composition:Astronaut\x20centered,\x20Earth\x20in\x20the\x20background,\x0a\x20\x20\x20\x20\x20\x20\x20\x20Lighting:Bright\x20sunlight\x20with\x20soft\x20moonlight\x20reflections,\x0a\x20\x20\x20\x20\x20\x20\x20\x20Additional\x20Info:\x20Moon\x20rocks\x20and\x20small\x20craters\x20nearby,\x0a\x20\x20\x20\x20\x20\x20\x20\x20参考上述的模板、将我给你的这段内容进行优化、对照上面格式、按着我的这段话发散思维、最后返回英文格式、不要返回其他任何东西、请优化这段内容\x20','提交Action任务失败、请检查系统日志','getUseDrawModelKey','base64','mjBlendImageMoney','height','/v1/images/generations','getSeed','update','../globalConfig/globalConfig.service','FINISH','\x20--iw\x20','upsample','status','正在对上传图片进行咒语解析中...','random-','width','uploadFile','push','maskBase64','error','filter','getUrlByUploadBase','drawBlend','defineProperty','mjNotice','图片资源转换失败、请检查系统日志','ConfigEntity','dall-e-3','chatGlobaltools','FAILURE','mjSwapFaceImageMoney','mjUpscaleMoney','MID_JOURNEY','./draw.entity','../../common/utils/date','userInfo','application/json','response','正在执行AI换脸中......','from','reroll','推荐成功','validateBalance','mjZoomMoney','env','mjRedrawMoney','680ViDSNo','https://cdn.discordapp.com','object','mjImageProxy','未找到该项','Analyzing\x20the\x20uploaded\x20image...','res:\x20','dall-e-2','/mj/submit/upload-discord-images','userId','未知图片！','pan','getConfigs','Repository','、请等待任务结束后继续！','/mj/insight-face/swap','DrawService','username','Executing\x20mixed\x20image\x20task...','mjPartDrawMoney'];_0x4940=function(){return _0xbf713a;};return _0x4940();}Object[_0x52eeff(0x1cb)](exports,_0x52eeff(0x1a6),{'value':!![]}),exports[_0x52eeff(0x1f2)]=void 0x0;const common_1=require(_0x52eeff(0x21b)),axios_1=require(_0x52eeff(0x208)),uuid=require('uuid'),upload_service_1=require('../upload/upload.service'),typeorm_1=require(_0x52eeff(0x201)),draw_entity_1=require(_0x52eeff(0x1d5)),typeorm_2=require(_0x52eeff(0x20c)),config_entity_1=require(_0x52eeff(0x25d)),utils_1=require(_0x52eeff(0x237)),utils_2=require(_0x52eeff(0x251)),chatgpt_service_1=require(_0x52eeff(0x205)),models_service_1=require(_0x52eeff(0x229)),date_1=require(_0x52eeff(0x1d6)),globalConfig_service_1=require(_0x52eeff(0x1bc)),user_entity_1=require('../user/user.entity'),image_size_1=require(_0x52eeff(0x200)),userBalance_service_1=require('../userBalance/userBalance.service');let DrawService=class DrawService{constructor(_0x187ce1,_0x19aca1,_0x1c4b04,_0x3ebcde,_0x1c8e14,_0x28d6fe,_0x366980,_0x18a320){const _0x3686b7=_0x52eeff;this[_0x3686b7(0x195)]=_0x187ce1,this[_0x3686b7(0x1a9)]=_0x19aca1,this['configEntity']=_0x1c4b04,this['userEntity']=_0x3ebcde,this[_0x3686b7(0x246)]=_0x1c8e14,this[_0x3686b7(0x1b1)]=_0x28d6fe,this[_0x3686b7(0x1af)]=_0x366980,this['userBalanceService']=_0x18a320;}async[_0x52eeff(0x19f)](){}async['getAxiosInstance'](){const _0x237f17=_0x52eeff,{mjProxyUrl:_0x2d55e8,mjSecretKey:_0x56d71b}=await this[_0x237f17(0x1af)][_0x237f17(0x1ee)](['mjProxyUrl',_0x237f17(0x19c)]);return(!_0x2d55e8||!_0x56d71b)&&(0x0,utils_2[_0x237f17(0x21f)])({'NineErrMsg':'未配置当前模式绘画服务'}),axios_1[_0x237f17(0x24c)]['create']({'timeout':0x3e8*0x3c,'headers':{'Content-Type':_0x237f17(0x1d8),'mj-api-secret':_0x56d71b},'baseURL':_0x2d55e8[_0x237f17(0x1f6)]('/')?_0x2d55e8['slice'](0x0,_0x2d55e8['length']-0x1):_0x2d55e8});}async['recSysList'](_0x16c1f7){const _0x4a04c8=_0x52eeff,{page:page=0x1,size:size=0x14}=_0x16c1f7,[_0x3153a0,_0x5c15dc]=await this[_0x4a04c8(0x1a9)][_0x4a04c8(0x1fa)]({'where':{'sysRec':'1'},'skip':(page-0x1)*size,'take':size,'order':{'id':'DESC'}}),_0x36d4dc=await this[_0x4a04c8(0x1ac)](),_0x536a45=_0x3153a0[_0x4a04c8(0x217)](_0x33d848=>_0x33d848[_0x4a04c8(0x1eb)]),_0x4fb3fe=await this[_0x4a04c8(0x210)][_0x4a04c8(0x198)]({'where':{'id':(0x0,typeorm_2['In'])(_0x536a45)},'select':['id',_0x4a04c8(0x1f3),_0x4a04c8(0x23c),_0x4a04c8(0x226)]});return{'count':_0x5c15dc,'rows':(0x0,date_1[_0x4a04c8(0x19d)])(_0x3153a0['reverse']())['map'](_0x327dd7=>{const _0x5a064e=_0x4a04c8;return _0x327dd7['originalImgUrl']&&_0x327dd7[_0x5a064e(0x1f7)][_0x5a064e(0x202)](_0x5a064e(0x1e3))&&_0x36d4dc&&(_0x327dd7[_0x5a064e(0x1f7)]=_0x327dd7[_0x5a064e(0x1f7)][_0x5a064e(0x18d)]('https://cdn.discordapp.com',_0x36d4dc)),_0x327dd7[_0x5a064e(0x1d7)]=_0x4fb3fe['find'](_0x3ef336=>_0x3ef336['id']===_0x327dd7['userId']),_0x327dd7;})};}async['adminDrawList'](_0x40832b){const _0x490a75=_0x52eeff,{page:page=0x1,size:size=0xa,sysRec:_0x358803,userId:_0x4dc145,status:_0x693c83}=_0x40832b,_0x2dc40b={};_0x358803&&Object[_0x490a75(0x1a1)](_0x2dc40b,{'sysRec':_0x358803}),_0x4dc145&&Object[_0x490a75(0x1a1)](_0x2dc40b,{'userId':_0x4dc145}),_0x693c83&&Object['assign'](_0x2dc40b,{'status':_0x693c83});const [_0x58fdc5,_0x13ca8e]=await this[_0x490a75(0x1a9)][_0x490a75(0x1fa)]({'where':_0x2dc40b,'skip':(page-0x1)*size,'take':size,'order':{'id':'DESC'}}),_0x3e9650=await this['getMjImageProxyUrl'](),_0x571365=_0x58fdc5[_0x490a75(0x217)](_0x5b0984=>_0x5b0984['userId']),_0x1eb410=await this[_0x490a75(0x210)][_0x490a75(0x198)]({'where':{'id':(0x0,typeorm_2['In'])(_0x571365)},'select':['id',_0x490a75(0x1f3),_0x490a75(0x23c),_0x490a75(0x226)]});return{'count':_0x13ca8e,'rows':(0x0,date_1[_0x490a75(0x19d)])(_0x58fdc5)[_0x490a75(0x217)](_0x676100=>{const _0x45d9ab=_0x490a75;return _0x676100['originalImgUrl']&&_0x676100[_0x45d9ab(0x1f7)][_0x45d9ab(0x202)](_0x45d9ab(0x1e3))&&_0x3e9650&&(_0x676100['originalImgUrl']=_0x676100[_0x45d9ab(0x1f7)]['replace'](_0x45d9ab(0x1e3),_0x3e9650)),_0x676100[_0x45d9ab(0x1d7)]=_0x1eb410[_0x45d9ab(0x198)](_0x29a774=>_0x29a774['id']===_0x676100[_0x45d9ab(0x1eb)]),_0x676100;})};}async['delItem'](_0x549422,_0x5a2cdd){const _0x4eb580=_0x52eeff,{id:_0x34ed61}=_0x549422[_0x4eb580(0x264)],{id:_0x14f8c2}=_0x5a2cdd,_0x5429eb=await this[_0x4eb580(0x1a9)][_0x4eb580(0x20f)]({'where':{'id':_0x14f8c2}});if(!_0x5429eb)throw new common_1[(_0x4eb580(0x19b))](_0x4eb580(0x1e6),common_1[_0x4eb580(0x185)][_0x4eb580(0x186)]);const {userId:_0x63b5d6}=_0x5429eb;if(_0x34ed61!==_0x63b5d6)throw new common_1[(_0x4eb580(0x19b))](_0x4eb580(0x240),common_1[_0x4eb580(0x185)][_0x4eb580(0x186)]);return await this[_0x4eb580(0x1a9)][_0x4eb580(0x1bb)]({'id':_0x14f8c2},{'isDelete':-0x1}),!![];}async[_0x52eeff(0x183)](_0x371c8b,_0x552dff){const _0x4d280a=_0x52eeff,{id:_0x4f8f49}=_0x371c8b[_0x4d280a(0x264)],{page:page=0x1,size:size=0xa,sysRec:_0x59562a,status:_0x3a80a2}=_0x552dff,_0x16bdd2={'userId':_0x4f8f49,'isDelete':0x1};_0x59562a&&(_0x16bdd2[_0x4d280a(0x263)]=_0x59562a),_0x3a80a2&&(_0x16bdd2[_0x4d280a(0x1c0)]=_0x3a80a2);const [_0xa46cd3,_0x5d737a]=await this[_0x4d280a(0x1a9)][_0x4d280a(0x1fa)]({'where':_0x16bdd2,'skip':(page-0x1)*size,'take':size,'order':{'id':_0x4d280a(0x21d)}}),_0x376114=await this['getMjImageProxyUrl']();return{'count':_0x5d737a,'rows':(0x0,date_1['formatCreateOrUpdateDate'])(_0xa46cd3[_0x4d280a(0x235)]())[_0x4d280a(0x217)](_0x389dec=>{const _0x2b073a=_0x4d280a;return _0x389dec[_0x2b073a(0x1f7)]&&_0x389dec['originalImgUrl'][_0x2b073a(0x202)]('https://cdn.discordapp.com')&&_0x376114&&(_0x389dec['originalImgUrl']=_0x389dec[_0x2b073a(0x1f7)][_0x2b073a(0x18d)](_0x2b073a(0x1e3),_0x376114)),_0x389dec;})};}async[_0x52eeff(0x257)](_0x565128){const _0xda6314=_0x52eeff;try{process[_0xda6314(0x1e0)]['DEBUG']==='1'&&console[_0xda6314(0x244)](_0xda6314(0x215),JSON[_0xda6314(0x24a)](_0x565128));const _0x14ad1a=_0x565128===null||_0x565128===void 0x0?void 0x0:_0x565128['id'];if(!_0x14ad1a)return;const {id:_0x27ea0e,properties:_0x15b1d6,action:_0x333afe,status:_0x1bc9bd,promptEn:_0x5257fc,description:_0x19b1a4,submitTime:_0x1c3a4b,startTime:_0x1b86e2,finishTime:_0x172a0b,progress:_0x590b0c,imageUrl:_0x50724a,failReason:_0x44d8d5,state:_0x2c7e7c,buttons:_0x52e770}=_0x565128,{discordInstanceId:_0x1645f8,finalPrompt:_0x2d714e,messageContent:_0x2d13de}=_0x15b1d6,_0x385732={'discordInstanceId':_0x1645f8,'action':_0x333afe,'status':_0x1bc9bd,'promptEn':_0x2d714e,'requestTextTips':_0x19b1a4,'requestErrTextTips':_0x44d8d5,'submitTime':_0x1c3a4b,'startTime':_0x1b86e2,'finishTime':_0x172a0b,'progress':_0x590b0c,'originalImgUrl':_0x50724a,'state':_0x2c7e7c,'buttons':JSON[_0xda6314(0x24a)](_0x52e770),'detail':JSON[_0xda6314(0x24a)](_0x565128),'messageContent':_0x2d13de};await this[_0xda6314(0x1a9)][_0xda6314(0x1bb)]({'result':_0x27ea0e},_0x385732);if(_0x1bc9bd==='SUCCESS'){const [_0x5c8c3d,_0x5d22a5]=_0x2c7e7c[_0xda6314(0x20a)]('|'),_0x201184=await this['getMjImageProxyUrl'](),_0x3bf6fe=_0x201184?_0x50724a[_0xda6314(0x18d)](_0xda6314(0x1e3),_0x201184):_0x50724a,{width:_0x2d5ad9,height:_0x3c2124}=await this['getImageDimensionsFromUrl'](_0x3bf6fe);await this[_0xda6314(0x1a9)][_0xda6314(0x1bb)]({'result':_0x27ea0e},{'width':_0x2d5ad9,'height':_0x3c2124});}if(_0x1bc9bd===_0xda6314(0x1d1)){const [_0x1bf59e,_0x31d38a]=_0x2c7e7c[_0xda6314(0x20a)]('|');await this['userBalanceService'][_0xda6314(0x228)](_0x1bf59e,_0x31d38a);}}catch(_0x25931f){console[_0xda6314(0x244)](_0xda6314(0x241),_0x25931f);}}async[_0x52eeff(0x263)](_0x36228f,_0x197fd5){const _0x17635c=_0x52eeff,{id:_0x118560}=_0x197fd5;if(!_0x118560)throw new common_1[(_0x17635c(0x19b))](_0x17635c(0x242),common_1['HttpStatus'][_0x17635c(0x186)]);const _0x5f3021=await this[_0x17635c(0x1a9)][_0x17635c(0x20f)]({'where':{'id':_0x118560}});if(!_0x5f3021)throw new common_1[(_0x17635c(0x19b))](_0x17635c(0x1e6),common_1[_0x17635c(0x185)][_0x17635c(0x186)]);const {originalImgUrl:_0x114cee,sysRec:_0x1116c0}=_0x5f3021;if(Number(_0x1116c0)===0x1)return await this['drawEntity'][_0x17635c(0x1bb)]({'id':_0x118560},{'sysRec':'-1'}),_0x17635c(0x26d);else{const _0x50c8a9=await this['getMjImageProxyUrl'](),_0x1e401a=_0x114cee&&_0x50c8a9?_0x114cee[_0x17635c(0x18d)](_0x17635c(0x1e3),_0x50c8a9):_0x114cee,{width:_0x5bd301,height:_0x526271}=await this['getImageDimensionsFromUrl'](_0x1e401a);return await this['drawEntity'][_0x17635c(0x1bb)]({'id':_0x118560},{'sysRec':'1','width':_0x5bd301,'height':_0x526271}),_0x17635c(0x1dd);}}async[_0x52eeff(0x23e)](_0x3be7bc,_0x2ee01d){const _0x9ef1a3=_0x52eeff,{id:_0x5bf4f1}=_0x2ee01d;if(!_0x5bf4f1)throw new common_1[(_0x9ef1a3(0x19b))]('id不能为空',common_1[_0x9ef1a3(0x185)][_0x9ef1a3(0x186)]);const _0x35db49=await this[_0x9ef1a3(0x1a9)]['findOne']({'where':{'id':_0x5bf4f1}});if(!_0x35db49)throw new common_1[(_0x9ef1a3(0x19b))](_0x9ef1a3(0x1e6),common_1[_0x9ef1a3(0x185)]['BAD_REQUEST']);return await this[_0x9ef1a3(0x1a9)][_0x9ef1a3(0x194)]({'id':_0x5bf4f1}),'删除成功';}async[_0x52eeff(0x243)](_0x256762,_0x2fd820){const _0xad3b95=_0x52eeff;var _0x422d88,_0x459f39,_0x51f026,_0x28f0cc,_0x44a69b,_0x23d55f;await this[_0xad3b95(0x261)](_0x256762,_0x2fd820),await this[_0xad3b95(0x1ab)](_0x256762[_0xad3b95(0x264)]['id']);try{const {id:_0x2439bb}=_0x256762[_0xad3b95(0x264)],{autoOptimize:_0x57ac1d,prompt:_0x2193d4,taskType:_0x433b13,speed:_0x4292f7,version:_0x2ca808,quality:_0x1c9e51,chaos:_0x112e77,stylize:_0x3c236f,style:_0x5a1e2a,scale:_0x293435,model:_0x4dba55,seed:_0x4ad1ea,iw:_0x1adefb,referencePic:_0x310c46,no:_0x5177fc,cameraShot:_0x2a63f8,light:_0x47a78e,view:_0x22b963,autoTranslate:_0x3069f0,customInstruct:_0x140bb9}=_0x2fd820;if(Number(_0x433b13)===0x4){const {version:_0x2af21c}=_0x2fd820;return await this['notifyDalleDraw'](_0x256762,_0x2fd820);}let _0x751d1e=_0x2193d4;_0x57ac1d&&!(_0x2fd820===null||_0x2fd820===void 0x0?void 0x0:_0x2fd820[_0xad3b95(0x1fc)])&&(_0x751d1e=await this['chatgptService']['chatGlobaltools']({'prompt':'现在请你担任Ai绘画的prompt\x20creator，主要任务是我会给您一个主题，然后请你根据主题\x20来书写提示词，提示词的格式如下：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Style\x20+\x20Subject\x20+\x20Setting\x20+\x20Composition\x20+\x20Lighting\x20+\x20Additional\x20Info\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Style:\x20Photo\x20of\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Subject:An\x20astronaut\x20in\x20a\x20white\x20space\x20suit,\x20helmet\x20visor\x20reflecting\x20stars,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Setting:\x20Standing\x20on\x20a\x20moon\x20with\x20Earth\x20visible\x20in\x20the\x20starry\x20sky,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Composition:Astronaut\x20centered,\x20Earth\x20in\x20the\x20background,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Lighting:Bright\x20sunlight\x20with\x20soft\x20moonlight\x20reflections,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Additional\x20Info:\x20Moon\x20rocks\x20and\x20small\x20craters\x20nearby,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20参考上述的模板、将我给你的这段内容进行优化、对照上面格式、按着我的这段话发散思维、最后返回英文格式、不要返回其他任何东西、请优化这段内容\x20'+_0x2193d4}));_0x3069f0&&!(_0x2fd820===null||_0x2fd820===void 0x0?void 0x0:_0x2fd820['customInstruct'])&&(_0x751d1e=await this[_0xad3b95(0x246)][_0xad3b95(0x1d0)]({'prompt':_0xad3b95(0x19e)+_0x2193d4}));const _0xcff405=await this[_0xad3b95(0x207)](Object['assign'](Object[_0xad3b95(0x1a1)]({},_0x2fd820),{'parsePrompt':_0x751d1e})),_0x133e1d=await this[_0xad3b95(0x21a)]('mjBlendImageMoney'),_0x199c37={'botType':'MID_JOURNEY','prompt':_0xcff405,'base64Array':_0x310c46,'notifyHook':await this[_0xad3b95(0x1a5)](),'state':_0x256762[_0xad3b95(0x264)]['id']+'|'+_0x133e1d},_0x104913=await(await this['getAxiosInstance']())['post'](_0xad3b95(0x220),_0x199c37),_0x3f1443=_0x104913===null||_0x104913===void 0x0?void 0x0:_0x104913[_0xad3b95(0x20e)];console[_0xad3b95(0x244)](_0xad3b95(0x197),JSON[_0xad3b95(0x24a)](_0x104913===null||_0x104913===void 0x0?void 0x0:_0x104913['data']));const {code:_0xd754a6,result:_0x20f34a,discordInstanceId:_0x329497}=_0x3f1443;if(_0xd754a6===0x1){const _0x2085fa={'drawType':0x1,'taskType':_0x433b13,'status':_0xad3b95(0x1ae),'prompt':_0x2193d4,'promptEn':_0x751d1e,'fullPrompt':_0xcff405,'userId':_0x2439bb,'result':_0x20f34a,'discordInstanceId':_0x329497,'speed':_0x4292f7,'version':_0x2ca808,'quality':_0x1c9e51,'chaos':_0x112e77,'stylize':_0x3c236f,'style':_0x5a1e2a,'scale':_0x293435[_0xad3b95(0x20b)](':'),'model':_0x4dba55,'seed':_0x4ad1ea,'iw':_0x1adefb,'referencePic':'','no':_0x5177fc,'cameraShot':_0x2a63f8,'light':_0x47a78e,'view':_0x22b963};await this[_0xad3b95(0x1a9)][_0xad3b95(0x21e)](_0x2085fa),await this['userBalanceService'][_0xad3b95(0x219)](_0x256762[_0xad3b95(0x264)]['id'],_0xad3b95(0x1f8),_0x133e1d,_0x133e1d);}else{const _0x3dc8a3=(_0x3f1443===null||_0x3f1443===void 0x0?void 0x0:_0x3f1443[_0xad3b95(0x227)])||(_0x3f1443===null||_0x3f1443===void 0x0?void 0x0:_0x3f1443[_0xad3b95(0x1c7)])||_0xad3b95(0x1b4);(0x0,utils_2[_0xad3b95(0x21f)])({'NineErrMsg':_0x3dc8a3});}}catch(_0x428a6b){console[_0xad3b95(0x244)]('textToImage\x20error:\x20',(_0x422d88=_0x428a6b===null||_0x428a6b===void 0x0?void 0x0:_0x428a6b[_0xad3b95(0x1d9)])===null||_0x422d88===void 0x0?void 0x0:_0x422d88[_0xad3b95(0x20e)]);const _0x2e31a9=(_0x428a6b===null||_0x428a6b===void 0x0?void 0x0:_0x428a6b['NineErrMsg'])||((_0x28f0cc=(_0x51f026=(_0x459f39=_0x428a6b===null||_0x428a6b===void 0x0?void 0x0:_0x428a6b[_0xad3b95(0x1d9)])===null||_0x459f39===void 0x0?void 0x0:_0x459f39['data'])===null||_0x51f026===void 0x0?void 0x0:_0x51f026[_0xad3b95(0x1c7)])===null||_0x28f0cc===void 0x0?void 0x0:_0x28f0cc[_0xad3b95(0x25c)])||((_0x23d55f=(_0x44a69b=_0x428a6b===null||_0x428a6b===void 0x0?void 0x0:_0x428a6b[_0xad3b95(0x1d9)])===null||_0x44a69b===void 0x0?void 0x0:_0x44a69b[_0xad3b95(0x20e)])===null||_0x23d55f===void 0x0?void 0x0:_0x23d55f[_0xad3b95(0x1c7)])||_0xad3b95(0x1b4);throw new common_1[(_0xad3b95(0x19b))](_0x2e31a9,common_1[_0xad3b95(0x185)][_0xad3b95(0x186)]);}}async['drawAction'](_0x4e2f5e,_0x28f820){const _0x280881=_0x52eeff;var _0x21877c,_0x289ee9,_0x55817b,_0x1b86e8;const {id:_0x88226d}=_0x4e2f5e['user'],{customId:_0x2be295,taskId:_0x3ec2a9,label:_0x25c03f}=_0x28f820;await this[_0x280881(0x1ab)](_0x4e2f5e[_0x280881(0x264)]['id']);let _0x3774d0=0x1;_0x2be295[_0x280881(0x202)](_0x280881(0x269))&&(_0x3774d0=await this['getDrawDecutConfig'](_0x280881(0x1f9)));_0x2be295[_0x280881(0x202)](_0x280881(0x1bf))&&(_0x3774d0=await this[_0x280881(0x21a)](_0x280881(0x1d3)));_0x2be295['includes'](_0x280881(0x1dc))&&(_0x3774d0=await this[_0x280881(0x21a)](_0x280881(0x1e1)));_0x2be295[_0x280881(0x202)](_0x280881(0x268))&&(_0x3774d0=await this['getDrawDecutConfig'](_0x280881(0x1f5)));(_0x2be295['includes']('Outpaint')||_0x2be295[_0x280881(0x202)](_0x280881(0x1aa)))&&(_0x3774d0=await this[_0x280881(0x21a)](_0x280881(0x1df)));_0x2be295[_0x280881(0x202)](_0x280881(0x1ed))&&(_0x3774d0=await this[_0x280881(0x21a)](_0x280881(0x191)));await this[_0x280881(0x184)][_0x280881(0x1de)](_0x4e2f5e,_0x280881(0x1f8),_0x3774d0);try{const _0xa85c52=await this[_0x280881(0x1a9)][_0x280881(0x20f)]({'where':{'result':_0x3ec2a9}});!_0xa85c52&&(0x0,utils_2[_0x280881(0x21f)])({'NineErrMsg':_0x280881(0x1ec)});_0xa85c52[_0x280881(0x1eb)]!==_0x88226d&&(0x0,utils_2[_0x280881(0x21f)])({'NineErrMsg':_0x280881(0x234)});const _0x52f504={'customId':_0x2be295,'taskId':_0x3ec2a9,'notifyHook':await this[_0x280881(0x1a5)](),'state':_0x4e2f5e['user']['id']+'|'+_0x3774d0},_0x1dca00=await(await this[_0x280881(0x1b2)]())[_0x280881(0x1fd)](_0x280881(0x22f),_0x52f504),{code:_0x287417,result:_0x2864ed,discordInstanceId:_0x3285f8}=_0x1dca00===null||_0x1dca00===void 0x0?void 0x0:_0x1dca00[_0x280881(0x20e)];if([0x1,0x15][_0x280881(0x202)](_0x287417)){if(_0x287417===0x15){!_0x28f820['zoomPrompt']&&!_0x28f820[_0x280881(0x1c6)]&&(0x0,utils_2['throwError'])({'NineErrMsg':'确认弹窗任务失败、缺失必要参数！'});const _0x3c849c={'taskId':_0x2864ed};_0x28f820['zoomPrompt']&&(_0x3c849c[_0x280881(0x213)]=_0x28f820[_0x280881(0x272)]),_0x28f820['maskBase64']&&(_0x3c849c[_0x280881(0x1c6)]=_0x28f820[_0x280881(0x1c6)]);const _0x288913=Object[_0x280881(0x1a1)]({'notifyHook':await this['getNotifyUrl'](),'state':_0x4e2f5e[_0x280881(0x264)]['id']+'|'+_0x3774d0},_0x3c849c),_0x62d74e=await(await this[_0x280881(0x1b2)]())[_0x280881(0x1fd)](_0x280881(0x22d),_0x288913);console['log'](_0x280881(0x262),JSON[_0x280881(0x24a)](_0x62d74e[_0x280881(0x20e)]));}await this['userBalanceService'][_0x280881(0x219)](_0x4e2f5e['user']['id'],_0x280881(0x1f8),_0x3774d0,_0x3774d0);const {operateButtons:_0x19540b,prompt:_0x2d99e0,promptEn:_0x1af7ef,fullPrompt:_0xec0be9,speed:_0x147b26,drawType:_0x267c97,version:_0x529374,model:_0x46c356,scale:_0xa430ed,quality:_0x46870b,chaos:_0x4328ab,stylize:_0x12fed4,cameraShot:_0x5de28f,iw:_0x1205e4,light:_0x4b34b5,no:_0x501ee9,view:_0x412d92}=_0xa85c52;let _0x21a4c9=[];try{_0x21a4c9=_0x19540b?[...JSON['parse'](_0x19540b),_0x2be295]:[_0x2be295];}catch(_0xd84161){_0x21a4c9=[_0x2be295];}await this['drawEntity']['update']({'result':_0x3ec2a9},{'operateButtons':JSON[_0x280881(0x24a)](_0x21a4c9)});const _0x12649f=await this['drawEntity'][_0x280881(0x21e)]({'version':_0x529374,'model':_0x46c356,'scale':_0xa430ed,'quality':_0x46870b,'chaos':_0x4328ab,'stylize':_0x12fed4,'drawType':_0x267c97,'speed':_0x147b26,'status':_0x280881(0x1ae),'prompt':_0x2d99e0,'promptEn':_0x1af7ef,'fullPrompt':_0xec0be9,'customId':_0x2be295,'userId':_0x88226d,'result':_0x2864ed,'discordInstanceId':_0x3285f8,'cameraShot':_0x5de28f,'iw':_0x1205e4,'light':_0x4b34b5,'no':_0x501ee9,'view':_0x412d92});}else{console[_0x280881(0x244)](_0x280881(0x259),_0x1dca00===null||_0x1dca00===void 0x0?void 0x0:_0x1dca00[_0x280881(0x20e)]);let _0x5e5be3=((_0x21877c=_0x1dca00===null||_0x1dca00===void 0x0?void 0x0:_0x1dca00[_0x280881(0x20e)])===null||_0x21877c===void 0x0?void 0x0:_0x21877c[_0x280881(0x227)])||'提交Action任务失败、请检查系统日志';_0x5e5be3===_0x280881(0x22a)&&(_0x5e5be3=_0x280881(0x26b)),console[_0x280881(0x244)]('NineErrMsg:\x20',_0x5e5be3),(0x0,utils_2[_0x280881(0x21f)])({'NineErrMsg':_0x5e5be3});}}catch(_0x18119f){console[_0x280881(0x244)](_0x280881(0x231),_0x18119f);const _0xa68530=(_0x18119f===null||_0x18119f===void 0x0?void 0x0:_0x18119f[_0x280881(0x206)])||((_0x1b86e8=(_0x55817b=(_0x289ee9=_0x18119f===null||_0x18119f===void 0x0?void 0x0:_0x18119f['response'])===null||_0x289ee9===void 0x0?void 0x0:_0x289ee9[_0x280881(0x20e)])===null||_0x55817b===void 0x0?void 0x0:_0x55817b['error'])===null||_0x1b86e8===void 0x0?void 0x0:_0x1b86e8[_0x280881(0x25c)])||_0x280881(0x1b4);throw new common_1[(_0x280881(0x19b))](_0xa68530,common_1[_0x280881(0x185)][_0x280881(0x186)]);}}async[_0x52eeff(0x1ca)](_0x3b1966,_0x3e27f6){const _0x104a40=_0x52eeff;var _0x3adec7,_0x5311c4,_0x3c38f3,_0x486882,_0x530994,_0x11b209;const {id:_0x4ad932}=_0x3b1966['user'],{base64Arr:_0x401afa,dimensions:_0xf232ed}=_0x3e27f6;await this[_0x104a40(0x1ab)](_0x3b1966['user']['id']);if(!_0x401afa||_0x401afa[_0x104a40(0x199)]<0x2)throw new common_1[(_0x104a40(0x19b))](_0x104a40(0x24d),common_1[_0x104a40(0x185)][_0x104a40(0x186)]);if(_0x401afa[_0x104a40(0x199)]>0x6)throw new common_1[(_0x104a40(0x19b))]('混图任务最多支持6张图片!',common_1[_0x104a40(0x185)][_0x104a40(0x186)]);const _0x26e142=await this[_0x104a40(0x21a)]('mjBlendImageMoney');await this[_0x104a40(0x184)][_0x104a40(0x1de)](_0x3b1966,'mjDraw',_0x26e142);try{const _0x4bc50a={'botType':_0x104a40(0x1d4),'base64Array':_0x401afa,'dimensions':_0xf232ed,'notifyHook':await this['getNotifyUrl'](),'state':_0x3b1966[_0x104a40(0x264)]['id']+'|'+_0x26e142},_0x5d1007=await(await this[_0x104a40(0x1b2)]())[_0x104a40(0x1fd)]('/mj/submit/blend',_0x4bc50a);console[_0x104a40(0x244)](_0x104a40(0x24b),_0x5d1007[_0x104a40(0x20e)]);const {data:_0x305f40}=_0x5d1007,{code:_0x2b6c31,result:_0x4867b8,discordInstanceId:_0x43bc74}=_0x305f40;if(_0x2b6c31===0x1){const _0x48e19e=await this[_0x104a40(0x1a9)]['save']({'drawType':0x1,'status':_0x104a40(0x1ae),'mixPic':JSON[_0x104a40(0x24a)]([]),'userId':_0x4ad932,'result':_0x4867b8,'discordInstanceId':_0x43bc74,'speed':_0x104a40(0x222),'prompt':'正在执行混图任务中......','promptEn':_0x104a40(0x1f4),'fullPrompt':_0x104a40(0x1f4)});await this[_0x104a40(0x184)][_0x104a40(0x219)](_0x3b1966[_0x104a40(0x264)]['id'],'mjDraw',_0x26e142,_0x26e142);}else{console[_0x104a40(0x244)]('drawSwapFaceAction\x20code\x20!=\x201:\x20\x20441',_0x5d1007===null||_0x5d1007===void 0x0?void 0x0:_0x5d1007[_0x104a40(0x20e)]);let _0x408191=((_0x3adec7=_0x5d1007===null||_0x5d1007===void 0x0?void 0x0:_0x5d1007['data'])===null||_0x3adec7===void 0x0?void 0x0:_0x3adec7[_0x104a40(0x227)])||'执行混图任务失败、请检查系统日志';_0x408191===_0x104a40(0x22a)&&(_0x408191='管理员配置模型余额不足\x20请联系管理员！'),console['log']('NineErrMsg:\x20',_0x408191),(0x0,utils_2[_0x104a40(0x21f)])({'NineErrMsg':_0x408191});}}catch(_0x5a0456){console['log'](_0x104a40(0x271),_0x5a0456);const _0x2d70f3=(_0x5a0456===null||_0x5a0456===void 0x0?void 0x0:_0x5a0456[_0x104a40(0x206)])||((_0x486882=(_0x3c38f3=(_0x5311c4=_0x5a0456===null||_0x5a0456===void 0x0?void 0x0:_0x5a0456[_0x104a40(0x1d9)])===null||_0x5311c4===void 0x0?void 0x0:_0x5311c4[_0x104a40(0x20e)])===null||_0x3c38f3===void 0x0?void 0x0:_0x3c38f3[_0x104a40(0x1c7)])===null||_0x486882===void 0x0?void 0x0:_0x486882[_0x104a40(0x25c)])||((_0x11b209=(_0x530994=_0x5a0456===null||_0x5a0456===void 0x0?void 0x0:_0x5a0456[_0x104a40(0x1d9)])===null||_0x530994===void 0x0?void 0x0:_0x530994['data'])===null||_0x11b209===void 0x0?void 0x0:_0x11b209[_0x104a40(0x1c7)])||_0x104a40(0x1b4);throw new common_1['HttpException'](_0x2d70f3,common_1[_0x104a40(0x185)][_0x104a40(0x186)]);}}async['drawSwapDace'](_0x58a584,_0x31d92d){const _0x3ffa91=_0x52eeff;var _0x109617,_0x4f8532,_0x3131a8,_0x3f22dd,_0x2258fa,_0x1b834f;const {id:_0x58918c}=_0x58a584[_0x3ffa91(0x264)],{sourceBase:_0x2039c3,targetBase:_0x3d63d9}=_0x31d92d;await this[_0x3ffa91(0x1ab)](_0x58a584['user']['id']);const _0x45c536=await(0x0,utils_1[_0x3ffa91(0x22b)])([_0x2039c3,_0x3d63d9]);if(_0x45c536[_0x3ffa91(0x199)]!==0x2)throw new common_1[(_0x3ffa91(0x19b))](_0x3ffa91(0x1cd),common_1[_0x3ffa91(0x185)][_0x3ffa91(0x186)]);const _0x58c5f8=await this[_0x3ffa91(0x21a)](_0x3ffa91(0x1d2));await this[_0x3ffa91(0x184)][_0x3ffa91(0x1de)](_0x58a584,_0x3ffa91(0x1f8),_0x58c5f8);try{const _0x2c3c89={'sourceBase64':_0x2039c3,'targetBase64':_0x3d63d9,'accountFilter':{'instanceId':''},'notifyHook':await this[_0x3ffa91(0x1a5)](),'state':_0x58a584[_0x3ffa91(0x264)]['id']+'|'+_0x58c5f8},_0x5d348f=await(await this[_0x3ffa91(0x1b2)]())[_0x3ffa91(0x1fd)](_0x3ffa91(0x1f1),_0x2c3c89);console[_0x3ffa91(0x244)](_0x3ffa91(0x1e8),_0x5d348f[_0x3ffa91(0x20e)]);const {data:_0x31bb18}=_0x5d348f,{code:_0x23eaad,result:_0x1eae84,discordInstanceId:_0x25ff97}=_0x31bb18,_0x11e50d=[];if(_0x23eaad===0x1){const _0x3b4132=await this[_0x3ffa91(0x1a9)][_0x3ffa91(0x21e)]({'drawType':0x1,'status':_0x3ffa91(0x1ae),'swapFacePic':JSON[_0x3ffa91(0x24a)](_0x11e50d),'userId':_0x58918c,'result':_0x1eae84,'discordInstanceId':_0x25ff97,'speed':_0x3ffa91(0x222),'prompt':_0x3ffa91(0x1da),'promptEn':_0x3ffa91(0x236),'fullPrompt':_0x3ffa91(0x236)});await this['userBalanceService'][_0x3ffa91(0x219)](_0x58a584[_0x3ffa91(0x264)]['id'],_0x3ffa91(0x1f8),_0x58c5f8,_0x58c5f8);}else{console[_0x3ffa91(0x244)]('drawSwapFaceAction\x20code\x20!=\x201:\x20\x20441',_0x5d348f===null||_0x5d348f===void 0x0?void 0x0:_0x5d348f['data']);let _0x3c7a2f=((_0x109617=_0x5d348f===null||_0x5d348f===void 0x0?void 0x0:_0x5d348f[_0x3ffa91(0x20e)])===null||_0x109617===void 0x0?void 0x0:_0x109617[_0x3ffa91(0x227)])||_0x3ffa91(0x18b);_0x3c7a2f===_0x3ffa91(0x22a)&&(_0x3c7a2f='管理员配置模型余额不足\x20请联系管理员！'),(0x0,utils_2[_0x3ffa91(0x21f)])({'NineErrMsg':_0x3c7a2f});}}catch(_0x54dde3){console[_0x3ffa91(0x244)](_0x3ffa91(0x271),_0x54dde3);const _0x3919f8=(_0x54dde3===null||_0x54dde3===void 0x0?void 0x0:_0x54dde3['NineErrMsg'])||((_0x3f22dd=(_0x3131a8=(_0x4f8532=_0x54dde3===null||_0x54dde3===void 0x0?void 0x0:_0x54dde3[_0x3ffa91(0x1d9)])===null||_0x4f8532===void 0x0?void 0x0:_0x4f8532[_0x3ffa91(0x20e)])===null||_0x3131a8===void 0x0?void 0x0:_0x3131a8['error'])===null||_0x3f22dd===void 0x0?void 0x0:_0x3f22dd[_0x3ffa91(0x25c)])||((_0x1b834f=(_0x2258fa=_0x54dde3===null||_0x54dde3===void 0x0?void 0x0:_0x54dde3[_0x3ffa91(0x1d9)])===null||_0x2258fa===void 0x0?void 0x0:_0x2258fa[_0x3ffa91(0x20e)])===null||_0x1b834f===void 0x0?void 0x0:_0x1b834f[_0x3ffa91(0x1c7)])||_0x3ffa91(0x1b4);throw new common_1[(_0x3ffa91(0x19b))](_0x3919f8,common_1[_0x3ffa91(0x185)]['BAD_REQUEST']);}}async['imgToText'](_0x4fa149,_0x454425){const _0x820b19=_0x52eeff,{id:_0x1bcb59}=_0x4fa149[_0x820b19(0x264)],{base64:_0x5564bb}=_0x454425;if(!_0x5564bb)throw new common_1['HttpException']('缺少解析图！',common_1[_0x820b19(0x185)][_0x820b19(0x186)]);await this['checkUserDrawLimit'](_0x4fa149['user']['id']);const _0x3883ee=await this[_0x820b19(0x21a)](_0x820b19(0x224));await this[_0x820b19(0x184)][_0x820b19(0x1de)](_0x4fa149,_0x820b19(0x1f8),_0x3883ee);try{const _0x2f8789={'botType':_0x820b19(0x1d4),'base64':_0x5564bb,'notifyHook':await this[_0x820b19(0x1a5)](),'state':_0x4fa149['user']['id']+'|'+_0x3883ee},_0x2e5343=await(await this[_0x820b19(0x1b2)]())[_0x820b19(0x1fd)](_0x820b19(0x1a7),_0x2f8789);console[_0x820b19(0x244)](_0x820b19(0x1e8),_0x2e5343[_0x820b19(0x20e)]);const {data:_0x2a1b5d}=_0x2e5343,{code:_0x34ad7f,result:_0x4434b9,discordInstanceId:_0x4674ef}=_0x2a1b5d;if(_0x34ad7f===0x1){const _0x1f5daa=await this[_0x820b19(0x1a9)][_0x820b19(0x21e)]({'drawType':0x1,'status':'NOT_START','file':'','userId':_0x1bcb59,'result':_0x4434b9,'discordInstanceId':_0x4674ef,'prompt':_0x820b19(0x1c1),'promptEn':_0x820b19(0x1e7),'fullPrompt':_0x820b19(0x1e7)});await this[_0x820b19(0x184)]['deductFromBalance'](_0x4fa149['user']['id'],_0x820b19(0x1f8),_0x3883ee,_0x3883ee);}else throw new common_1['HttpException']('提交图生文任务失败、请检查系统日志',common_1[_0x820b19(0x185)][_0x820b19(0x186)]);}catch(_0x2fadd5){console[_0x820b19(0x244)](_0x820b19(0x271),_0x2fadd5);throw new common_1[(_0x820b19(0x19b))](_0x820b19(0x18f),common_1[_0x820b19(0x185)][_0x820b19(0x186)]);}}async['drawShorten'](_0x383fb9,_0x47145f){const _0x47618e=_0x52eeff;try{const {id:_0x3473c3}=_0x383fb9[_0x47618e(0x264)],{prompt:_0xc1f39b}=_0x47145f,_0x471670={'botType':_0x47618e(0x1d4),'prompt':_0xc1f39b,'notifyHook':await this[_0x47618e(0x1a5)](),'state':''},_0x15a5b7=await(await this[_0x47618e(0x1b2)]())[_0x47618e(0x1fd)]('/mj/submit/shorten',_0x471670),{data:_0x571800}=_0x15a5b7,{code:_0xffcf71,result:_0x4093ac,discordInstanceId:_0x2d6be4}=_0x571800;if(_0xffcf71===0x1){const _0x442e58=await this[_0x47618e(0x1a9)]['save']({'drawType':0x1,'status':_0x47618e(0x1ae),'prompt':_0xc1f39b,'userId':_0x3473c3,'result':_0x4093ac,'discordInstanceId':_0x2d6be4});}else throw new common_1[(_0x47618e(0x19b))]('提交任务失败、请检查系统配置',common_1[_0x47618e(0x185)][_0x47618e(0x186)]);}catch(_0x20a1db){console['log'](_0x47618e(0x271),_0x20a1db);throw new common_1[(_0x47618e(0x19b))]('提交任务失败、请检查系统配置',common_1[_0x47618e(0x185)][_0x47618e(0x186)]);}}async[_0x52eeff(0x1ba)](_0x525f6d,_0x1df7cd){const _0x2c1719=_0x52eeff;var _0x1a9720,_0x434123,_0x171d88,_0x4dc4b5,_0x1d93e1;try{const {resultId:_0x45419d}=_0x1df7cd;if(!_0x45419d)return;const _0x10eeba=await(await this[_0x2c1719(0x1b2)]())[_0x2c1719(0x21c)](_0x2c1719(0x209)+_0x45419d+'/image-seed');if(_0x10eeba[_0x2c1719(0x20e)]['code']===0x1){const _0x1bf021=_0x10eeba[_0x2c1719(0x20e)][_0x2c1719(0x252)];return await this[_0x2c1719(0x1a9)][_0x2c1719(0x1bb)]({'result':_0x45419d},{'seed':_0x1bf021}),_0x1bf021;}else(0x0,utils_2[_0x2c1719(0x21f)])({'NineErrMsg':'获取seed失败'});}catch(_0x4274e8){const _0x55b7f1=(_0x4274e8===null||_0x4274e8===void 0x0?void 0x0:_0x4274e8[_0x2c1719(0x206)])||((_0x171d88=(_0x434123=(_0x1a9720=_0x4274e8===null||_0x4274e8===void 0x0?void 0x0:_0x4274e8['response'])===null||_0x1a9720===void 0x0?void 0x0:_0x1a9720[_0x2c1719(0x20e)])===null||_0x434123===void 0x0?void 0x0:_0x434123[_0x2c1719(0x1c7)])===null||_0x171d88===void 0x0?void 0x0:_0x171d88[_0x2c1719(0x25c)])||((_0x1d93e1=(_0x4dc4b5=_0x4274e8===null||_0x4274e8===void 0x0?void 0x0:_0x4274e8[_0x2c1719(0x1d9)])===null||_0x4dc4b5===void 0x0?void 0x0:_0x4dc4b5[_0x2c1719(0x20e)])===null||_0x1d93e1===void 0x0?void 0x0:_0x1d93e1[_0x2c1719(0x1c7)])||_0x2c1719(0x1b4);throw new common_1[(_0x2c1719(0x19b))](_0x55b7f1,common_1[_0x2c1719(0x185)][_0x2c1719(0x186)]);}}async[_0x52eeff(0x256)](_0x2cfebe,_0x4e85bf){return 0x1;}async['getFormatString'](_0x546133){const _0x24122d=_0x52eeff,_0x5bbd0d=await this[_0x24122d(0x260)](_0x546133);console[_0x24122d(0x244)](_0x24122d(0x1a2),_0x5bbd0d[0x0]);if(!_0x5bbd0d||!_0x5bbd0d[_0x24122d(0x199)])return'';return _0x5bbd0d[_0x24122d(0x20b)]('\x20\x20');}async[_0x52eeff(0x260)](_0x112026){const _0x2def8e=_0x52eeff;var _0x27c670;if(!_0x112026[_0x2def8e(0x199)])return[];const _0x5526a4={'base64Array':_0x112026},_0x5f8a60=await(await this['getAxiosInstance']())[_0x2def8e(0x1fd)](_0x2def8e(0x1ea),_0x5526a4);return(_0x27c670=_0x5f8a60===null||_0x5f8a60===void 0x0?void 0x0:_0x5f8a60[_0x2def8e(0x20e)])===null||_0x27c670===void 0x0?void 0x0:_0x27c670['result'];}async[_0x52eeff(0x26a)](_0x1b0cd4,_0x8c9457){const _0x3f37ca=_0x52eeff,{id:_0x15acc9}=_0x1b0cd4[_0x3f37ca(0x264)],{prompt:_0x46e4b2,taskType:_0x20cccc,version:_0x31f415,scale:_0x4028ce,quality:_0x16706e,autoOptimize:_0x18e0f3,style:_0x4b2229}=_0x8c9457,_0x2491a8=await this[_0x3f37ca(0x1b1)][_0x3f37ca(0x1b5)]();!_0x2491a8&&(0x0,utils_2[_0x3f37ca(0x21f)])({'NineErrMsg':_0x3f37ca(0x270)});let _0x19822e=_0x46e4b2;_0x18e0f3?_0x19822e=await this[_0x3f37ca(0x246)]['chatGlobaltools']({'prompt':_0x3f37ca(0x1b3)+_0x46e4b2}):_0x19822e=await this[_0x3f37ca(0x246)][_0x3f37ca(0x1d0)]({'prompt':'请将下面这句话翻译为英文、并且只回复我英文、不要回复任何别的内容、翻译这句话\x20'+_0x46e4b2});const {key:_0x4230c1}=_0x2491a8;let _0xa4393=_0x2491a8[_0x3f37ca(0x1a0)];_0xa4393[_0x3f37ca(0x1f6)]('/')&&(_0xa4393=_0xa4393[_0x3f37ca(0x18e)](0x0,_0xa4393[_0x3f37ca(0x199)]-0x1));const _0x446fc4=_0xa4393+_0x3f37ca(0x1b9);let _0x24ffd2={};Number(_0x31f415)===0x3?_0x24ffd2={'prompt':_0x19822e,'model':_0x3f37ca(0x1cf),'size':_0x4028ce,'quality':_0x16706e,'response_format':_0x3f37ca(0x24f),'style':_0x4b2229,'n':0x1}:_0x24ffd2={'prompt':_0x19822e,'model':_0x3f37ca(0x1e9),'size':_0x4028ce,'response_format':_0x3f37ca(0x24f),'n':0x1};const _0x52a5df={'drawType':0x2,'taskType':_0x20cccc,'prompt':_0x46e4b2,'promptEn':_0x19822e,'scale':_0x4028ce,'quality':_0x16706e,'userId':_0x15acc9,'version':_0x31f415,'model':_0x3f37ca(0x25a),'fullPrompt':_0x19822e,'progress':'0%','status':_0x3f37ca(0x25f)},_0x4b5f03=await this[_0x3f37ca(0x1a9)]['save'](_0x52a5df);await this[_0x3f37ca(0x1b1)]['saveUseLog'](_0x2491a8['id'],_0x2491a8['modelTypeId'],0x0);const _0x1a3803=Number(_0x31f415)===0x2?_0x3f37ca(0x258):_0x3f37ca(0x22e),_0x3ee18a=await this[_0x3f37ca(0x21a)](_0x1a3803);return await this[_0x3f37ca(0x184)][_0x3f37ca(0x219)](_0x1b0cd4[_0x3f37ca(0x264)]['id'],_0x3f37ca(0x1f8),_0x3ee18a,_0x3ee18a),this['drawDalleAndSave']({'api':_0x446fc4,'params':_0x24ffd2,'key':_0x4230c1,'version':_0x31f415,'saveRes':_0x4b5f03,'userId':_0x15acc9,'amount':_0x3ee18a}),_0x4b5f03;}async['drawDalleAndSave']({api:_0x1693b9,params:_0x1782c5,key:_0x39fb08,version:_0x46157c,saveRes:_0x21f6dc,userId:_0x3a3069,amount:_0x184eaa}){const _0x3877cd=_0x52eeff;var _0x48ae18,_0x1021ec,_0x1aacd3,_0x2d8e26,_0xc86480,_0x1bb274,_0x4bd0a1,_0x335b1a,_0x529173,_0x411e7b;try{const {id:_0x575ba5}=_0x21f6dc,_0x3a545f=await axios_1[_0x3877cd(0x24c)][_0x3877cd(0x1fd)](_0x1693b9,_0x1782c5,{'headers':{'Authorization':_0x3877cd(0x20d)+_0x39fb08}});if(!_0x3a545f[_0x3877cd(0x20e)]['data']||!((_0x1021ec=(_0x48ae18=_0x3a545f===null||_0x3a545f===void 0x0?void 0x0:_0x3a545f['data'])===null||_0x48ae18===void 0x0?void 0x0:_0x48ae18[_0x3877cd(0x20e)])===null||_0x1021ec===void 0x0?void 0x0:_0x1021ec[_0x3877cd(0x199)])){const _0x2322ab=((_0x2d8e26=(_0x1aacd3=_0x3a545f===null||_0x3a545f===void 0x0?void 0x0:_0x3a545f[_0x3877cd(0x20e)])===null||_0x1aacd3===void 0x0?void 0x0:_0x1aacd3[_0x3877cd(0x1c7)])===null||_0x2d8e26===void 0x0?void 0x0:_0x2d8e26['message'])||((_0xc86480=_0x3a545f[_0x3877cd(0x20e)])===null||_0xc86480===void 0x0?void 0x0:_0xc86480[_0x3877cd(0x1c7)])||'提交Action任务失败、请检查系统日志';(0x0,utils_2[_0x3877cd(0x21f)])({'NineErrMsg':_0x2322ab});}const _0x593582=_0x3a545f[_0x3877cd(0x20e)][_0x3877cd(0x20e)][0x0][_0x3877cd(0x24f)]||_0x3a545f[_0x3877cd(0x20e)][_0x3877cd(0x20e)][0x0][_0x3877cd(0x223)],_0x39f4a9=_0x593582[_0x3877cd(0x18d)](/^data:image\/webp;base64,/,''),_0x5dfec8='dall-e-'+_0x46157c+'-'+uuid['v4']()[_0x3877cd(0x18e)](0x0,0xa)+_0x3877cd(0x232),_0xcb01a4=Buffer[_0x3877cd(0x1db)](_0x39f4a9,'base64'),_0x3f65d5=await this['uploadService'][_0x3877cd(0x1c4)]({'originalname':_0x5dfec8,'filename':_0x5dfec8,'base64':_0x39f4a9,'buffer':_0xcb01a4}),_0x479e41={'status':_0x3877cd(0x1bd),'progress':_0x3877cd(0x1fb),'originalImgUrl':_0x3f65d5,'url':_0x3f65d5};await this['drawEntity']['update']({'id':_0x575ba5},_0x479e41);}catch(_0x2a492d){console[_0x3877cd(0x244)]('drawDalleAndSave\x20--->:\x20',_0x2a492d===null||_0x2a492d===void 0x0?void 0x0:_0x2a492d[_0x3877cd(0x1d9)]);const _0x40d1fe=(_0x2a492d===null||_0x2a492d===void 0x0?void 0x0:_0x2a492d[_0x3877cd(0x206)])||((_0x335b1a=(_0x4bd0a1=(_0x1bb274=_0x2a492d===null||_0x2a492d===void 0x0?void 0x0:_0x2a492d[_0x3877cd(0x1d9)])===null||_0x1bb274===void 0x0?void 0x0:_0x1bb274[_0x3877cd(0x20e)])===null||_0x4bd0a1===void 0x0?void 0x0:_0x4bd0a1['error'])===null||_0x335b1a===void 0x0?void 0x0:_0x335b1a['message'])||((_0x411e7b=(_0x529173=_0x2a492d===null||_0x2a492d===void 0x0?void 0x0:_0x2a492d[_0x3877cd(0x1d9)])===null||_0x529173===void 0x0?void 0x0:_0x529173[_0x3877cd(0x20e)])===null||_0x411e7b===void 0x0?void 0x0:_0x411e7b['error'])||_0x3877cd(0x23b),_0x3c9867={'status':_0x3877cd(0x1d1),'progress':'','requestErrTextTips':_0x40d1fe};await this['userBalanceService']['drawFailRefund'](_0x3a3069,_0x184eaa),await this[_0x3877cd(0x1a9)][_0x3877cd(0x1bb)]({'id':_0x21f6dc['id']},_0x3c9867);}}async[_0x52eeff(0x204)](_0x2141be){const _0x18b681=_0x52eeff,_0x36a88b=/--\w+\s\S+/g;return _0x2141be[_0x18b681(0x18d)](_0x36a88b,'');}async[_0x52eeff(0x207)](_0x4dd130){const _0x459cfe=_0x52eeff,{parsePrompt:_0x227575,version:_0x557e3d,quality:_0x37829a,chaos:_0x2c726c,stylize:_0x293674,style:_0x314d90,scale:_0x41b557,model:_0x263769,seed:_0x5f451f,iw:_0x5b0879,referencePic:_0x4cba54,no:_0x43d65c,cameraShot:_0x5621fe,light:_0x44babc,view:_0x3f77b4}=_0x4dd130;if(_0x4dd130===null||_0x4dd130===void 0x0?void 0x0:_0x4dd130[_0x459cfe(0x1fc)])return _0x227575;let _0x37dac6=await this[_0x459cfe(0x204)](_0x227575);const _0x3a3663=[_0x5621fe,_0x44babc,_0x3f77b4][_0x459cfe(0x1c8)](_0x4858f1=>_0x4858f1)[_0x459cfe(0x20b)](',');return _0x3a3663&&(_0x37dac6=_0x37dac6+'\x20\x20'+_0x3a3663),_0x43d65c&&(_0x37dac6=_0x37dac6+'\x20--no\x20'+_0x43d65c),_0x41b557&&(_0x37dac6=_0x37dac6+_0x459cfe(0x265)+_0x41b557[_0x459cfe(0x20b)](':')),_0x5f451f&&(_0x37dac6=_0x37dac6+_0x459cfe(0x253)+_0x5f451f),_0x263769===_0x459cfe(0x18a)&&(_0x37dac6=_0x37dac6+_0x459cfe(0x189)+_0x557e3d),_0x4cba54&&_0x4cba54[_0x459cfe(0x199)]&&(_0x37dac6=_0x37dac6+_0x459cfe(0x1be)+_0x5b0879),_0x37829a&&(_0x37dac6=_0x37dac6+_0x459cfe(0x26e)+_0x37829a),_0x2c726c&&(_0x37dac6=_0x37dac6+_0x459cfe(0x193)+_0x2c726c),_0x293674&&Number(_0x557e3d)!==0x5&&(_0x37dac6=_0x37dac6+_0x459cfe(0x214)+_0x293674),_0x263769==='mj'&&(_0x37dac6=_0x37dac6+'\x20--v\x20'+_0x557e3d,Number(_0x557e3d)===0x5&&_0x314d90&&(_0x37dac6=_0x37dac6+_0x459cfe(0x190)+_0x314d90)),_0x37dac6=_0x37dac6+'\x20',_0x37dac6;}async[_0x52eeff(0x233)](_0x4a1160){const _0x45b5a3=_0x52eeff;try{const _0x10377f=await axios_1[_0x45b5a3(0x24c)][_0x45b5a3(0x21c)](_0x4a1160,{'responseType':'arraybuffer'}),_0x53d72d=Buffer[_0x45b5a3(0x1db)](_0x10377f[_0x45b5a3(0x20e)],_0x45b5a3(0x1a8)),_0x56f911=(0x0,image_size_1[_0x45b5a3(0x24c)])(_0x53d72d);return{'width':_0x56f911[_0x45b5a3(0x1c3)],'height':_0x56f911[_0x45b5a3(0x1b8)]};}catch(_0x23f3ca){return console[_0x45b5a3(0x1c7)]('Error\x20in\x20getImageDimensionsFromUrl:',_0x23f3ca),{'width':0x0,'height':0x0};}}async[_0x52eeff(0x1ac)](){const _0x4c3df3=_0x52eeff,_0x5c4787=await this['globalConfigService']['getConfigs']([_0x4c3df3(0x1e5)]);if(!_0x5c4787)return'';const _0x37c838=_0x5c4787[_0x4c3df3(0x1f6)]('/')?_0x5c4787[_0x4c3df3(0x18e)](0x0,_0x5c4787[_0x4c3df3(0x199)]-0x1):_0x5c4787;return _0x37c838;}async[_0x52eeff(0x1a5)](){const _0x5bfefe=_0x52eeff,_0x4b9ce8=await this[_0x5bfefe(0x1af)][_0x5bfefe(0x1ee)](['mjNotifyUrl']);if(!_0x4b9ce8)return'';if(_0x4b9ce8){const _0x58cc9f=_0x4b9ce8[_0x5bfefe(0x1f6)]('/')?_0x4b9ce8['slice'](0x0,_0x4b9ce8[_0x5bfefe(0x199)]-0x1):_0x4b9ce8;return _0x58cc9f+_0x5bfefe(0x26f);}}async[_0x52eeff(0x1c9)](_0x51b9a5){const _0x314687=_0x52eeff;try{const _0x35a01f=[];for(let _0x2353fd=0x0;_0x2353fd<_0x51b9a5[_0x314687(0x199)];_0x2353fd++){const _0x580ae5=_0x51b9a5[_0x2353fd],_0x9e309e=_0x314687(0x1c2)+uuid['v4']()[_0x314687(0x18e)](0x0,0xa)+_0x314687(0x232),_0x450877=Buffer[_0x314687(0x1db)](_0x580ae5,_0x314687(0x1b6)),_0x1c3716=await this[_0x314687(0x195)][_0x314687(0x1c4)]({'originalname':_0x9e309e,'filename':_0x9e309e,'base64':_0x580ae5,'buffer':_0x450877});_0x35a01f[_0x314687(0x1c5)](_0x1c3716);}return _0x35a01f;}catch(_0x19a858){return[];}}async['getDrawDecutConfig'](_0x46b445){const _0x15cfca=_0x52eeff,_0x3c0571=await this[_0x15cfca(0x1af)]['getConfigs']([_0x15cfca(0x248),'mjImageMoney',_0x15cfca(0x1b7),'mjSwapFaceImageMoney','mjUpscaleMoney',_0x15cfca(0x1f9),'mjPanMoney',_0x15cfca(0x1df),_0x15cfca(0x1e1),_0x15cfca(0x258),_0x15cfca(0x22e),_0x15cfca(0x224)]);if(Number(_0x3c0571['mjFreeUse'])===0x1)return 0x0;return _0x3c0571[_0x46b445]?Number(_0x3c0571[_0x46b445]):0x1;}async[_0x52eeff(0x261)](_0x5348cc,_0x2eaf00){const _0x56a4f5=_0x52eeff,{taskType:_0x5424e8,version:_0x16a9b9}=_0x2eaf00;let _0x3c8fd1=0x1;_0x5424e8===0x1&&(_0x3c8fd1=await this[_0x56a4f5(0x21a)](_0x56a4f5(0x23a)));_0x5424e8===0x2&&(_0x3c8fd1=await this[_0x56a4f5(0x21a)](_0x56a4f5(0x1b7)));_0x5424e8===0x3&&(_0x3c8fd1=await this[_0x56a4f5(0x21a)]('mjSwapFaceImageMoney'));if(_0x5424e8===0x4){const _0x2a8fbc=Number(_0x16a9b9)===0x2?_0x56a4f5(0x258):_0x56a4f5(0x22e);_0x3c8fd1=await this[_0x56a4f5(0x21a)](_0x2a8fbc);}await this[_0x56a4f5(0x184)]['validateBalance'](_0x5348cc,_0x56a4f5(0x1f8),_0x3c8fd1);}async[_0x52eeff(0x1ab)](_0x2783c1){const _0x39b7a6=_0x52eeff,_0x50baa4=await this[_0x39b7a6(0x1a9)][_0x39b7a6(0x230)]({'where':{'userId':_0x2783c1,'status':(0x0,typeorm_2['In'])([_0x39b7a6(0x1ae),_0x39b7a6(0x25f),_0x39b7a6(0x216)])}});console[_0x39b7a6(0x244)]('用户'+_0x2783c1+_0x39b7a6(0x225)+_0x50baa4+'\x20');const _0x481d9a=await this[_0x39b7a6(0x1af)][_0x39b7a6(0x1ee)]([_0x39b7a6(0x1ff)]),_0x661b47=_0x481d9a?Number(_0x481d9a):0x2;if(_0x50baa4>=_0x661b47)throw new common_1[(_0x39b7a6(0x19b))](_0x39b7a6(0x1ad)+_0x661b47+_0x39b7a6(0x1f0),common_1[_0x39b7a6(0x185)]['BAD_REQUEST']);}async[_0x52eeff(0x254)](_0x5a1332){const _0x84236e=_0x52eeff,{page:page=0x1,size:size=0x14,sysRec:_0x34bdae,userId:_0x5ac822,status:_0xa12e7f}=_0x5a1332,_0x3a2cb0={'isDelete':0x1};_0x34bdae&&Object['assign'](_0x3a2cb0,{'sysRec':Number(_0x34bdae)}),_0x5ac822&&Object[_0x84236e(0x1a1)](_0x3a2cb0,{'userId':_0x5ac822}),_0xa12e7f&&Object[_0x84236e(0x1a1)](_0x3a2cb0,{'status':_0xa12e7f});const [_0x2886cf,_0x145552]=await this['drawEntity'][_0x84236e(0x1fa)]({'where':_0x3a2cb0,'order':{'id':_0x84236e(0x21d)},'take':size,'skip':(page-0x1)*size}),_0x2bb6eb=await this[_0x84236e(0x1ac)]();_0x2886cf['forEach'](_0x1f1a78=>{const _0x486f14=_0x84236e;try{_0x1f1a78[_0x486f14(0x1f7)]&&_0x1f1a78[_0x486f14(0x1f7)]['includes'](_0x486f14(0x1e3))&&_0x2bb6eb&&(_0x1f1a78[_0x486f14(0x1f7)]=_0x1f1a78[_0x486f14(0x1f7)][_0x486f14(0x18d)](_0x486f14(0x1e3),_0x2bb6eb));}catch(_0x39be1d){}});const _0x2aca54={'rows':_0x2886cf,'count':_0x145552};return _0x2aca54;}async[_0x52eeff(0x18c)](_0x1cb479){const _0x39edc4=_0x52eeff,{id:_0x533a19}=_0x1cb479,_0x4358c7=await this['drawEntity'][_0x39edc4(0x20f)]({'where':{'id':_0x533a19},'select':[_0x39edc4(0x213),_0x39edc4(0x188),'id']});return _0x4358c7;}async[_0x52eeff(0x25b)](){const _0x5bbf6a=_0x52eeff,_0x95eb5d=await this[_0x5bbf6a(0x1af)][_0x5bbf6a(0x1ee)]([_0x5bbf6a(0x248),'mjImageMoney',_0x5bbf6a(0x1b7),_0x5bbf6a(0x1d2),'mjUpscaleMoney',_0x5bbf6a(0x1f9),_0x5bbf6a(0x191),_0x5bbf6a(0x1df),_0x5bbf6a(0x1e1),'dalleModel2Meney',_0x5bbf6a(0x22e),'mjDescribeMoney',_0x5bbf6a(0x1cc)]);return Number(_0x95eb5d[_0x5bbf6a(0x248)])===0x1&&Object[_0x5bbf6a(0x203)](_0x95eb5d)[_0x5bbf6a(0x22c)](_0x565582=>{const _0x1c0ecc=_0x5bbf6a;![_0x1c0ecc(0x248),'mjNotice'][_0x1c0ecc(0x202)](_0x565582)&&(_0x95eb5d[_0x565582]=0x0);}),_0x95eb5d;}async[_0x52eeff(0x23d)](){const _0x3dfd3e=_0x52eeff,_0x26659d=await this[_0x3dfd3e(0x1af)][_0x3dfd3e(0x1ee)]([_0x3dfd3e(0x1cc)]);return _0x26659d;}};DrawService=__decorate([(0x0,common_1[_0x52eeff(0x26c)])(),__param(0x1,(0x0,typeorm_1[_0x52eeff(0x212)])(draw_entity_1[_0x52eeff(0x1a4)])),__param(0x2,(0x0,typeorm_1[_0x52eeff(0x212)])(config_entity_1[_0x52eeff(0x1ce)])),__param(0x3,(0x0,typeorm_1['InjectRepository'])(user_entity_1[_0x52eeff(0x25e)])),__metadata(_0x52eeff(0x266),[upload_service_1[_0x52eeff(0x211)],typeorm_2[_0x52eeff(0x1ef)],typeorm_2[_0x52eeff(0x1ef)],typeorm_2['Repository'],chatgpt_service_1[_0x52eeff(0x250)],models_service_1[_0x52eeff(0x267)],globalConfig_service_1[_0x52eeff(0x247)],userBalance_service_1['UserBalanceService']])],DrawService),exports[_0x52eeff(0x1f2)]=DrawService;