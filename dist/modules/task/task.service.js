'use strict';const _0x4369bf=_0x5e97;(function(_0x3ac5ec,_0x5179fd){const _0x2b4a75=_0x5e97,_0x5edc70=_0x3ac5ec();while(!![]){try{const _0xc7188d=-parseInt(_0x2b4a75(0xf2))/0x1*(-parseInt(_0x2b4a75(0xfe))/0x2)+-parseInt(_0x2b4a75(0x101))/0x3+parseInt(_0x2b4a75(0x107))/0x4+-parseInt(_0x2b4a75(0x11d))/0x5+-parseInt(_0x2b4a75(0x11b))/0x6+parseInt(_0x2b4a75(0xfc))/0x7*(-parseInt(_0x2b4a75(0x108))/0x8)+parseInt(_0x2b4a75(0x111))/0x9*(parseInt(_0x2b4a75(0xec))/0xa);if(_0xc7188d===_0x5179fd)break;else _0x5edc70['push'](_0x5edc70['shift']());}catch(_0x3907e2){_0x5edc70['push'](_0x5edc70['shift']());}}}(_0x3ad9,0xc41cf));function _0x3ad9(){const _0x35283c=['EVERY_HOUR','UserBalanceEntity','getOwnPropertyDescriptor','design:returntype','__metadata','../models/models.service','getConfigWithFrontEnd','CronExpression','112GfQqzE','find','2VgUFKB','decorate','metadata','3908892xEtcTb','TaskService','./../globalConfig/globalConfig.service','refreshBaiduAccesstoken','__esModule','debug','6212476TJZLQY','154472YeqRsn','checkauth','0\x200\x20*/5\x20*\x20*','typeorm','object','../userBalance/userBalance.entity','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','checkUserMemerExpire','update','368892HNOFoJ','handleCron','then','forEach','design:paramtypes','会员已到期、清空所有余额并移除会员身份！','function','@nestjs/common','getWechatAccessToken','prototype','8030040myiIBo','userBalanceEntity','5923365WVZzcP','Cron','modelsService','__decorate','Repository','Logger','InjectRepository','EVERY_2_HOURS','EVERY_5_MINUTES','defineProperty','@nestjs/schedule','__param','610diYmBt','uplog','ModelsService','length','globalConfigService','design:type','884813wgKioZ','@nestjs/typeorm'];_0x3ad9=function(){return _0x35283c;};return _0x3ad9();}var __decorate=this&&this[_0x4369bf(0x120)]||function(_0x12aa3f,_0x37a045,_0x5f5573,_0x585dfe){const _0x8b9d9e=_0x4369bf;var _0xb8aaf7=arguments[_0x8b9d9e(0xef)],_0x34208f=_0xb8aaf7<0x3?_0x37a045:_0x585dfe===null?_0x585dfe=Object[_0x8b9d9e(0xf6)](_0x37a045,_0x5f5573):_0x585dfe,_0x350bf2;if(typeof Reflect===_0x8b9d9e(0x10c)&&typeof Reflect[_0x8b9d9e(0xff)]==='function')_0x34208f=Reflect[_0x8b9d9e(0xff)](_0x12aa3f,_0x37a045,_0x5f5573,_0x585dfe);else{for(var _0x3f3a7c=_0x12aa3f[_0x8b9d9e(0xef)]-0x1;_0x3f3a7c>=0x0;_0x3f3a7c--)if(_0x350bf2=_0x12aa3f[_0x3f3a7c])_0x34208f=(_0xb8aaf7<0x3?_0x350bf2(_0x34208f):_0xb8aaf7>0x3?_0x350bf2(_0x37a045,_0x5f5573,_0x34208f):_0x350bf2(_0x37a045,_0x5f5573))||_0x34208f;}return _0xb8aaf7>0x3&&_0x34208f&&Object[_0x8b9d9e(0x126)](_0x37a045,_0x5f5573,_0x34208f),_0x34208f;},__metadata=this&&this[_0x4369bf(0xf8)]||function(_0x5d4945,_0x4a3463){const _0x5435a1=_0x4369bf;if(typeof Reflect===_0x5435a1(0x10c)&&typeof Reflect[_0x5435a1(0x100)]===_0x5435a1(0x117))return Reflect[_0x5435a1(0x100)](_0x5d4945,_0x4a3463);},__param=this&&this[_0x4369bf(0x128)]||function(_0x11407a,_0x37c85f){return function(_0x479f10,_0x569056){_0x37c85f(_0x479f10,_0x569056,_0x11407a);};};Object[_0x4369bf(0x126)](exports,_0x4369bf(0x105),{'value':!![]}),exports[_0x4369bf(0x102)]=void 0x0;const globalConfig_service_1=require(_0x4369bf(0x103)),common_1=require(_0x4369bf(0x118)),schedule_1=require(_0x4369bf(0x127)),userBalance_entity_1=require(_0x4369bf(0x10d)),typeorm_1=require(_0x4369bf(0xf3)),typeorm_2=require(_0x4369bf(0x10b)),models_service_1=require(_0x4369bf(0xf9));function _0x5e97(_0x541cb2,_0x4fde2b){const _0x3ad93d=_0x3ad9();return _0x5e97=function(_0x5e97c7,_0x5130bf){_0x5e97c7=_0x5e97c7-0xec;let _0x2cdcb6=_0x3ad93d[_0x5e97c7];return _0x2cdcb6;},_0x5e97(_0x541cb2,_0x4fde2b);}let TaskService=class TaskService{constructor(_0x2382f2,_0x8a6471,_0x49c86e){const _0x233487=_0x4369bf;this[_0x233487(0x11c)]=_0x2382f2,this[_0x233487(0xf0)]=_0x8a6471,this[_0x233487(0x11f)]=_0x49c86e;}[_0x4369bf(0x112)](){const _0x1c4f06=_0x4369bf;common_1[_0x1c4f06(0x122)][_0x1c4f06(0x106)](_0x1c4f06(0x10e),_0x1c4f06(0x102)),this[_0x1c4f06(0xf0)][_0x1c4f06(0x119)]();}[_0x4369bf(0x109)](){}[_0x4369bf(0xed)](){const _0x1c2b3f=_0x4369bf;this[_0x1c2b3f(0xf0)][_0x1c2b3f(0xfa)]();}async['checkUserMemerExpire'](){const _0xd7bf43=_0x4369bf,_0x52bbe4=await this['userBalanceEntity'][_0xd7bf43(0xfd)]({'where':{'expirationTime':(0x0,typeorm_2['LessThanOrEqual'])(new Date())}});if(!_0x52bbe4||!_0x52bbe4[_0xd7bf43(0xef)])return;_0x52bbe4[_0xd7bf43(0x114)](_0x480daa=>{const _0x223f6a=_0xd7bf43;this[_0x223f6a(0x11c)][_0x223f6a(0x110)]({'id':_0x480daa['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x223f6a(0x113)](_0x5a8773=>{const _0x2e95b6=_0x223f6a;common_1[_0x2e95b6(0x122)]['debug'](_0x480daa['id']+_0x2e95b6(0x116),_0x2e95b6(0x102));});});}[_0x4369bf(0x104)](){const _0x5bf275=_0x4369bf;this[_0x5bf275(0x11f)]['refreshBaiduAccesstoken']();}};__decorate([(0x0,schedule_1[_0x4369bf(0x11e)])(schedule_1[_0x4369bf(0xfb)]['EVERY_HOUR']),__metadata('design:type',Function),__metadata(_0x4369bf(0x115),[]),__metadata(_0x4369bf(0xf7),void 0x0)],TaskService[_0x4369bf(0x11a)],_0x4369bf(0x112),null),__decorate([(0x0,schedule_1[_0x4369bf(0x11e)])(schedule_1[_0x4369bf(0xfb)][_0x4369bf(0xf4)]),__metadata(_0x4369bf(0xf1),Function),__metadata('design:paramtypes',[]),__metadata(_0x4369bf(0xf7),void 0x0)],TaskService[_0x4369bf(0x11a)],_0x4369bf(0x109),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x4369bf(0xfb)][_0x4369bf(0x124)]),__metadata(_0x4369bf(0xf1),Function),__metadata(_0x4369bf(0x115),[]),__metadata(_0x4369bf(0xf7),void 0x0)],TaskService[_0x4369bf(0x11a)],_0x4369bf(0xed),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression'][_0x4369bf(0x125)]),__metadata(_0x4369bf(0xf1),Function),__metadata(_0x4369bf(0x115),[]),__metadata(_0x4369bf(0xf7),Promise)],TaskService[_0x4369bf(0x11a)],_0x4369bf(0x10f),null),__decorate([(0x0,schedule_1['Cron'])(_0x4369bf(0x10a)),__metadata(_0x4369bf(0xf1),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',void 0x0)],TaskService[_0x4369bf(0x11a)],'refreshBaiduAccesstoken',null),TaskService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x4369bf(0x123)])(userBalance_entity_1[_0x4369bf(0xf5)])),__metadata(_0x4369bf(0x115),[typeorm_2[_0x4369bf(0x121)],globalConfig_service_1['GlobalConfigService'],models_service_1[_0x4369bf(0xee)]])],TaskService),exports['TaskService']=TaskService;