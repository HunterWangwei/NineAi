'use strict';const _0x348939=_0x205b;(function(_0x4ef78d,_0x521023){const _0x3babcf=_0x205b,_0x166f15=_0x4ef78d();while(!![]){try{const _0x42efce=-parseInt(_0x3babcf(0x158))/0x1+-parseInt(_0x3babcf(0x185))/0x2*(-parseInt(_0x3babcf(0x163))/0x3)+parseInt(_0x3babcf(0x166))/0x4*(parseInt(_0x3babcf(0x168))/0x5)+-parseInt(_0x3babcf(0x162))/0x6+-parseInt(_0x3babcf(0x179))/0x7+-parseInt(_0x3babcf(0x16e))/0x8+-parseInt(_0x3babcf(0x154))/0x9*(-parseInt(_0x3babcf(0x186))/0xa);if(_0x42efce===_0x521023)break;else _0x166f15['push'](_0x166f15['shift']());}catch(_0x26a885){_0x166f15['push'](_0x166f15['shift']());}}}(_0x303f,0x2b793));var __decorate=this&&this[_0x348939(0x17b)]||function(_0x1203e2,_0xfe9abe,_0x150414,_0x6289a9){const _0x3a4c49=_0x348939;var _0x113e68=arguments[_0x3a4c49(0x180)],_0x25a3ee=_0x113e68<0x3?_0xfe9abe:_0x6289a9===null?_0x6289a9=Object[_0x3a4c49(0x156)](_0xfe9abe,_0x150414):_0x6289a9,_0x2c7a82;if(typeof Reflect===_0x3a4c49(0x176)&&typeof Reflect[_0x3a4c49(0x184)]===_0x3a4c49(0x16c))_0x25a3ee=Reflect[_0x3a4c49(0x184)](_0x1203e2,_0xfe9abe,_0x150414,_0x6289a9);else{for(var _0x2d7c84=_0x1203e2[_0x3a4c49(0x180)]-0x1;_0x2d7c84>=0x0;_0x2d7c84--)if(_0x2c7a82=_0x1203e2[_0x2d7c84])_0x25a3ee=(_0x113e68<0x3?_0x2c7a82(_0x25a3ee):_0x113e68>0x3?_0x2c7a82(_0xfe9abe,_0x150414,_0x25a3ee):_0x2c7a82(_0xfe9abe,_0x150414))||_0x25a3ee;}return _0x113e68>0x3&&_0x25a3ee&&Object[_0x3a4c49(0x15d)](_0xfe9abe,_0x150414,_0x25a3ee),_0x25a3ee;},__metadata=this&&this['__metadata']||function(_0x132c94,_0x17fb51){const _0x22a7f8=_0x348939;if(typeof Reflect===_0x22a7f8(0x176)&&typeof Reflect[_0x22a7f8(0x167)]==='function')return Reflect[_0x22a7f8(0x167)](_0x132c94,_0x17fb51);},__param=this&&this['__param']||function(_0x4989a5,_0x24705f){return function(_0x52086e,_0x2bf04f){_0x24705f(_0x52086e,_0x2bf04f,_0x4989a5);};};Object[_0x348939(0x15d)](exports,_0x348939(0x17d),{'value':!![]}),exports['TaskService']=void 0x0;const globalConfig_service_1=require(_0x348939(0x170)),common_1=require(_0x348939(0x172)),schedule_1=require('@nestjs/schedule'),userBalance_entity_1=require(_0x348939(0x16d)),typeorm_1=require(_0x348939(0x171)),typeorm_2=require('typeorm'),models_service_1=require(_0x348939(0x164));function _0x205b(_0x9f3455,_0x164d5e){const _0x303f78=_0x303f();return _0x205b=function(_0x205b95,_0x107a86){_0x205b95=_0x205b95-0x154;let _0x13381c=_0x303f78[_0x205b95];return _0x13381c;},_0x205b(_0x9f3455,_0x164d5e);}let TaskService=class TaskService{constructor(_0x22ac69,_0x21f1a3,_0x48eba3){const _0x22d13b=_0x348939;this['userBalanceEntity']=_0x22ac69,this[_0x22d13b(0x187)]=_0x21f1a3,this[_0x22d13b(0x16f)]=_0x48eba3;}[_0x348939(0x157)](){const _0x45271c=_0x348939;common_1['Logger'][_0x45271c(0x188)](_0x45271c(0x15a),'TaskService'),this[_0x45271c(0x187)][_0x45271c(0x178)]();}[_0x348939(0x173)](){}['uplog'](){const _0x5390f2=_0x348939;this[_0x5390f2(0x187)][_0x5390f2(0x155)]();}async[_0x348939(0x181)](){const _0x5020ed=_0x348939,_0xcfbe32=await this['userBalanceEntity']['find']({'where':{'expirationTime':(0x0,typeorm_2['LessThanOrEqual'])(new Date())}});if(!_0xcfbe32||!_0xcfbe32[_0x5020ed(0x180)])return;_0xcfbe32[_0x5020ed(0x160)](_0x5ab0b4=>{const _0xa49067=_0x5020ed;this[_0xa49067(0x16a)][_0xa49067(0x165)]({'id':_0x5ab0b4['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})['then'](_0xb27fe6=>{const _0x3a54b2=_0xa49067;common_1['Logger'][_0x3a54b2(0x188)](_0x5ab0b4['id']+_0x3a54b2(0x159),_0x3a54b2(0x177));});});}['refreshBaiduAccesstoken'](){const _0x587803=_0x348939;this['modelsService'][_0x587803(0x183)]();}};function _0x303f(){const _0x394f61=['20kuzMZP','metadata','198225znNOIc','EVERY_5_MINUTES','userBalanceEntity','design:type','function','../userBalance/userBalance.entity','738504vLhJGy','modelsService','./../globalConfig/globalConfig.service','@nestjs/typeorm','@nestjs/common','checkauth','ModelsService','prototype','object','TaskService','getWechatAccessToken','2202879lQRtQD','design:returntype','__decorate','0\x200\x20*/5\x20*\x20*','__esModule','Cron','Repository','length','checkUserMemerExpire','EVERY_HOUR','refreshBaiduAccesstoken','decorate','2wfjCkQ','718070fjiYEJ','globalConfigService','debug','90LxjPyk','getConfigWithFrontEnd','getOwnPropertyDescriptor','handleCron','152593SyxIMi','会员已到期、清空所有余额并移除会员身份！','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','CronExpression','UserBalanceEntity','defineProperty','Injectable','design:paramtypes','forEach','uplog','1767690XAsnbP','347970KXeLWN','../models/models.service','update'];_0x303f=function(){return _0x394f61;};return _0x303f();}__decorate([(0x0,schedule_1[_0x348939(0x17e)])(schedule_1[_0x348939(0x15b)][_0x348939(0x182)]),__metadata(_0x348939(0x16b),Function),__metadata('design:paramtypes',[]),__metadata(_0x348939(0x17a),void 0x0)],TaskService['prototype'],'handleCron',null),__decorate([(0x0,schedule_1[_0x348939(0x17e)])(schedule_1[_0x348939(0x15b)][_0x348939(0x182)]),__metadata(_0x348939(0x16b),Function),__metadata('design:paramtypes',[]),__metadata(_0x348939(0x17a),void 0x0)],TaskService[_0x348939(0x175)],_0x348939(0x173),null),__decorate([(0x0,schedule_1[_0x348939(0x17e)])(schedule_1[_0x348939(0x15b)][_0x348939(0x182)]),__metadata(_0x348939(0x16b),Function),__metadata(_0x348939(0x15f),[]),__metadata(_0x348939(0x17a),void 0x0)],TaskService['prototype'],_0x348939(0x161),null),__decorate([(0x0,schedule_1[_0x348939(0x17e)])(schedule_1[_0x348939(0x15b)][_0x348939(0x169)]),__metadata('design:type',Function),__metadata(_0x348939(0x15f),[]),__metadata(_0x348939(0x17a),Promise)],TaskService[_0x348939(0x175)],_0x348939(0x181),null),__decorate([(0x0,schedule_1[_0x348939(0x17e)])(_0x348939(0x17c)),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(_0x348939(0x17a),void 0x0)],TaskService['prototype'],_0x348939(0x183),null),TaskService=__decorate([(0x0,common_1[_0x348939(0x15e)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(userBalance_entity_1[_0x348939(0x15c)])),__metadata(_0x348939(0x15f),[typeorm_2[_0x348939(0x17f)],globalConfig_service_1['GlobalConfigService'],models_service_1[_0x348939(0x174)]])],TaskService),exports[_0x348939(0x177)]=TaskService;