'use strict';const _0x107524=_0xca77;(function(_0x2239df,_0x3286a3){const _0xa1b9d5=_0xca77,_0x47f343=_0x2239df();while(!![]){try{const _0x4ba833=-parseInt(_0xa1b9d5(0x1b0))/0x1*(-parseInt(_0xa1b9d5(0x1ce))/0x2)+parseInt(_0xa1b9d5(0x1bb))/0x3*(parseInt(_0xa1b9d5(0x1d3))/0x4)+-parseInt(_0xa1b9d5(0x1bd))/0x5+-parseInt(_0xa1b9d5(0x1ca))/0x6+parseInt(_0xa1b9d5(0x1c0))/0x7*(parseInt(_0xa1b9d5(0x1b3))/0x8)+parseInt(_0xa1b9d5(0x1a7))/0x9+-parseInt(_0xa1b9d5(0x1d0))/0xa;if(_0x4ba833===_0x3286a3)break;else _0x47f343['push'](_0x47f343['shift']());}catch(_0x294f43){_0x47f343['push'](_0x47f343['shift']());}}}(_0x38b7,0x8cfa7));var __decorate=this&&this['__decorate']||function(_0x37f16b,_0x2f4bb4,_0x2de21c,_0x4aade3){const _0x4087d4=_0xca77;var _0xf3725=arguments['length'],_0x48b14c=_0xf3725<0x3?_0x2f4bb4:_0x4aade3===null?_0x4aade3=Object[_0x4087d4(0x1ae)](_0x2f4bb4,_0x2de21c):_0x4aade3,_0x5314fc;if(typeof Reflect===_0x4087d4(0x1c7)&&typeof Reflect['decorate']==='function')_0x48b14c=Reflect['decorate'](_0x37f16b,_0x2f4bb4,_0x2de21c,_0x4aade3);else{for(var _0x3b2b71=_0x37f16b[_0x4087d4(0x1cc)]-0x1;_0x3b2b71>=0x0;_0x3b2b71--)if(_0x5314fc=_0x37f16b[_0x3b2b71])_0x48b14c=(_0xf3725<0x3?_0x5314fc(_0x48b14c):_0xf3725>0x3?_0x5314fc(_0x2f4bb4,_0x2de21c,_0x48b14c):_0x5314fc(_0x2f4bb4,_0x2de21c))||_0x48b14c;}return _0xf3725>0x3&&_0x48b14c&&Object[_0x4087d4(0x1bf)](_0x2f4bb4,_0x2de21c,_0x48b14c),_0x48b14c;},__metadata=this&&this['__metadata']||function(_0x148609,_0x39e4b2){const _0x5c02ed=_0xca77;if(typeof Reflect===_0x5c02ed(0x1c7)&&typeof Reflect[_0x5c02ed(0x1b7)]===_0x5c02ed(0x1c2))return Reflect['metadata'](_0x148609,_0x39e4b2);},__param=this&&this[_0x107524(0x1b2)]||function(_0x53c533,_0x5e2ea8){return function(_0x19dc40,_0x248469){_0x5e2ea8(_0x19dc40,_0x248469,_0x53c533);};};function _0xca77(_0x440b97,_0x263c86){const _0x38b752=_0x38b7();return _0xca77=function(_0xca776d,_0x29d7d4){_0xca776d=_0xca776d-0x1a5;let _0x22529f=_0x38b752[_0xca776d];return _0x22529f;},_0xca77(_0x440b97,_0x263c86);}Object[_0x107524(0x1bf)](exports,_0x107524(0x1ab),{'value':!![]}),exports[_0x107524(0x1c1)]=void 0x0;function _0x38b7(){const _0x1578c3=['design:paramtypes','find','__esModule','handleCron','design:returntype','getOwnPropertyDescriptor','CronExpression','47668RKHpQR','@nestjs/common','__param','8VdLfWO','update','getWechatAccessToken','@nestjs/typeorm','metadata','then','EVERY_5_MINUTES','prototype','453EtmzPL','InjectRepository','1874370FDwsiv','Logger','defineProperty','5364163fMpWHV','TaskService','function','getConfigWithFrontEnd','modelsService','../userBalance/userBalance.entity','design:type','object','checkauth','LessThanOrEqual','3963168GGcmjd','forEach','length','EVERY_HOUR','16ZrBuEw','userBalanceEntity','5800610phUkJJ','../models/models.service','DrawService','11796RVquTG','会员已到期、清空所有余额并移除会员身份！','typeorm','0\x200\x20*/5\x20*\x20*','drawService','debug','globalConfigService','ModelsService','UserBalanceEntity','refreshBaiduAccesstoken','uplog','GlobalConfigService','EVERY_2_HOURS','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','Repository','taskCroppingThumbUrl','Cron','5399622Rxolap','checkUserMemerExpire'];_0x38b7=function(){return _0x1578c3;};return _0x38b7();}const globalConfig_service_1=require('./../globalConfig/globalConfig.service'),common_1=require(_0x107524(0x1b1)),schedule_1=require('@nestjs/schedule'),userBalance_entity_1=require(_0x107524(0x1c5)),typeorm_1=require(_0x107524(0x1b6)),typeorm_2=require(_0x107524(0x1d5)),models_service_1=require(_0x107524(0x1d1)),draw_service_1=require('../draw/draw.service');let TaskService=class TaskService{constructor(_0x5012b5,_0x31e32e,_0x35b2a0,_0x4dbddd){const _0x16f3d2=_0x107524;this[_0x16f3d2(0x1cf)]=_0x5012b5,this[_0x16f3d2(0x1d9)]=_0x31e32e,this[_0x16f3d2(0x1c4)]=_0x35b2a0,this[_0x16f3d2(0x1d7)]=_0x4dbddd;}['handleCron'](){const _0x367e9a=_0x107524;common_1[_0x367e9a(0x1be)][_0x367e9a(0x1d8)](_0x367e9a(0x1e0),_0x367e9a(0x1c1)),this['globalConfigService'][_0x367e9a(0x1b5)]();}['checkauth'](){}[_0x107524(0x1dd)](){const _0x1b4249=_0x107524;this['globalConfigService'][_0x1b4249(0x1c3)]();}async['checkUserMemerExpire'](){const _0x536140=_0x107524,_0x142c5a=await this[_0x536140(0x1cf)][_0x536140(0x1aa)]({'where':{'expirationTime':(0x0,typeorm_2[_0x536140(0x1c9)])(new Date())}});if(!_0x142c5a||!_0x142c5a[_0x536140(0x1cc)])return;_0x142c5a[_0x536140(0x1cb)](_0x2502b4=>{const _0x5581cb=_0x536140;this[_0x5581cb(0x1cf)][_0x5581cb(0x1b4)]({'id':_0x2502b4['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x5581cb(0x1b8)](_0x4b6a7b=>{const _0x1e46ff=_0x5581cb;common_1[_0x1e46ff(0x1be)]['debug'](_0x2502b4['id']+_0x1e46ff(0x1d4),_0x1e46ff(0x1c1));});});}['refreshBaiduAccesstoken'](){const _0x26651f=_0x107524;this[_0x26651f(0x1c4)][_0x26651f(0x1dc)]();}[_0x107524(0x1a5)](){}};__decorate([(0x0,schedule_1[_0x107524(0x1a6)])(schedule_1[_0x107524(0x1af)]['EVERY_HOUR']),__metadata(_0x107524(0x1c6),Function),__metadata(_0x107524(0x1a9),[]),__metadata(_0x107524(0x1ad),void 0x0)],TaskService['prototype'],_0x107524(0x1ac),null),__decorate([(0x0,schedule_1[_0x107524(0x1a6)])(schedule_1[_0x107524(0x1af)][_0x107524(0x1cd)]),__metadata(_0x107524(0x1c6),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',void 0x0)],TaskService[_0x107524(0x1ba)],_0x107524(0x1c8),null),__decorate([(0x0,schedule_1[_0x107524(0x1a6)])(schedule_1[_0x107524(0x1af)][_0x107524(0x1df)]),__metadata(_0x107524(0x1c6),Function),__metadata(_0x107524(0x1a9),[]),__metadata(_0x107524(0x1ad),void 0x0)],TaskService['prototype'],_0x107524(0x1dd),null),__decorate([(0x0,schedule_1[_0x107524(0x1a6)])(schedule_1[_0x107524(0x1af)][_0x107524(0x1b9)]),__metadata(_0x107524(0x1c6),Function),__metadata(_0x107524(0x1a9),[]),__metadata(_0x107524(0x1ad),Promise)],TaskService[_0x107524(0x1ba)],_0x107524(0x1a8),null),__decorate([(0x0,schedule_1[_0x107524(0x1a6)])(_0x107524(0x1d6)),__metadata(_0x107524(0x1c6),Function),__metadata(_0x107524(0x1a9),[]),__metadata(_0x107524(0x1ad),void 0x0)],TaskService[_0x107524(0x1ba)],_0x107524(0x1dc),null),__decorate([(0x0,schedule_1['Cron'])('0\x200\x20*\x20*\x20*'),__metadata(_0x107524(0x1c6),Function),__metadata(_0x107524(0x1a9),[]),__metadata('design:returntype',void 0x0)],TaskService['prototype'],_0x107524(0x1a5),null),TaskService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x107524(0x1bc)])(userBalance_entity_1[_0x107524(0x1db)])),__metadata(_0x107524(0x1a9),[typeorm_2[_0x107524(0x1e1)],globalConfig_service_1[_0x107524(0x1de)],models_service_1[_0x107524(0x1da)],draw_service_1[_0x107524(0x1d2)]])],TaskService),exports['TaskService']=TaskService;