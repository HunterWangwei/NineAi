'use strict';const _0xe7f270=_0x5b7d;function _0x5b7d(_0x1a068f,_0x34d767){const _0x167142=_0x1671();return _0x5b7d=function(_0x5b7d53,_0x44c733){_0x5b7d53=_0x5b7d53-0xae;let _0x33b654=_0x167142[_0x5b7d53];return _0x33b654;},_0x5b7d(_0x1a068f,_0x34d767);}(function(_0x292251,_0x42bf09){const _0x28ccbd=_0x5b7d,_0x4e471e=_0x292251();while(!![]){try{const _0x1d91fc=parseInt(_0x28ccbd(0xcb))/0x1*(parseInt(_0x28ccbd(0xc3))/0x2)+-parseInt(_0x28ccbd(0xba))/0x3*(-parseInt(_0x28ccbd(0xdb))/0x4)+-parseInt(_0x28ccbd(0xd8))/0x5*(-parseInt(_0x28ccbd(0xc6))/0x6)+parseInt(_0x28ccbd(0xd4))/0x7+parseInt(_0x28ccbd(0xd0))/0x8+-parseInt(_0x28ccbd(0xcf))/0x9*(parseInt(_0x28ccbd(0xd1))/0xa)+parseInt(_0x28ccbd(0xb2))/0xb*(-parseInt(_0x28ccbd(0xc5))/0xc);if(_0x1d91fc===_0x42bf09)break;else _0x4e471e['push'](_0x4e471e['shift']());}catch(_0xd68e5b){_0x4e471e['push'](_0x4e471e['shift']());}}}(_0x1671,0x1ddf3));var __decorate=this&&this[_0xe7f270(0xd3)]||function(_0x1cf076,_0x434fae,_0x9822b0,_0x5e7172){const _0x2687bf=_0xe7f270;var _0x1c7ab6=arguments[_0x2687bf(0xc4)],_0x33ef37=_0x1c7ab6<0x3?_0x434fae:_0x5e7172===null?_0x5e7172=Object[_0x2687bf(0xb7)](_0x434fae,_0x9822b0):_0x5e7172,_0x3bc2ad;if(typeof Reflect===_0x2687bf(0xbc)&&typeof Reflect[_0x2687bf(0xcd)]===_0x2687bf(0xc2))_0x33ef37=Reflect[_0x2687bf(0xcd)](_0x1cf076,_0x434fae,_0x9822b0,_0x5e7172);else{for(var _0x15052a=_0x1cf076[_0x2687bf(0xc4)]-0x1;_0x15052a>=0x0;_0x15052a--)if(_0x3bc2ad=_0x1cf076[_0x15052a])_0x33ef37=(_0x1c7ab6<0x3?_0x3bc2ad(_0x33ef37):_0x1c7ab6>0x3?_0x3bc2ad(_0x434fae,_0x9822b0,_0x33ef37):_0x3bc2ad(_0x434fae,_0x9822b0))||_0x33ef37;}return _0x1c7ab6>0x3&&_0x33ef37&&Object[_0x2687bf(0xb5)](_0x434fae,_0x9822b0,_0x33ef37),_0x33ef37;},__metadata=this&&this['__metadata']||function(_0x1f449e,_0x2844b9){const _0x14dd54=_0xe7f270;if(typeof Reflect===_0x14dd54(0xbc)&&typeof Reflect[_0x14dd54(0xda)]===_0x14dd54(0xc2))return Reflect[_0x14dd54(0xda)](_0x1f449e,_0x2844b9);},__param=this&&this['__param']||function(_0xf5e0e5,_0x5cebfe){return function(_0x3faadb,_0x5719c3){_0x5cebfe(_0x3faadb,_0x5719c3,_0xf5e0e5);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0xe7f270(0xb8)]=void 0x0;const common_1=require(_0xe7f270(0xbd));let RedisCacheService=class RedisCacheService{constructor(_0x4f2fbe){const _0x16ba6c=_0xe7f270;this[_0x16ba6c(0xc8)]=_0x4f2fbe;}async[_0xe7f270(0xb0)](){}['test'](){const _0x23c2d4=_0xe7f270;return this[_0x23c2d4(0xc8)][_0x23c2d4(0xb1)](_0x23c2d4(0xc0),0x6f),0x1;}async[_0xe7f270(0xb4)](_0x2bfa6f){const _0x878bed=_0xe7f270,{key:_0x1ceaab}=_0x2bfa6f,_0x2cd32e=await this['redisClient']['get'](_0x1ceaab);return await this['redisClient'][_0x878bed(0xb4)](_0x1ceaab);}async[_0xe7f270(0xb1)](_0x388954,_0x497b42){const _0x84eeff=_0xe7f270;try{const {key:_0x52163c,val:_0x182416}=_0x388954;await this[_0x84eeff(0xc8)]['set'](_0x52163c,_0x182416),_0x497b42&&await this[_0x84eeff(0xc8)]['expire'](_0x52163c,_0x497b42);return;}catch(_0x46bca2){throw new common_1[(_0x84eeff(0xcc))](_0x46bca2,common_1[_0x84eeff(0xd9)][_0x84eeff(0xc9)]);}}async['ttl'](_0x4c5a86){const _0x201b5d=_0xe7f270;return await this[_0x201b5d(0xc8)][_0x201b5d(0xc7)](_0x4c5a86);}async['del'](_0x155182){const _0x2b0a5c=_0xe7f270,{key:_0xb9c2d0}=_0x155182;await this['redisClient'][_0x2b0a5c(0xaf)](_0xb9c2d0);return;}async[_0xe7f270(0xca)](_0x4cd9f6,_0x5432fa){const _0x2f50fe=_0xe7f270,_0x490fd8=await this[_0x2f50fe(0xc8)][_0x2f50fe(0xd7)](_0x2f50fe(0xb3)+_0x4cd9f6,0x0,-0x1);await this[_0x2f50fe(0xdc)](_0x4cd9f6,_0x490fd8),this[_0x2f50fe(0xc8)][_0x2f50fe(0xb1)](_0x2f50fe(0xb9)+_0x4cd9f6,_0x5432fa);}async[_0xe7f270(0xdc)](_0x2066bd,_0x4ff380){const _0x383481=_0xe7f270;_0x4ff380[_0x383481(0xbe)](_0x19e2c0=>{const _0x2ec97b=_0x383481;this['redisClient'][_0x2ec97b(0xaf)](_0x2ec97b(0xb9)+_0x2066bd+':'+_0x19e2c0);});}async['checkTokenAuth'](_0x1cf426,_0x46da72){const _0x41a7c7=_0xe7f270,{id:_0x10b667,role:_0x3723a0}=_0x46da72[_0x41a7c7(0xb6)];if(_0x3723a0===_0x41a7c7(0xce))return!![];const _0x1196a2=await this[_0x41a7c7(0xc8)][_0x41a7c7(0xb4)](_0x41a7c7(0xb9)+_0x10b667);if(_0x1196a2===null)return await this[_0x41a7c7(0xc8)][_0x41a7c7(0xb1)](_0x41a7c7(0xb9)+_0x10b667,_0x1cf426),!![];if(_0x1196a2!==_0x1cf426){if([_0x41a7c7(0xc1),'admin'][_0x41a7c7(0xd6)](_0x3723a0))return!![];throw new common_1['HttpException'](_0x41a7c7(0xbf),common_1[_0x41a7c7(0xd9)][_0x41a7c7(0xbb)]);}}};function _0x1671(){const _0x1352a8=['function','10hXKgFx','length','96NjfHWX','40302LoTNRB','ttl','redisClient','BAD_REQUEST','saveToken','3263rWUWUX','HttpException','decorate','visitor','1013634VNbFbf','1113840RQJOCF','10LqEicY','Inject','__decorate','1335187cJWEkm','design:paramtypes','includes','zRange','125iTCXEd','HttpStatus','metadata','8SGTxBm','invalidateTokens','Injectable','del','onModuleInit','set','580987pSXbCB','tokens:','get','defineProperty','user','getOwnPropertyDescriptor','RedisCacheService','token:','214959CVONsC','UNAUTHORIZED','object','@nestjs/common','forEach','您已在其他设备覆盖登录、请您重新登录！','aaa','super'];_0x1671=function(){return _0x1352a8;};return _0x1671();}RedisCacheService=__decorate([(0x0,common_1[_0xe7f270(0xae)])(),__param(0x0,(0x0,common_1[_0xe7f270(0xd2)])('REDIS_CLIENT')),__metadata(_0xe7f270(0xd5),[Object])],RedisCacheService),exports[_0xe7f270(0xb8)]=RedisCacheService;