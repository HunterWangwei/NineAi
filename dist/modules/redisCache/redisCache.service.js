'use strict';const _0xd177e2=_0x226a;function _0x226a(_0x2fbc99,_0x268ff1){const _0x4a6f41=_0x4a6f();return _0x226a=function(_0x226af8,_0x3a7b31){_0x226af8=_0x226af8-0x17b;let _0x184e0b=_0x4a6f41[_0x226af8];return _0x184e0b;},_0x226a(_0x2fbc99,_0x268ff1);}(function(_0x1142bb,_0x487264){const _0x23def2=_0x226a,_0x18ac61=_0x1142bb();while(!![]){try{const _0x22bb11=parseInt(_0x23def2(0x1a6))/0x1*(-parseInt(_0x23def2(0x193))/0x2)+parseInt(_0x23def2(0x191))/0x3*(parseInt(_0x23def2(0x18f))/0x4)+parseInt(_0x23def2(0x180))/0x5+-parseInt(_0x23def2(0x189))/0x6+parseInt(_0x23def2(0x17b))/0x7*(parseInt(_0x23def2(0x17f))/0x8)+-parseInt(_0x23def2(0x1a0))/0x9+parseInt(_0x23def2(0x1a2))/0xa;if(_0x22bb11===_0x487264)break;else _0x18ac61['push'](_0x18ac61['shift']());}catch(_0x4be9f5){_0x18ac61['push'](_0x18ac61['shift']());}}}(_0x4a6f,0xf3b86));function _0x4a6f(){const _0x415ecb=['redisClient','onModuleInit','object','HttpStatus','__param','11449788kHULyv','get','del','visitor','token:','__metadata','97672AaXEwX','decorate','108qTMami','length','334lDIRti','@nestjs/common','admin','saveToken','invalidateTokens','aaa','HttpException','test','您已在其他设备覆盖登录、请您重新登录！','tokens:','UNAUTHORIZED','zRange','defineProperty','4324347zjZBwF','Inject','16400710JHxPqv','metadata','BAD_REQUEST','set','3373JKQaop','14HEpBik','__decorate','super','__esModule','4746632mpmIOb','1222865WxJpCM','REDIS_CLIENT','ttl','user'];_0x4a6f=function(){return _0x415ecb;};return _0x4a6f();}var __decorate=this&&this[_0xd177e2(0x17c)]||function(_0x414ca1,_0xbb4517,_0x4947c6,_0x27c10a){const _0x3cc1f6=_0xd177e2;var _0x176369=arguments[_0x3cc1f6(0x192)],_0x579717=_0x176369<0x3?_0xbb4517:_0x27c10a===null?_0x27c10a=Object['getOwnPropertyDescriptor'](_0xbb4517,_0x4947c6):_0x27c10a,_0x4388d2;if(typeof Reflect==='object'&&typeof Reflect[_0x3cc1f6(0x190)]==='function')_0x579717=Reflect[_0x3cc1f6(0x190)](_0x414ca1,_0xbb4517,_0x4947c6,_0x27c10a);else{for(var _0x45ef54=_0x414ca1[_0x3cc1f6(0x192)]-0x1;_0x45ef54>=0x0;_0x45ef54--)if(_0x4388d2=_0x414ca1[_0x45ef54])_0x579717=(_0x176369<0x3?_0x4388d2(_0x579717):_0x176369>0x3?_0x4388d2(_0xbb4517,_0x4947c6,_0x579717):_0x4388d2(_0xbb4517,_0x4947c6))||_0x579717;}return _0x176369>0x3&&_0x579717&&Object[_0x3cc1f6(0x19f)](_0xbb4517,_0x4947c6,_0x579717),_0x579717;},__metadata=this&&this[_0xd177e2(0x18e)]||function(_0x4b7717,_0x233560){const _0x3caf43=_0xd177e2;if(typeof Reflect===_0x3caf43(0x186)&&typeof Reflect[_0x3caf43(0x1a3)]==='function')return Reflect[_0x3caf43(0x1a3)](_0x4b7717,_0x233560);},__param=this&&this[_0xd177e2(0x188)]||function(_0x4bb66b,_0x4e2b6e){return function(_0x36abcd,_0x592134){_0x4e2b6e(_0x36abcd,_0x592134,_0x4bb66b);};};Object[_0xd177e2(0x19f)](exports,_0xd177e2(0x17e),{'value':!![]}),exports['RedisCacheService']=void 0x0;const common_1=require(_0xd177e2(0x194));let RedisCacheService=class RedisCacheService{constructor(_0x62b902){const _0xe6ce00=_0xd177e2;this[_0xe6ce00(0x184)]=_0x62b902;}async[_0xd177e2(0x185)](){}[_0xd177e2(0x19a)](){const _0x2e1615=_0xd177e2;return this[_0x2e1615(0x184)][_0x2e1615(0x1a5)](_0x2e1615(0x198),0x6f),0x1;}async[_0xd177e2(0x18a)](_0x38dfbc){const _0xdea29c=_0xd177e2,{key:_0x18d6d0}=_0x38dfbc,_0x2820e3=await this[_0xdea29c(0x184)][_0xdea29c(0x18a)](_0x18d6d0);return await this[_0xdea29c(0x184)][_0xdea29c(0x18a)](_0x18d6d0);}async['set'](_0x553abd,_0x1a1214){const _0x22b022=_0xd177e2;try{const {key:_0x4f1cec,val:_0x22bf3c}=_0x553abd;await this[_0x22b022(0x184)][_0x22b022(0x1a5)](_0x4f1cec,_0x22bf3c),_0x1a1214&&await this[_0x22b022(0x184)]['expire'](_0x4f1cec,_0x1a1214);return;}catch(_0x564984){throw new common_1['HttpException'](_0x564984,common_1['HttpStatus'][_0x22b022(0x1a4)]);}}async[_0xd177e2(0x182)](_0x48795c){const _0x1b4fca=_0xd177e2;return await this['redisClient'][_0x1b4fca(0x182)](_0x48795c);}async['del'](_0x3f02ef){const _0x97c2f2=_0xd177e2,{key:_0x2ff6a8}=_0x3f02ef;await this[_0x97c2f2(0x184)][_0x97c2f2(0x18b)](_0x2ff6a8);return;}async[_0xd177e2(0x196)](_0x52c0ef,_0x3f2106){const _0x2ce588=_0xd177e2,_0x4172e2=await this[_0x2ce588(0x184)][_0x2ce588(0x19e)](_0x2ce588(0x19c)+_0x52c0ef,0x0,-0x1);await this[_0x2ce588(0x197)](_0x52c0ef,_0x4172e2),this[_0x2ce588(0x184)][_0x2ce588(0x1a5)](_0x2ce588(0x18d)+_0x52c0ef,_0x3f2106);}async[_0xd177e2(0x197)](_0x45aab3,_0x1bdc07){_0x1bdc07['forEach'](_0x25a1c2=>{const _0x1a1136=_0x226a;this[_0x1a1136(0x184)]['del'](_0x1a1136(0x18d)+_0x45aab3+':'+_0x25a1c2);});}async['checkTokenAuth'](_0x4fd859,_0x3158ea){const _0x50eb80=_0xd177e2,{id:_0x3cfae8,role:_0x1e178e}=_0x3158ea[_0x50eb80(0x183)];if(_0x1e178e===_0x50eb80(0x18c))return!![];const _0x55f8e5=await this[_0x50eb80(0x184)][_0x50eb80(0x18a)](_0x50eb80(0x18d)+_0x3cfae8);if(_0x55f8e5===null)return await this[_0x50eb80(0x184)]['set'](_0x50eb80(0x18d)+_0x3cfae8,_0x4fd859),!![];if(_0x55f8e5!==_0x4fd859){if([_0x50eb80(0x17d),_0x50eb80(0x195)]['includes'](_0x1e178e))return!![];throw new common_1[(_0x50eb80(0x199))](_0x50eb80(0x19b),common_1[_0x50eb80(0x187)][_0x50eb80(0x19d)]);}}};RedisCacheService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,common_1[_0xd177e2(0x1a1)])(_0xd177e2(0x181))),__metadata('design:paramtypes',[Object])],RedisCacheService),exports['RedisCacheService']=RedisCacheService;