'use strict';function _0x5ce1(_0x183596,_0xf870dc){const _0x2e387b=_0x2e38();return _0x5ce1=function(_0x5ce19a,_0x5014f8){_0x5ce19a=_0x5ce19a-0x117;let _0x4887ec=_0x2e387b[_0x5ce19a];return _0x4887ec;},_0x5ce1(_0x183596,_0xf870dc);}const _0x311bf1=_0x5ce1;(function(_0x162471,_0x405ab6){const _0x488949=_0x5ce1,_0x2ea08e=_0x162471();while(!![]){try{const _0x15c465=parseInt(_0x488949(0x139))/0x1*(-parseInt(_0x488949(0x17b))/0x2)+-parseInt(_0x488949(0x181))/0x3*(parseInt(_0x488949(0x16e))/0x4)+parseInt(_0x488949(0x14c))/0x5+-parseInt(_0x488949(0x172))/0x6+parseInt(_0x488949(0x165))/0x7*(parseInt(_0x488949(0x161))/0x8)+-parseInt(_0x488949(0x168))/0x9*(parseInt(_0x488949(0x173))/0xa)+parseInt(_0x488949(0x14d))/0xb*(parseInt(_0x488949(0x11a))/0xc);if(_0x15c465===_0x405ab6)break;else _0x2ea08e['push'](_0x2ea08e['shift']());}catch(_0x57bb7e){_0x2ea08e['push'](_0x2ea08e['shift']());}}}(_0x2e38,0x41d46));var __decorate=this&&this[_0x311bf1(0x142)]||function(_0x3f5f98,_0x1acd74,_0x359684,_0x3b13ee){const _0x4c22ff=_0x311bf1;var _0x21505b=arguments[_0x4c22ff(0x123)],_0x468b0b=_0x21505b<0x3?_0x1acd74:_0x3b13ee===null?_0x3b13ee=Object[_0x4c22ff(0x16f)](_0x1acd74,_0x359684):_0x3b13ee,_0x3840fb;if(typeof Reflect===_0x4c22ff(0x15f)&&typeof Reflect['decorate']===_0x4c22ff(0x160))_0x468b0b=Reflect['decorate'](_0x3f5f98,_0x1acd74,_0x359684,_0x3b13ee);else{for(var _0x29baad=_0x3f5f98['length']-0x1;_0x29baad>=0x0;_0x29baad--)if(_0x3840fb=_0x3f5f98[_0x29baad])_0x468b0b=(_0x21505b<0x3?_0x3840fb(_0x468b0b):_0x21505b>0x3?_0x3840fb(_0x1acd74,_0x359684,_0x468b0b):_0x3840fb(_0x1acd74,_0x359684))||_0x468b0b;}return _0x21505b>0x3&&_0x468b0b&&Object[_0x4c22ff(0x175)](_0x1acd74,_0x359684,_0x468b0b),_0x468b0b;},__metadata=this&&this[_0x311bf1(0x127)]||function(_0xe0e22e,_0x1a361c){const _0x2388d7=_0x311bf1;if(typeof Reflect===_0x2388d7(0x15f)&&typeof Reflect[_0x2388d7(0x162)]===_0x2388d7(0x160))return Reflect['metadata'](_0xe0e22e,_0x1a361c);},__param=this&&this[_0x311bf1(0x117)]||function(_0x4a37de,_0xfc3392){return function(_0xc0d795,_0x47d5cb){_0xfc3392(_0xc0d795,_0x47d5cb,_0x4a37de);};};Object[_0x311bf1(0x175)](exports,_0x311bf1(0x171),{'value':!![]}),exports[_0x311bf1(0x151)]=void 0x0;const globalConfig_service_1=require(_0x311bf1(0x135)),common_1=require(_0x311bf1(0x17a)),salesUsers_entity_1=require(_0x311bf1(0x131)),typeorm_1=require(_0x311bf1(0x155)),typeorm_2=require(_0x311bf1(0x179)),salesRecords_entity_1=require(_0x311bf1(0x16c)),utils_1=require(_0x311bf1(0x11f)),user_entity_1=require('../user/user.entity'),decimal_js_1=require(_0x311bf1(0x12c)),salesOrder_entity_1=require(_0x311bf1(0x118));function _0x2e38(){const _0x5ece36=['inviterAvatar','HttpException','SalesOrderEntity','inviteeEmail','GlobalConfigService','1551130pMynjD','264561phIquO','getMineRecords','SalesUsersEntity','xxxxxxx','SalesService','log','createOrder','userInfo','@nestjs/typeorm','default','findOne','Like','salesOrderEntity','salesOrder','salesBaseRatio','审核状态错误','salesBaseTitle','drawMoneyOrder','object','function','2936GwmKqP','metadata','inviterEmail','orderStatus','4627NeLGsm','UserEntity','hideString','27tAFYVh','InjectRepository','creaetUserBaseSalesInfo','forEach','./salesRecords.entity','修改失败','4wWxCFA','getOwnPropertyDescriptor','userId','__esModule','2988042MWGUeq','199790JOXKbT','salesOutletName','defineProperty','DESC','error:\x20','push','typeorm','@nestjs/common','331450tkerwl','Repository','assign','email','globalConfigService','提现金额必须为数字且大于0','1059567SYnsTV','map','formatCreateOrUpdateDate','plus','find','审核完成','__param','./salesOrder.entity','提现金额不足','396bZHLIh','createSalesRecords','affected','super','Injectable','../../common/utils','avatar','toNumber','BAD_REQUEST','length','getMineAccount','salesRecordsEntity','withdrawalChannels','__metadata','创建提现工单失败','inviteRecords','salesAllowDrawMoney','salesUserList','decimal.js','changeUserBaseSalesInfo','username','inviteeUsername','count','./salesUsers.entity','userEntity','minus','update','./../globalConfig/globalConfig.service','getConfigs','inviteeUserId','salesUsersEntity','1ERaRoF','auditUserName','inviterUserId','role','修改成功','updateUserSales','save','auditUserId','user','__decorate','findAndCount','withdrawalAmount','HttpStatus','SalesRecordsEntity'];_0x2e38=function(){return _0x5ece36;};return _0x2e38();}let SalesService=class SalesService{constructor(_0x5b03fb,_0x399687,_0xf911c8,_0xee48cd,_0x52cb4c){const _0x3e97e4=_0x311bf1;this['salesUsersEntity']=_0x5b03fb,this[_0x3e97e4(0x125)]=_0x399687,this[_0x3e97e4(0x132)]=_0xf911c8,this[_0x3e97e4(0x159)]=_0xee48cd,this['globalConfigService']=_0x52cb4c;}async[_0x311bf1(0x124)](_0x3fb21c){const _0xcaebc5=_0x311bf1;try{const {id:_0x5ae477}=_0x3fb21c['user'];if(_0x5ae477>0xf4240)return'游客请先登录';let _0x13f4c6=await this['salesUsersEntity'][_0xcaebc5(0x157)]({'where':{'userId':_0x5ae477}});if(!_0x13f4c6){const {salesBaseRatio:salesBaseRatio=0xa,salesBaseTitle:salesBaseTitle='新秀分销商'}=await this[_0xcaebc5(0x17f)][_0xcaebc5(0x136)]([_0xcaebc5(0x15b),_0xcaebc5(0x15d)]);_0x13f4c6=await this[_0xcaebc5(0x16a)]({'userId':_0x5ae477,'performanceRatio':Number(salesBaseRatio),'salesOutletName':salesBaseTitle});}const _0xe171c0=(0x0,utils_1[_0xcaebc5(0x183)])(_0x13f4c6),_0x54b7ac=await this[_0xcaebc5(0x125)][_0xcaebc5(0x130)]({'where':{'inviterUserId':_0x5ae477}}),_0x365add=await this[_0xcaebc5(0x132)]['findOne']({'where':{'id':_0x5ae477}})||{'inviteLinkCount':0x0,'inviteCode':_0xcaebc5(0x150)},{inviteLinkCount:_0x2d08b7,inviteCode:_0x1c6ac3}=_0x365add,_0x5b18c3=await this[_0xcaebc5(0x132)][_0xcaebc5(0x130)]({'where':{'invitedBy':_0x1c6ac3}});return Object[_0xcaebc5(0x17d)](Object['assign']({},_0xe171c0),{'orderCount':_0x54b7ac,'inviteCount':_0x5b18c3,'inviteLinkCount':_0x2d08b7});}catch(_0x55bfeb){console[_0xcaebc5(0x152)](_0xcaebc5(0x177),_0x55bfeb);}}async[_0x311bf1(0x14e)](_0x75a562,_0xe259fc){const _0x5bae2e=_0x311bf1;try{const {id:_0xe62a30}=_0x75a562['user'],{page:_0x2d8607,size:_0x43fd0f}=_0xe259fc,[_0x2d1ee9,_0xcde9d3]=await this[_0x5bae2e(0x125)][_0x5bae2e(0x143)]({'where':{'inviterUserId':_0xe62a30},'order':{'createdAt':_0x5bae2e(0x176)},'skip':(_0x2d8607-0x1)*_0x43fd0f,'take':_0x43fd0f});return{'rows':(0x0,utils_1[_0x5bae2e(0x183)])(_0x2d1ee9),'count':_0xcde9d3};}catch(_0x29fab1){console[_0x5bae2e(0x152)](_0x5bae2e(0x177),_0x29fab1);}}async[_0x311bf1(0x129)](_0x296c17,_0x4e742d){const _0x4bdd7c=_0x311bf1;try{const {page:_0x3fe8c9,size:_0x1f39cb,orderId:_0x3d9a5c,orderPrice:_0x33c2b6}=_0x4e742d;let _0x4ea6f6={};_0x3d9a5c&&(_0x4ea6f6={'orderId':_0x3d9a5c}),_0x33c2b6&&(_0x4ea6f6={'orderPrice':_0x33c2b6});const [_0x1447ea,_0x5ae017]=await this[_0x4bdd7c(0x125)][_0x4bdd7c(0x143)]({'where':_0x4ea6f6,'order':{'createdAt':_0x4bdd7c(0x176)},'skip':(_0x3fe8c9-0x1)*_0x1f39cb,'take':_0x1f39cb}),_0xed91c8=[];_0x1447ea[_0x4bdd7c(0x182)](_0x34849a=>{const _0x4df10e=_0x4bdd7c;_0xed91c8[_0x4df10e(0x178)](_0x34849a['inviterUserId']),_0xed91c8[_0x4df10e(0x178)](_0x34849a[_0x4df10e(0x137)]);});const _0x2a5850=await this[_0x4bdd7c(0x132)][_0x4bdd7c(0x185)]({'where':{'id':(0x0,typeorm_2['In'])(_0xed91c8)}});return _0x1447ea['forEach'](_0xa01a13=>{const _0x160a3e=_0x4bdd7c,_0x3b2b1c=_0x2a5850[_0x160a3e(0x185)](_0x34b1c8=>_0x34b1c8['id']===_0xa01a13[_0x160a3e(0x13b)]),_0x2317e8=_0x2a5850[_0x160a3e(0x185)](_0x53db60=>_0x53db60['id']===_0xa01a13['inviteeUserId']),{username:_0x431044,email:_0x4e601c,avatar:_0x596045}=_0x2a5850[_0x160a3e(0x185)](_0x20a8a3=>_0x20a8a3['id']===_0xa01a13['inviterUserId']);_0xa01a13['inviterUsername']=_0x3b2b1c===null||_0x3b2b1c===void 0x0?void 0x0:_0x3b2b1c[_0x160a3e(0x12e)],_0xa01a13[_0x160a3e(0x163)]=_0x3b2b1c===null||_0x3b2b1c===void 0x0?void 0x0:_0x3b2b1c['email'],_0xa01a13[_0x160a3e(0x147)]=_0x3b2b1c===null||_0x3b2b1c===void 0x0?void 0x0:_0x3b2b1c[_0x160a3e(0x120)],_0xa01a13[_0x160a3e(0x12f)]=_0x2317e8===null||_0x2317e8===void 0x0?void 0x0:_0x2317e8['username'],_0xa01a13[_0x160a3e(0x14a)]=_0x2317e8===null||_0x2317e8===void 0x0?void 0x0:_0x2317e8['email'],_0xa01a13['inviteeAvatar']=_0x2317e8===null||_0x2317e8===void 0x0?void 0x0:_0x2317e8[_0x160a3e(0x120)];}),_0x296c17['user'][_0x4bdd7c(0x13c)]!==_0x4bdd7c(0x11d)&&_0x1447ea[_0x4bdd7c(0x16b)](_0x5bac4e=>{const _0x4fd221=_0x4bdd7c;_0x5bac4e['inviterEmail']=_0x5bac4e[_0x4fd221(0x163)]?(0x0,utils_1['hideString'])(_0x5bac4e['inviterEmail']):'',_0x5bac4e[_0x4fd221(0x14a)]=_0x5bac4e[_0x4fd221(0x14a)]?(0x0,utils_1[_0x4fd221(0x167)])(_0x5bac4e[_0x4fd221(0x14a)]):'';}),{'rows':(0x0,utils_1[_0x4bdd7c(0x183)])(_0x1447ea),'count':_0x5ae017};}catch(_0x341c5c){console[_0x4bdd7c(0x152)](_0x4bdd7c(0x177),_0x341c5c);}}async[_0x311bf1(0x16a)](_0x49f485){const _0x390ef7=_0x311bf1,{userId:_0x5da206,performanceRatio:_0x1c934e,salesOutletName:_0x35b187}=_0x49f485;return await this[_0x390ef7(0x138)][_0x390ef7(0x13f)]({'userId':_0x5da206,'performanceRatio':_0x1c934e,'salesOutletName':_0x35b187});}async[_0x311bf1(0x12d)](_0x55ad4b){const _0x5c02aa=_0x311bf1;return await this[_0x5c02aa(0x138)]['save'](_0x55ad4b);}async[_0x311bf1(0x11b)](_0x17f9d7){const _0x4cee15=_0x311bf1;return await this[_0x4cee15(0x125)]['save'](_0x17f9d7);}async['saveCommissionAmount'](_0x67f7a2,_0x4a7c16){const _0x573317=_0x311bf1,_0x3345c4=await this['salesUsersEntity'][_0x573317(0x157)]({'where':{'userId':_0x67f7a2}});if(!_0x3345c4)return;const {totalAmount:_0x3d472a,distributionBalance:_0x15dff7}=_0x3345c4;return console[_0x573317(0x152)]('totalAmount,\x20distributionBalance:\x20',_0x3d472a,_0x15dff7),await this['salesUsersEntity']['update']({'userId':_0x67f7a2},{'totalAmount':new decimal_js_1['default'](_0x3d472a)['plus'](_0x4a7c16)[_0x573317(0x121)](),'distributionBalance':new decimal_js_1[(_0x573317(0x156))](_0x15dff7)[_0x573317(0x184)](_0x4a7c16)[_0x573317(0x121)]()});}async['appForMoney'](_0x400c7c,_0x373532){const _0x30fcce=_0x311bf1,{id:_0x4a177a}=_0x400c7c[_0x30fcce(0x141)],{withdrawalAmount:_0x22b489,withdrawalChannels:_0x25ffc1,contactInformation:_0x399c91,remark:_0x2c041d}=_0x373532,_0x5d3b3c=await this[_0x30fcce(0x17f)][_0x30fcce(0x136)]([_0x30fcce(0x12a)])||0xa;if(typeof _0x22b489!=='number'||_0x22b489<=0x0)throw new common_1['HttpException'](_0x30fcce(0x180),common_1[_0x30fcce(0x145)][_0x30fcce(0x122)]);if(Number(_0x22b489)<Number(_0x5d3b3c))throw new common_1[(_0x30fcce(0x148))]('提现金额最低必须为'+_0x5d3b3c+'元',common_1[_0x30fcce(0x145)][_0x30fcce(0x122)]);const _0x1a5b4f=await this['salesUsersEntity'][_0x30fcce(0x157)]({'where':{'userId':_0x4a177a}}),{distributionBalance:_0x3c4d76,drawMoneyIn:_0x4bf485}=_0x1a5b4f;if(Number(_0x3c4d76)<Number(_0x22b489))throw new common_1['HttpException'](_0x30fcce(0x119),common_1['HttpStatus']['BAD_REQUEST']);const _0xf81406=new decimal_js_1[(_0x30fcce(0x156))](_0x3c4d76)[_0x30fcce(0x133)](_0x22b489)[_0x30fcce(0x121)](),_0x591ad0={'userId':_0x4a177a,'withdrawalAmount':_0x22b489,'orderStatus':0x0,'auditStatus':0x0,'withdrawalChannels':_0x25ffc1,'contactInformation':_0x399c91,'remark':_0x2c041d};await this[_0x30fcce(0x153)](_0x591ad0);const _0xd10eb=await this[_0x30fcce(0x138)][_0x30fcce(0x134)]({'userId':_0x4a177a},{'distributionBalance':_0xf81406,'drawMoneyIn':new decimal_js_1[(_0x30fcce(0x156))](_0x4bf485)[_0x30fcce(0x184)](_0x22b489)[_0x30fcce(0x121)]()});}async[_0x311bf1(0x15e)](_0x2c4b35,_0xf5621d){const _0x2ab9c4=_0x311bf1,{id:_0xab79eb}=_0x2c4b35[_0x2ab9c4(0x141)],{page:_0x84eb,size:_0x523463}=_0xf5621d,[_0x3561e3,_0x52a226]=await this[_0x2ab9c4(0x159)][_0x2ab9c4(0x143)]({'where':{'userId':_0xab79eb},'order':{'createdAt':_0x2ab9c4(0x176)},'skip':(_0x84eb-0x1)*_0x523463,'take':_0x523463}),_0x5c8636=_0x3561e3['map'](_0x3d7cd5=>_0x3d7cd5[_0x2ab9c4(0x140)]),_0xdedfb4=await this[_0x2ab9c4(0x132)][_0x2ab9c4(0x185)]({'where':{'id':(0x0,typeorm_2['In'])(_0x5c8636)}});return _0x3561e3['forEach'](_0x1b6cd3=>{const _0x39eeaf=_0x2ab9c4,_0x5f0d38=_0xdedfb4[_0x39eeaf(0x185)](_0x4290ac=>_0x4290ac['id']===_0x1b6cd3[_0x39eeaf(0x140)]);_0x1b6cd3[_0x39eeaf(0x13a)]=_0x5f0d38?_0x5f0d38[_0x39eeaf(0x12e)]:'';}),{'rows':(0x0,utils_1['formatCreateOrUpdateDate'])(_0x3561e3),'count':_0x52a226};}async[_0x311bf1(0x15a)](_0x5ef23c,_0x164449){const _0x238f7a=_0x311bf1,{page:_0x15444,size:_0x5306e1}=_0x164449,_0x377466={};_0x164449[_0x238f7a(0x164)]!==undefined&&_0x164449[_0x238f7a(0x164)]!==''&&(_0x377466['orderStatus']=_0x164449[_0x238f7a(0x164)]),_0x164449[_0x238f7a(0x126)]&&(_0x377466['withdrawalChannels']=_0x164449['withdrawalChannels']);const [_0x22ff0f,_0x152217]=await this[_0x238f7a(0x159)][_0x238f7a(0x143)]({'where':_0x377466,'order':{'createdAt':_0x238f7a(0x176)},'skip':(_0x15444-0x1)*_0x5306e1,'take':_0x5306e1}),_0x52d8cd=_0x22ff0f[_0x238f7a(0x182)](_0x80adea=>_0x80adea['userId']),_0x446400=await this[_0x238f7a(0x132)][_0x238f7a(0x185)]({'where':{'id':(0x0,typeorm_2['In'])(_0x52d8cd)}});return _0x22ff0f[_0x238f7a(0x16b)](_0x5768a7=>{const _0x4c73ef=_0x238f7a,_0x1043e4=_0x446400['find'](_0x2598a6=>_0x2598a6['id']===_0x5768a7[_0x4c73ef(0x170)]);if(_0x1043e4){const {username:_0x101daf,email:_0xe3efe2,avatar:_0x790725}=_0x1043e4;_0x5768a7[_0x4c73ef(0x154)]={'username':_0x101daf,'avatar':_0x790725,'email':(0x0,utils_1[_0x4c73ef(0x167)])(_0xe3efe2)};}}),{'rows':(0x0,utils_1['formatCreateOrUpdateDate'])(_0x22ff0f),'count':_0x152217};}async[_0x311bf1(0x153)](_0x22d7e2){const _0x454036=_0x311bf1;try{return await this['salesOrderEntity'][_0x454036(0x13f)](_0x22d7e2);}catch(_0x6a11fc){console[_0x454036(0x152)]('error:\x20',_0x6a11fc);throw new common_1[(_0x454036(0x148))](_0x454036(0x128),common_1[_0x454036(0x145)]['BAD_REQUEST']);}}async['auditOrder'](_0x2a71be,_0x56d221){const _0x3d0936=_0x311bf1;try{const {id:_0x15d8e5}=_0x2a71be['user'],{id:_0x5b9ec9,status:_0x8c7dfa}=_0x56d221;if(![0x1,-0x1]['includes'](_0x8c7dfa))throw new common_1[(_0x3d0936(0x148))](_0x3d0936(0x15c),common_1[_0x3d0936(0x145)][_0x3d0936(0x122)]);const _0xb92b77=await this[_0x3d0936(0x159)]['findOne']({'where':{'id':_0x5b9ec9}});if(_0xb92b77['orderStatus']!==0x0)throw new common_1[(_0x3d0936(0x148))]('该工单已审核过',common_1[_0x3d0936(0x145)][_0x3d0936(0x122)]);const _0x1c1d25=await this[_0x3d0936(0x138)][_0x3d0936(0x157)]({'where':{'userId':_0xb92b77[_0x3d0936(0x170)]}}),{withdrawalAmount:_0x286479,drawMoneyIn:_0x79e0e6}=_0x1c1d25,_0x42df6f=new decimal_js_1['default'](_0x286479)[_0x3d0936(0x184)](_0xb92b77['withdrawalAmount'])[_0x3d0936(0x121)](),_0x17d1b7=new decimal_js_1[(_0x3d0936(0x156))](_0x79e0e6)[_0x3d0936(0x133)](_0xb92b77[_0x3d0936(0x144)])[_0x3d0936(0x121)]();return await this['salesUsersEntity'][_0x3d0936(0x134)]({'userId':_0xb92b77[_0x3d0936(0x170)]},{'withdrawalAmount':_0x42df6f,'drawMoneyIn':_0x17d1b7}),await this[_0x3d0936(0x159)][_0x3d0936(0x134)]({'id':_0x5b9ec9},{'orderStatus':_0x8c7dfa,'auditStatus':_0x8c7dfa,'auditUserId':_0x15d8e5,'paymentStatus':_0x8c7dfa}),_0x3d0936(0x186);}catch(_0x598a69){console[_0x3d0936(0x152)]('error:\x20',_0x598a69);throw new common_1[(_0x3d0936(0x148))]('审核失败',common_1['HttpStatus']['BAD_REQUEST']);}}async[_0x311bf1(0x12b)](_0xf48640,_0x19d015){const _0x107605=_0x311bf1,{page:_0x5a89e5,size:_0x498b06,salesOutletName:_0x52c59b,performanceRatio:_0x4b07e2,userId:_0x1fe042}=_0x19d015,_0x12d79f={};_0x52c59b&&(_0x12d79f[_0x107605(0x174)]=(0x0,typeorm_2[_0x107605(0x158)])('%'+_0x52c59b+'%')),_0x4b07e2&&(_0x12d79f['performanceRatio']=_0x4b07e2),_0x1fe042&&(_0x12d79f[_0x107605(0x170)]=_0x1fe042);const [_0x5d8946,_0x3be7be]=await this['salesUsersEntity']['findAndCount']({'where':_0x12d79f,'order':{'id':_0x107605(0x176)},'skip':(_0x5a89e5-0x1)*_0x498b06,'take':_0x498b06}),_0x5e7d18=_0x5d8946[_0x107605(0x182)](_0x203d48=>_0x203d48[_0x107605(0x170)]),_0x210073=await this[_0x107605(0x132)][_0x107605(0x185)]({'where':{'id':(0x0,typeorm_2['In'])(_0x5e7d18)}});return _0x5d8946[_0x107605(0x16b)](_0x15beee=>{const _0x3e2338=_0x107605,_0x5c419e=_0x210073[_0x3e2338(0x185)](_0x50c90e=>_0x50c90e['id']===_0x15beee[_0x3e2338(0x170)]);_0x15beee[_0x3e2338(0x154)]=_0x5c419e?_0x5c419e:{};}),_0xf48640[_0x107605(0x141)][_0x107605(0x13c)]!==_0x107605(0x11d)&&_0x5d8946[_0x107605(0x16b)](_0x1e9841=>{const _0x3e85db=_0x107605;var _0x58e35b,_0x2cc790;_0x1e9841[_0x3e85db(0x154)][_0x3e85db(0x17e)]=((_0x58e35b=_0x1e9841[_0x3e85db(0x154)])===null||_0x58e35b===void 0x0?void 0x0:_0x58e35b[_0x3e85db(0x17e)])?(0x0,utils_1['hideString'])((_0x2cc790=_0x1e9841[_0x3e85db(0x154)])===null||_0x2cc790===void 0x0?void 0x0:_0x2cc790[_0x3e85db(0x17e)]):'';}),{'rows':_0x5d8946,'count':_0x3be7be};}async[_0x311bf1(0x13e)](_0xaf8c9d,_0x1aa5fc){const _0x395775=_0x311bf1,{performanceRatio:_0x8e88a7,salesOutletName:_0x31c8b8,userId:_0xfba113}=_0x1aa5fc,_0x1174aa=await this[_0x395775(0x138)][_0x395775(0x157)]({'where':{'userId':_0xfba113}});if(!_0x1174aa)throw new common_1[(_0x395775(0x148))]('用户不存在',common_1[_0x395775(0x145)][_0x395775(0x122)]);const _0xece559=await this['salesUsersEntity'][_0x395775(0x134)]({'userId':_0xfba113},{'performanceRatio':_0x8e88a7,'salesOutletName':_0x31c8b8});if(_0xece559[_0x395775(0x11c)]>0x0)return _0x395775(0x13d);else throw new common_1[(_0x395775(0x148))](_0x395775(0x16d),common_1[_0x395775(0x145)][_0x395775(0x122)]);}};SalesService=__decorate([(0x0,common_1[_0x311bf1(0x11e)])(),__param(0x0,(0x0,typeorm_1[_0x311bf1(0x169)])(salesUsers_entity_1[_0x311bf1(0x14f)])),__param(0x1,(0x0,typeorm_1[_0x311bf1(0x169)])(salesRecords_entity_1[_0x311bf1(0x146)])),__param(0x2,(0x0,typeorm_1[_0x311bf1(0x169)])(user_entity_1[_0x311bf1(0x166)])),__param(0x3,(0x0,typeorm_1['InjectRepository'])(salesOrder_entity_1[_0x311bf1(0x149)])),__metadata('design:paramtypes',[typeorm_2[_0x311bf1(0x17c)],typeorm_2['Repository'],typeorm_2[_0x311bf1(0x17c)],typeorm_2[_0x311bf1(0x17c)],globalConfig_service_1[_0x311bf1(0x14b)]])],SalesService),exports[_0x311bf1(0x151)]=SalesService;