'use strict';function _0x1a72(_0x3f12fb,_0x7b3da9){const _0x3c11e4=_0x3c11();return _0x1a72=function(_0x1a726e,_0x27bd0f){_0x1a726e=_0x1a726e-0x1aa;let _0x55536c=_0x3c11e4[_0x1a726e];return _0x55536c;},_0x1a72(_0x3f12fb,_0x7b3da9);}const _0x425676=_0x1a72;(function(_0x34c8d3,_0x2a5e96){const _0x2338e9=_0x1a72,_0x55cee5=_0x34c8d3();while(!![]){try{const _0x3399aa=parseInt(_0x2338e9(0x1cf))/0x1*(parseInt(_0x2338e9(0x1c0))/0x2)+-parseInt(_0x2338e9(0x1dd))/0x3*(-parseInt(_0x2338e9(0x1ce))/0x4)+parseInt(_0x2338e9(0x1c9))/0x5+-parseInt(_0x2338e9(0x1c7))/0x6+-parseInt(_0x2338e9(0x1db))/0x7+parseInt(_0x2338e9(0x1b4))/0x8*(parseInt(_0x2338e9(0x1de))/0x9)+-parseInt(_0x2338e9(0x1e1))/0xa;if(_0x3399aa===_0x2a5e96)break;else _0x55cee5['push'](_0x55cee5['shift']());}catch(_0x2823a2){_0x55cee5['push'](_0x55cee5['shift']());}}}(_0x3c11,0xa5d5e));var __decorate=this&&this[_0x425676(0x1bb)]||function(_0x14a9cd,_0x5bd985,_0xcd3008,_0x55c22b){const _0x2de405=_0x425676;var _0x24328e=arguments[_0x2de405(0x1ae)],_0x43edf9=_0x24328e<0x3?_0x5bd985:_0x55c22b===null?_0x55c22b=Object[_0x2de405(0x1b5)](_0x5bd985,_0xcd3008):_0x55c22b,_0x561883;if(typeof Reflect===_0x2de405(0x1dc)&&typeof Reflect[_0x2de405(0x1d5)]===_0x2de405(0x1d3))_0x43edf9=Reflect['decorate'](_0x14a9cd,_0x5bd985,_0xcd3008,_0x55c22b);else{for(var _0x4c98be=_0x14a9cd[_0x2de405(0x1ae)]-0x1;_0x4c98be>=0x0;_0x4c98be--)if(_0x561883=_0x14a9cd[_0x4c98be])_0x43edf9=(_0x24328e<0x3?_0x561883(_0x43edf9):_0x24328e>0x3?_0x561883(_0x5bd985,_0xcd3008,_0x43edf9):_0x561883(_0x5bd985,_0xcd3008))||_0x43edf9;}return _0x24328e>0x3&&_0x43edf9&&Object[_0x2de405(0x1e5)](_0x5bd985,_0xcd3008,_0x43edf9),_0x43edf9;},__metadata=this&&this['__metadata']||function(_0xded0ff,_0x2a25d7){const _0x163e38=_0x425676;if(typeof Reflect===_0x163e38(0x1dc)&&typeof Reflect['metadata']===_0x163e38(0x1d3))return Reflect[_0x163e38(0x1b3)](_0xded0ff,_0x2a25d7);};Object[_0x425676(0x1e5)](exports,_0x425676(0x1be),{'value':!![]}),exports[_0x425676(0x1bd)]=void 0x0;const redisCache_service_1=require(_0x425676(0x1e0)),common_1=require('@nestjs/common'),passport_1=require(_0x425676(0x1c6)),jwt=require(_0x425676(0x1cb)),core_1=require(_0x425676(0x1b9)),globalConfig_service_1=require(_0x425676(0x1e6)),utils_1=require(_0x425676(0x1ea)),auth_service_1=require(_0x425676(0x1c1));function _0x3c11(){const _0x4ce62f=['toString','__decorate','createTokenFromFingerprint','JwtAuthGuard','__esModule','slice','2642546qPfcfZ','../../modules/auth/auth.service','get','verify','env','authService','@nestjs/passport','7292472PQNzUG','decrypt','4367495lFJAoD','redisCacheService','jsonwebtoken','ModuleRef','split','1756yYXslj','1mDoYYj','getRequest','getNineAiToken','user','function','checkTokenAuth','decorate','UnauthorizedException','design:paramtypes','extractToken','UNAUTHORIZED','HttpStatus','5130874keFIPw','object','7644aepcQi','18tHcgZC','Injectable','../../modules/redisCache/redisCache.service','19833120OWfoGM','switchToHttp','checkDomain','HttpException','defineProperty','../../modules/globalConfig/globalConfig.service','headers','copyRightMsg','globalConfigService','../utils','Bearer','AuthGuard','getRandomItemFromArray','RedisCacheService','length','JWT_SECRET','x-website-domain','AuthService','authorization','metadata','5190496NKOVUB','getOwnPropertyDescriptor','GlobalConfigService','validateToken','亲爱的用户,请登录后继续操作,我们正在等您的到来！','@nestjs/core'];_0x3c11=function(){return _0x4ce62f;};return _0x3c11();}let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x425676(0x1ab)])('jwt'){constructor(_0x452f74,_0x103148,_0x3a1b8d,_0x36d554){const _0x518654=_0x425676;super(),this[_0x518654(0x1ca)]=_0x452f74,this['moduleRef']=_0x103148,this[_0x518654(0x1e9)]=_0x3a1b8d,this[_0x518654(0x1c5)]=_0x36d554;}async['canActivate'](_0x491b56){const _0x44b4df=_0x425676;!this[_0x44b4df(0x1ca)]&&(this[_0x44b4df(0x1ca)]=this['moduleRef'][_0x44b4df(0x1c2)](redisCache_service_1[_0x44b4df(0x1ad)],{'strict':![]}));const _0x524ab9=_0x491b56[_0x44b4df(0x1e2)]()[_0x44b4df(0x1d0)](),_0x5dbf4d=_0x524ab9['headers'][_0x44b4df(0x1b0)],_0x12be8a=this[_0x44b4df(0x1d8)](_0x524ab9);_0x524ab9[_0x44b4df(0x1d2)]=this[_0x44b4df(0x1b7)](_0x12be8a);const _0x2191ef=await this[_0x44b4df(0x1e9)][_0x44b4df(0x1d1)]();if(!_0x2191ef){const _0x57afa8=(0x0,utils_1[_0x44b4df(0x1ac)])(utils_1[_0x44b4df(0x1e8)]);throw new common_1[(_0x44b4df(0x1e4))]((0x0,utils_1[_0x44b4df(0x1c8)])(_0x57afa8),common_1[_0x44b4df(0x1da)]['NON_AUTHORITATIVE_INFORMATION']);}return await this[_0x44b4df(0x1ca)][_0x44b4df(0x1d4)](_0x12be8a,_0x524ab9),await this[_0x44b4df(0x1e9)][_0x44b4df(0x1e3)](_0x5dbf4d,_0x524ab9),!![];}[_0x425676(0x1d8)](_0x679df7){const _0x2c61b8=_0x425676;if(!_0x679df7[_0x2c61b8(0x1e7)]['authorization']){if(_0x679df7['headers']['fingerprint']){let _0x163742=_0x679df7[_0x2c61b8(0x1e7)]['fingerprint'];_0x163742>0x7fffffff&&(_0x163742=_0x163742[_0x2c61b8(0x1ba)]()[_0x2c61b8(0x1bf)](-0x9),_0x163742=Number(String(Number(_0x163742))));const _0x3d6c53=this[_0x2c61b8(0x1c5)][_0x2c61b8(0x1bc)](_0x163742);return _0x3d6c53;}return null;}const _0x3f9127=_0x679df7[_0x2c61b8(0x1e7)][_0x2c61b8(0x1b2)][_0x2c61b8(0x1cd)]('\x20');if(_0x3f9127[_0x2c61b8(0x1ae)]!==0x2||_0x3f9127[0x0]!==_0x2c61b8(0x1aa))return null;return _0x3f9127[0x1];}[_0x425676(0x1b7)](_0x42648c){const _0x17f5c1=_0x425676;try{return jwt[_0x17f5c1(0x1c3)](_0x42648c,process[_0x17f5c1(0x1c4)][_0x17f5c1(0x1af)]);}catch(_0x2a5e6c){throw new common_1[(_0x17f5c1(0x1e4))](_0x17f5c1(0x1b8),common_1['HttpStatus'][_0x17f5c1(0x1d9)]);}}['handleRequest'](_0x1cbed5,_0x2e79af,_0x282b7d){const _0xcb2ba6=_0x425676;if(_0x1cbed5||!_0x2e79af)throw _0x1cbed5||new common_1[(_0xcb2ba6(0x1d6))]();return _0x2e79af;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x425676(0x1df)])(),__metadata(_0x425676(0x1d7),[redisCache_service_1['RedisCacheService'],core_1[_0x425676(0x1cc)],globalConfig_service_1[_0x425676(0x1b6)],auth_service_1[_0x425676(0x1b1)]])],JwtAuthGuard),exports['JwtAuthGuard']=JwtAuthGuard;